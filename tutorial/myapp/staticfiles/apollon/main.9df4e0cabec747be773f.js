!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.apollon=t():e.apollon=t()}(self,(()=>(()=>{"use strict";var e,t,n,o,r,s={3543:(e,t,n)=>{n.r(t),n.d(t,{clear:()=>Uh,draw:()=>jh,model:()=>Fh,onChange:()=>Bh,onSwitch:()=>zh,save:()=>$h,setTheming:()=>Rh}),n(3443);var o=n(6540),r=n(5338);const s={Activity:"Activity",ActivityActionNode:"ActivityActionNode",ActivityFinalNode:"ActivityFinalNode",ActivityForkNode:"ActivityForkNode",ActivityForkNodeHorizontal:"ActivityForkNodeHorizontal",ActivityInitialNode:"ActivityInitialNode",ActivityMergeNode:"ActivityMergeNode",ActivityObjectNode:"ActivityObjectNode"},i={ActivityControlFlow:"ActivityControlFlow"},l={Package:"Package",Class:"Class",AbstractClass:"AbstractClass",Interface:"Interface",Enumeration:"Enumeration",ClassAttribute:"ClassAttribute",ClassMethod:"ClassMethod"},a={ClassBidirectional:"ClassBidirectional",ClassUnidirectional:"ClassUnidirectional",ClassInheritance:"ClassInheritance",ClassRealization:"ClassRealization",ClassDependency:"ClassDependency",ClassAggregation:"ClassAggregation",ClassComposition:"ClassComposition"},c={Component:"Component",Subsystem:"Subsystem",ComponentInterface:"ComponentInterface"},d={ComponentInterfaceProvided:"ComponentInterfaceProvided",ComponentInterfaceRequired:"ComponentInterfaceRequired",ComponentDependency:"ComponentDependency"},h={DeploymentNode:"DeploymentNode",DeploymentComponent:"DeploymentComponent",DeploymentArtifact:"DeploymentArtifact",DeploymentInterface:"DeploymentInterface"},p={DeploymentAssociation:"DeploymentAssociation",DeploymentInterfaceProvided:"DeploymentInterfaceProvided",DeploymentInterfaceRequired:"DeploymentInterfaceRequired",DeploymentDependency:"DeploymentDependency"},u={ObjectName:"ObjectName",ObjectAttribute:"ObjectAttribute",ObjectMethod:"ObjectMethod"},m={ObjectLink:"ObjectLink"},g={UseCase:"UseCase",UseCaseActor:"UseCaseActor",UseCaseSystem:"UseCaseSystem"},y={UseCaseAssociation:"UseCaseAssociation",UseCaseGeneralization:"UseCaseGeneralization",UseCaseInclude:"UseCaseInclude",UseCaseExtend:"UseCaseExtend"},b={PetriNetPlace:"PetriNetPlace",PetriNetTransition:"PetriNetTransition"},f={PetriNetArc:"PetriNetArc"},E={CommunicationLink:"CommunicationLink"},C={CommunicationLinkMessage:"CommunicationLinkMessage"},v={ClassDiagram:"ClassDiagram",ObjectDiagram:"ObjectDiagram",ActivityDiagram:"ActivityDiagram",UseCaseDiagram:"UseCaseDiagram",CommunicationDiagram:"CommunicationDiagram",ComponentDiagram:"ComponentDiagram",DeploymentDiagram:"DeploymentDiagram",PetriNet:"PetriNet",ReachabilityGraph:"ReachabilityGraph",SyntaxTree:"SyntaxTree",Flowchart:"Flowchart",BPMN:"BPMN"},w={SyntaxTreeTerminal:"SyntaxTreeTerminal",SyntaxTreeNonterminal:"SyntaxTreeNonterminal"},x={SyntaxTreeLink:"SyntaxTreeLink"},k={FlowchartTerminal:"FlowchartTerminal",FlowchartProcess:"FlowchartProcess",FlowchartDecision:"FlowchartDecision",FlowchartInputOutput:"FlowchartInputOutput",FlowchartFunctionCall:"FlowchartFunctionCall"},M={FlowchartFlowline:"FlowchartFlowline"},T={ColorLegend:"ColorLegend"},P={ReachabilityGraphMarking:"ReachabilityGraphMarking"},S={ReachabilityGraphArc:"ReachabilityGraphArc"},N={BPMNTask:"BPMNTask",BPMNSubprocess:"BPMNSubprocess",BPMNTransaction:"BPMNTransaction",BPMNCallActivity:"BPMNCallActivity",BPMNAnnotation:"BPMNAnnotation",BPMNStartEvent:"BPMNStartEvent",BPMNIntermediateEvent:"BPMNIntermediateEvent",BPMNEndEvent:"BPMNEndEvent",BPMNGateway:"BPMNGateway",BPMNDataObject:"BPMNDataObject",BPMNDataStore:"BPMNDataStore",BPMNPool:"BPMNPool",BPMNSwimlane:"BPMNSwimlane",BPMNGroup:"BPMNGroup"},D={BPMNFlow:"BPMNFlow"},L={...l,...u,...s,...g,...C,...c,...h,...b,...P,...w,...k,...T,...N},A={[v.ClassDiagram]:l,[v.ObjectDiagram]:u,[v.ActivityDiagram]:s,[v.UseCaseDiagram]:g,[v.CommunicationDiagram]:C,[v.ComponentDiagram]:c,[v.DeploymentDiagram]:h,[v.PetriNet]:b,[v.ReachabilityGraph]:P,[v.SyntaxTree]:w,[v.Flowchart]:k,[v.BPMN]:N,...T},O=(e,t)=>{for(const n in t)Array.isArray(t[n])?"selectedBy"===n&&void 0===e[n]?e[n]=[...O({...e,selectedBy:[]}[n],t[n])]:e[n]=[...O(e[n],t[n])]:"object"==typeof t[n]?null==t[n]?e[n]=null:e[n]={...e[n],...O(e[n],t[n])}:void 0!==t[n]&&(void 0===e&&(e={}),e[n]=t[n]);return e};class I{constructor(e=0,t=0){this.x=e,this.y=t}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){return new I(this.x/this.length,this.y/this.length)}add(e,t){return e instanceof I?new I(this.x+e.x,this.y+e.y):"number"==typeof t?new I(this.x+e,this.y+t):this.clone()}subtract(e,t){return e instanceof I?new I(this.x-e.x,this.y-e.y):"number"==typeof t?new I(this.x-e,this.y-t):this.clone()}round(e=10){return new I(Math.round(this.x/e)*e,Math.round(this.y/e)*e)}scale(e){return new I(this.x*e,this.y*e)}clone(){return new I(this.x,this.y)}}const B=n(3829).A;var z,$;function F(e){switch(e){case z.Down:return z.Up;case z.Left:return z.Right;case z.Right:return z.Left;case z.Up:return z.Down;case z.Upright:return z.Upleft;case z.Downright:return z.Downleft;case z.Upleft:return z.Upright;case z.Downleft:return z.Downright;case z.Topright:return z.Topleft;case z.Bottomright:return z.Bottomleft;case z.Topleft:return z.Topright;case z.Bottomleft:return z.Bottomright;default:throw Error(`Could not determine opposite direction for direction of ${e}`)}}!function(e){e.Up="Up",e.Right="Right",e.Down="Down",e.Left="Left",e.Upright="Upright",e.Upleft="Upleft",e.Downright="Downright",e.Downleft="Downleft",e.Topright="Topright",e.Topleft="Topleft",e.Bottomright="Bottomright",e.Bottomleft="Bottomleft"}(z||(z={})),function(e){e.TOPLEFT="topLeft",e.TOPRIGHT="topRight",e.BOTTOMLEFT="bottomLeft",e.BOTTOMRIGHT="bottomRight"}($||($={}));const U=e=>({[z.Up]:new I(e.bounds.width/2,0),[z.Right]:new I(e.bounds.width,e.bounds.height/2),[z.Down]:new I(e.bounds.width/2,e.bounds.height),[z.Left]:new I(0,e.bounds.height/2),[z.Upright]:new I(e.bounds.width,e.bounds.height/4),[z.Downright]:new I(e.bounds.width,3*e.bounds.height/4),[z.Upleft]:new I(0,e.bounds.height/4),[z.Downleft]:new I(0,3*e.bounds.height/4),[z.Topright]:new I(3*e.bounds.width/4,0),[z.Bottomright]:new I(3*e.bounds.width/4,e.bounds.height),[z.Topleft]:new I(e.bounds.width/4,0),[z.Bottomleft]:new I(e.bounds.width/4,e.bounds.height)});class R{constructor(e){this.id=B(),this.name="",this.bounds={x:0,y:0,width:160,height:100},this.owner=null,this.resizeFrom=$.BOTTOMRIGHT,O(this,e)}clone(e){return new(0,this.constructor)({...this,...e,id:B()})}serialize(e){return{id:this.id,name:this.name,type:this.type,owner:this.owner,bounds:this.bounds,highlight:this.highlight,fillColor:this.fillColor,strokeColor:this.strokeColor,textColor:this.textColor,assessmentNote:this.assessmentNote}}deserialize(e,t){this.id=e.id,this.name=e.name,this.type=e.type,this.owner=e.owner||null,this.bounds={...e.bounds},this.highlight=e.highlight,this.fillColor=e.fillColor,this.strokeColor=e.strokeColor,this.textColor=e.textColor,this.assessmentNote=e.assessmentNote}}function j(e){if(!e.length)return{x:0,y:0,width:0,height:0};const t=e.map((e=>({...e.bounds}))),n=Math.min(...t.map((e=>e.x))),o=Math.min(...t.map((e=>e.y)));return{x:n,y:o,width:Math.max(...t.map((e=>e.x+e.width)))-n,height:Math.max(...t.map((e=>e.y+e.height)))-o}}function H(e,t,n){return n&&1===e?t*e:10*Math.round(t*e/10)}R.features={connectable:!0,droppable:!1,hoverable:!0,movable:!0,resizable:!0,selectable:!0,updatable:!0,alternativePortVisualization:!1},R.supportedRelationships=[],R.isUMLElement=e=>e.type in L;class W{}function V(e,t){return j([e,{bounds:{x:e.bounds.x,y:e.bounds.y,width:10*Math.round((W.size(t,e.name,{fontWeight:"bold"}).width+20)/10),height:10*Math.round((W.size(t,e.name,{fontWeight:"bold"}).height+20)/10)}}])}W.size=(e,t,n)=>{const o=e.layer;if(!o)return{width:0,height:0};const r=document.createElementNS("http://www.w3.org/2000/svg","text");Object.assign(r.style,{...n,visibility:"hidden"}),r.appendChild(document.createTextNode(t)),o.appendChild(r);const s=r.getBBox();return o.removeChild(r),{width:s.width,height:s.height}};class G extends R{constructor(){super(...arguments),this.type=s.ActivityActionNode}render(e){return this.bounds=V(this,e),[this]}}G.supportedRelationships=[i.ActivityControlFlow];class Y extends R{constructor(e){super(e),this.type=s.ActivityFinalNode,this.bounds={...this.bounds,width:50,height:50},O(this,e)}render(e){return[this]}}Y.supportedRelationships=[i.ActivityControlFlow],Y.features={...R.features,resizable:!1,updatable:!1};class Z extends R{constructor(e){super(e),this.type=s.ActivityForkNode,this.bounds={...this.bounds},this.bounds.height=e&&e.bounds&&e.bounds.height||Z.defaultHeight,this.bounds.width=Z.defaultWidth}render(e){return this.bounds.height=Math.max(this.bounds.height,Z.defaultHeight),[this]}}Z.supportedRelationships=[i.ActivityControlFlow],Z.features={...R.features,updatable:!1},Z.defaultWidth=20,Z.defaultHeight=60;class _ extends R{constructor(e){super(e),this.type=s.ActivityForkNodeHorizontal,this.bounds={...this.bounds},this.bounds.width=e&&e.bounds&&e.bounds.width||_.defaultWidth,this.bounds.height=_.defaultHeight}render(e){return this.bounds.width=Math.max(this.bounds.width,_.defaultWidth),[this]}}_.supportedRelationships=[i.ActivityControlFlow],_.features={...R.features,updatable:!1},_.defaultWidth=60,_.defaultHeight=20;class X extends R{constructor(e){super(e),this.type=s.ActivityInitialNode,this.bounds={...this.bounds,width:50,height:50},O(this,e)}render(e){return[this]}}X.supportedRelationships=[i.ActivityControlFlow],X.features={...R.features,resizable:!1,updatable:!1};class q extends R{constructor(){super(...arguments),this.type=s.ActivityMergeNode,this.bounds={...this.bounds}}render(e){return this.bounds=V(this,e),[this]}}q.supportedRelationships=[i.ActivityControlFlow];class K extends R{constructor(){super(...arguments),this.type=s.ActivityObjectNode}render(e){return this.bounds=V(this,e),[this]}}K.supportedRelationships=[i.ActivityControlFlow];class J extends R{constructor(e){super(),this.ownedElements=[],O(this,e)}reorderChildren(e){return e.map((e=>e.id))}serialize(e){return{...super.serialize(e),type:this.type}}deserialize(e,t=[]){super.deserialize(e),this.ownedElements=t.map((e=>e.id))}}J.features={...R.features,droppable:!0},J.isUMLContainer=e=>"ownedElements"in e;class Q extends J{render(e,t=[],n){const o=V(this,e),r=t.map((e=>(e.bounds.x+=this.bounds.x,e.bounds.y+=this.bounds.y,e)));let s=j([{bounds:o},...r]);n&&(s=o);const i=r.map((e=>(e.bounds.x-=this.bounds.x,e.bounds.y-=this.bounds.y,e))),l=s.x-this.bounds.x,a=s.y-this.bounds.y;return i.forEach((e=>{e.bounds.x-=l,e.bounds.y-=a})),this.bounds=s,[this,...i]}}class ee extends Q{constructor(){super(...arguments),this.type=s.Activity}}ee.supportedRelationships=[i.ActivityControlFlow];class te extends R{constructor(e){super(e),this.bounds={...this.bounds,height:H(1,30)},O(this,e)}render(e){const t=W.size(e,this.name).width+20;return this.bounds.width=Math.max(this.bounds.width,10*Math.round(t/10)),[this]}}te.features={...R.features,hoverable:!1,selectable:!1,movable:!1,resizable:!1,connectable:!1,droppable:!1,updatable:!1};class ne extends te{}class oe extends te{}class re extends J{get headerHeight(){return this.stereotype?re.stereotypeHeaderHeight:re.nonStereotypeHeaderHeight}constructor(e){super(),this.italic=!1,this.underline=!1,this.stereotype=null,this.deviderPosition=0,this.hasAttributes=!1,this.hasMethods=!1,O(this,e)}serialize(e=[]){return{...super.serialize(e),type:this.type,attributes:e.filter((e=>e instanceof ne)).map((e=>e.id)),methods:e.filter((e=>e instanceof oe)).map((e=>e.id))}}render(e,t=[]){const n=t.filter((e=>e instanceof ne)),o=t.filter((e=>e instanceof oe));this.hasAttributes=n.length>0,this.hasMethods=o.length>0,this.bounds.width=[this,...n,...o].reduce(((t,n,o)=>Math.max(t,10*Math.round((W.size(e,n.name,0===o?{fontWeight:"bold"}:void 0).width+20)/10))),10*Math.round(this.bounds.width/10));let r=this.headerHeight;for(const e of n)e.bounds.x=.5,e.bounds.y=r+.5,e.bounds.width=this.bounds.width-1,r+=e.bounds.height;this.deviderPosition=r;for(const e of o)e.bounds.x=.5,e.bounds.y=r+.5,e.bounds.width=this.bounds.width-1,r+=e.bounds.height;return this.bounds.height=r,[this,...n,...o]}}re.features={...J.features,droppable:!1,resizable:"WIDTH"},re.stereotypeHeaderHeight=50,re.nonStereotypeHeaderHeight=40;class se extends re{constructor(){super(...arguments),this.type=l.AbstractClass,this.italic=!0,this.stereotype="abstract"}reorderChildren(e){const t=e.filter((e=>e.type===l.ClassAttribute)),n=e.filter((e=>e.type===l.ClassMethod));return[...t.map((e=>e.id)),...n.map((e=>e.id))]}}class ie extends ne{constructor(){super(...arguments),this.type=l.ClassAttribute}}class le extends oe{constructor(){super(...arguments),this.type=l.ClassMethod}}class ae extends Q{constructor(){super(...arguments),this.type=l.Package}}class ce extends re{constructor(){super(...arguments),this.type=l.Class}reorderChildren(e){const t=e.filter((e=>e.type===l.ClassAttribute)),n=e.filter((e=>e.type===l.ClassMethod));return[...t.map((e=>e.id)),...n.map((e=>e.id))]}}class de extends re{constructor(){super(...arguments),this.type=l.Enumeration,this.stereotype="enumeration"}reorderChildren(e){const t=e.filter((e=>e.type===l.ClassAttribute)),n=e.filter((e=>e.type===l.ClassMethod));return[...t.map((e=>e.id)),...n.map((e=>e.id))]}}class he extends re{constructor(){super(...arguments),this.type=l.Interface,this.stereotype="interface"}reorderChildren(e){const t=e.filter((e=>e.type===l.ClassAttribute)),n=e.filter((e=>e.type===l.ClassMethod));return[...t.map((e=>e.id)),...n.map((e=>e.id))]}}class pe extends R{constructor(e){super(e),this.bounds={...this.bounds,width:20,height:20},O(this,e)}render(e){return[this]}}pe.features={...R.features,resizable:!1,alternativePortVisualization:!0};class ue extends pe{constructor(){super(...arguments),this.type=c.ComponentInterface}}ue.supportedRelationships=[d.ComponentInterfaceProvided,d.ComponentInterfaceRequired];class me extends R{constructor(e){super(),this.type=h.DeploymentArtifact,this.bounds={...this.bounds,height:40},O(this,e),this.bounds.height=e&&e.bounds&&e.bounds.height||40}render(e){return this.bounds.height=Math.max(this.bounds.height,40),this.bounds=V(this,e),[this]}}me.supportedRelationships=[p.DeploymentAssociation,p.DeploymentDependency,p.DeploymentInterfaceProvided,p.DeploymentInterfaceRequired];class ge extends Q{constructor(e){super(),this.type=h.DeploymentNode,this.stereotype="node",this.displayStereotype=!0,O(this,e)}serialize(){return{...super.serialize(),type:this.type,stereotype:this.stereotype,displayStereotype:this.displayStereotype}}deserialize(e,t){e.type===h.DeploymentNode&&(super.deserialize(e,t),this.stereotype=e.stereotype,this.displayStereotype=e.displayStereotype)}}ge.supportedRelationships=[p.DeploymentAssociation,p.DeploymentDependency,p.DeploymentInterfaceProvided,p.DeploymentInterfaceRequired];class ye extends ne{constructor(){super(...arguments),this.type=u.ObjectAttribute}}class be extends oe{constructor(){super(...arguments),this.type=u.ObjectMethod}}class fe extends re{constructor(){super(...arguments),this.type=u.ObjectName,this.underline=!0}reorderChildren(e){const t=e.filter((e=>e.type===u.ObjectAttribute)),n=e.filter((e=>e.type===u.ObjectMethod));return[...t.map((e=>e.id)),...n.map((e=>e.id))]}}class Ee extends R{constructor(e){super(e),this.type=g.UseCaseActor,this.bounds={...this.bounds,width:90,height:140},O(this,e)}render(e){return[this]}}class Ce extends Q{constructor(){super(...arguments),this.type=g.UseCaseSystem}}Ce.features={...J.features,connectable:!1};class ve extends R{constructor(){super(...arguments),this.type=g.UseCase}render(e){return this.bounds=V(this,e),[this]}}class we extends pe{constructor(){super(...arguments),this.type=h.DeploymentInterface}}we.supportedRelationships=[p.DeploymentInterfaceProvided,p.DeploymentInterfaceRequired];class xe extends R{constructor(e){super(e),this.type=b.PetriNetTransition,this.bounds={...this.bounds},this.bounds.height=e&&e.bounds&&e.bounds.height||xe.defaultHeight,this.bounds.width=e&&e.bounds&&e.bounds.width||xe.defaultWidth}render(e){return this.bounds.height=Math.max(this.bounds.height,xe.defaultHeight),this.bounds.width=Math.max(this.bounds.width,xe.defaultWidth),[this]}}xe.features={...R.features},xe.defaultWidth=20,xe.defaultHeight=60;class ke extends R{constructor(e){super(e),this.highlight=void 0,this.type=b.PetriNetPlace,this.bounds={...this.bounds,width:60,height:60},O(this,e),this.amountOfTokens=e?.amountOfTokens||0===e?.amountOfTokens?e.amountOfTokens:0,this.capacity=e?.capacity||0===e?.capacity?e.capacity:ke.defaultCapacity}serialize(e){return{...super.serialize(),type:this.type,amountOfTokens:this.amountOfTokens,capacity:isFinite(this.capacity)?this.capacity:this.capacity.toString()}}deserialize(e,t){e.type===b.PetriNetPlace&&(super.deserialize(e,t),this.amountOfTokens=e.amountOfTokens,this.capacity=e.capacity===Number.POSITIVE_INFINITY.toString()?Number.POSITIVE_INFINITY:e.capacity)}render(e){return[this]}}ke.features={...R.features,resizable:!1},ke.defaultCapacity=Number.POSITIVE_INFINITY;class Me extends R{constructor(e){super(e),this.type=P.ReachabilityGraphMarking,this.isInitialMarking=e?.isInitialMarking||!1}serialize(e){return{...super.serialize(),type:this.type,isInitialMarking:this.isInitialMarking}}deserialize(e,t){e.type===P.ReachabilityGraphMarking&&(super.deserialize(e,t),this.isInitialMarking=e.isInitialMarking)}render(e){return this.bounds=V(this,e),[this]}}class Te extends R{constructor(e){super(e),this.type=C.CommunicationLinkMessage,this.direction=e?.direction||"target"}render(e){return[this]}}class Pe extends Q{constructor(){super(...arguments),this.stereotype="component",this.displayStereotype=!0}}class Se extends Pe{constructor(e){super(),this.type=h.DeploymentComponent,O(this,e)}serialize(){return{...super.serialize(),type:this.type,displayStereotype:this.displayStereotype}}deserialize(e,t){e.type===h.DeploymentComponent&&(super.deserialize(e,t),this.displayStereotype=e.displayStereotype)}}Se.supportedRelationships=[p.DeploymentAssociation,p.DeploymentDependency,p.DeploymentInterfaceProvided,p.DeploymentInterfaceRequired];class Ne extends Pe{constructor(e){super(),this.type=c.Component,O(this,e)}serialize(){return{...super.serialize(),type:this.type,displayStereotype:this.displayStereotype}}deserialize(e,t){e.type===c.Component&&(super.deserialize(e,t),this.displayStereotype=e.displayStereotype)}}Ne.supportedRelationships=[d.ComponentDependency,d.ComponentInterfaceProvided,d.ComponentInterfaceRequired];class De extends Q{constructor(e){super(),this.stereotype="subsystem",this.displayStereotype=!0,this.type=c.Subsystem,O(this,e)}serialize(){return{...super.serialize(),type:this.type,stereotype:this.stereotype,displayStereotype:this.displayStereotype}}deserialize(e,t){e.type===c.Subsystem&&(super.deserialize(e,t),this.stereotype=e.stereotype,this.displayStereotype=e.displayStereotype)}}De.supportedRelationships=[d.ComponentDependency,d.ComponentInterfaceProvided,d.ComponentInterfaceRequired];class Le extends R{constructor(){super(...arguments),this.type=w.SyntaxTreeTerminal}render(e){return this.bounds=V(this,e),[this]}}class Ae extends R{constructor(){super(...arguments),this.type=w.SyntaxTreeNonterminal}render(e){return this.bounds=V(this,e),[this]}}class Oe extends R{constructor(){super(...arguments),this.type=k.FlowchartTerminal}render(e){return this.bounds=V(this,e),[this]}}class Ie extends R{constructor(){super(...arguments),this.type=k.FlowchartFunctionCall}render(e){return this.bounds=V(this,e),[this]}}class Be extends R{constructor(){super(...arguments),this.type=k.FlowchartDecision}render(e){return this.bounds=V(this,e),[this]}}class ze extends R{constructor(){super(...arguments),this.type=k.FlowchartProcess}render(e){return this.bounds=V(this,e),[this]}}class $e extends R{constructor(){super(...arguments),this.type=k.FlowchartInputOutput}render(e){return this.bounds=V(this,e),[this]}}class Fe extends R{constructor(e){super(e&&!e.bounds?{...e,bounds:{x:0,y:0,width:160,height:50}}:e),this.type=T.ColorLegend}render(e){return[this]}}class Ue extends J{constructor(e){super(e),this.type=N.BPMNTask,O(this,e),this.taskType=e?.taskType||Ue.defaultTaskType,this.marker=e?.marker||Ue.defaultMarker}serialize(e){return{...super.serialize(),type:this.type,taskType:this.taskType,marker:this.marker}}deserialize(e,t){super.deserialize(e,t),this.taskType=e.taskType||Ue.defaultTaskType,this.marker=e.marker||Ue.defaultMarker}render(e){return[this]}}Ue.defaultTaskType="default",Ue.defaultMarker="none";class Re extends J{constructor(){super(...arguments),this.type=N.BPMNSubprocess}render(e){return this.bounds=V(this,e),[this]}}class je extends J{constructor(e){super(e),this.type=N.BPMNStartEvent,this.bounds={...this.bounds,width:40,height:40},O(this,e),this.eventType=e?.eventType||je.defaultEventType}serialize(e){return{...super.serialize(),type:this.type,eventType:this.eventType}}deserialize(e,t){super.deserialize(e,t),this.eventType=e.eventType||je.defaultEventType}render(e){return[this]}}je.supportedRelationships=[D.BPMNFlow],je.features={...J.features,resizable:!1},je.defaultEventType="default";class He extends J{constructor(e){super(e),this.type=N.BPMNIntermediateEvent,this.bounds={...this.bounds,width:40,height:40},O(this,e),this.eventType=e?.eventType||He.defaultEventType}serialize(e){return{...super.serialize(),type:this.type,eventType:this.eventType}}deserialize(e,t){super.deserialize(e,t),this.eventType=e.eventType||He.defaultEventType}render(e){return[this]}}He.supportedRelationships=[D.BPMNFlow],He.features={...J.features,resizable:!1},He.defaultEventType="default";class We extends J{constructor(e){super(e),this.type=N.BPMNEndEvent,this.bounds={...this.bounds,width:40,height:40},O(this,e),this.eventType=e?.eventType||We.defaultEventType}serialize(e){return{...super.serialize(),type:this.type,eventType:this.eventType}}deserialize(e,t){super.deserialize(e,t),this.eventType=e.eventType||We.defaultEventType}render(e){return[this]}}We.supportedRelationships=[D.BPMNFlow],We.features={...J.features,resizable:!1},We.defaultEventType="default";class Ve extends J{constructor(e){super(e),this.type=N.BPMNGateway,this.bounds={...this.bounds,width:40,height:40},O(this,e),this.gatewayType=e?.gatewayType||Ve.defaultGatewayType}serialize(e){return{...super.serialize(),type:this.type,gatewayType:this.gatewayType}}deserialize(e,t){super.deserialize(e,t),this.gatewayType=e.gatewayType||Ve.defaultGatewayType}render(e){return[this]}}Ve.features={...J.features,resizable:!1},Ve.defaultGatewayType="exclusive";class Ge extends J{constructor(){super(...arguments),this.type=N.BPMNTransaction}render(e){return[this]}}class Ye extends J{constructor(){super(...arguments),this.type=N.BPMNCallActivity}render(e){return[this]}}class Ze extends J{constructor(){super(...arguments),this.type=N.BPMNAnnotation}render(e){return[this]}}Ze.features={...J.features};class _e extends J{constructor(){super(...arguments),this.type=N.BPMNDataObject}render(e){return[this]}}_e.features={...J.features,resizable:!1};class Xe extends Q{constructor(){super(...arguments),this.type=N.BPMNPool,this.hasSwimlanes=e=>e.length>0&&e.every((e=>e.type===N.BPMNSwimlane))}render(e,t=[],n){this.bounds.width<Xe.MIN_WIDTH&&(this.bounds.width=Xe.MIN_WIDTH);const o=this.hasSwimlanes(t);if(!o)return[this,...t];const r=t.reduce(((e,t)=>e+t.bounds.height),0),s=t.reverse().map(((e,n)=>(e.type!==N.BPMNSwimlane||(e.bounds.x=Xe.HEADER_WIDTH,e.bounds.y=n>0?t[n-1].bounds.y+t[n-1].bounds.height:0,e.bounds.width=this.bounds.width-Xe.HEADER_WIDTH,e.resizeFrom=$.BOTTOMRIGHT),e)));return o&&(this.bounds.height=r<Xe.MIN_HEIGHT?Xe.MIN_HEIGHT:r),[this,...s]}}Xe.MIN_WIDTH=80,Xe.MIN_HEIGHT=80,Xe.HEADER_WIDTH=40,Xe.features={...R.features,droppable:!0,movable:!0,resizable:!0,connectable:!0};class qe extends J{constructor(){super(...arguments),this.type=N.BPMNSwimlane}render(e,t=[]){return this.bounds.height<qe.MIN_HEIGHT&&(this.bounds.height=qe.MIN_HEIGHT),[this,...t]}}qe.DEFAULT_HEIGHT=80,qe.MIN_HEIGHT=80,qe.features={...R.features,droppable:!0,movable:!1,connectable:!1,updatable:!1,resizable:"HEIGHT"};class Ke extends Q{constructor(){super(...arguments),this.type=N.BPMNGroup}render(e,t=[]){return[this,...t]}}Ke.features={...Q.features,connectable:!1};class Je extends J{constructor(){super(...arguments),this.type=N.BPMNDataStore}render(e){return[this]}}Je.features={...J.features,resizable:!1};const Qe={[L.Package]:ae,[L.Class]:ce,[L.AbstractClass]:se,[L.Interface]:he,[L.Enumeration]:de,[L.ClassAttribute]:ie,[L.ClassMethod]:le,[L.ObjectName]:fe,[L.ObjectAttribute]:ye,[L.ObjectMethod]:be,[L.Activity]:ee,[L.ActivityInitialNode]:X,[L.ActivityFinalNode]:Y,[L.ActivityActionNode]:G,[L.ActivityObjectNode]:K,[L.ActivityForkNode]:Z,[L.ActivityForkNodeHorizontal]:_,[L.ActivityMergeNode]:q,[L.UseCase]:ve,[L.UseCaseActor]:Ee,[L.UseCaseSystem]:Ce,[L.Component]:Ne,[L.Subsystem]:De,[L.ComponentInterface]:ue,[L.DeploymentNode]:ge,[L.DeploymentComponent]:Se,[L.DeploymentArtifact]:me,[L.DeploymentInterface]:we,[L.PetriNetPlace]:ke,[L.PetriNetTransition]:xe,[L.ReachabilityGraphMarking]:Me,[L.CommunicationLinkMessage]:Te,[L.SyntaxTreeTerminal]:Le,[L.SyntaxTreeNonterminal]:Ae,[L.FlowchartTerminal]:Oe,[L.FlowchartFunctionCall]:Ie,[L.FlowchartProcess]:ze,[L.FlowchartDecision]:Be,[L.FlowchartInputOutput]:$e,[L.ColorLegend]:Fe,[L.BPMNTask]:Ue,[L.BPMNSubprocess]:Re,[L.BPMNTransaction]:Ge,[L.BPMNCallActivity]:Ye,[L.BPMNAnnotation]:Ze,[L.BPMNStartEvent]:je,[L.BPMNIntermediateEvent]:He,[L.BPMNEndEvent]:We,[L.BPMNGateway]:Ve,[L.BPMNDataObject]:_e,[L.BPMNDataStore]:Je,[L.BPMNPool]:Xe,[L.BPMNSwimlane]:qe,[L.BPMNGroup]:Ke},et={...a,...m,...i,...y,...E,...d,...p,...f,...S,...x,...M,...D},tt={[v.ClassDiagram]:a.ClassBidirectional,[v.ObjectDiagram]:m.ObjectLink,[v.ActivityDiagram]:i.ActivityControlFlow,[v.UseCaseDiagram]:y.UseCaseAssociation,[v.CommunicationDiagram]:E.CommunicationLink,[v.ComponentDiagram]:d.ComponentInterfaceProvided,[v.DeploymentDiagram]:p.DeploymentAssociation,[v.PetriNet]:f.PetriNetArc,[v.ReachabilityGraph]:S.ReachabilityGraphArc,[v.SyntaxTree]:x.SyntaxTreeLink,[v.Flowchart]:M.FlowchartFlowline,[v.BPMN]:D.BPMNFlow};var nt;!function(e){e[e.Collinear=0]="Collinear",e[e.Clockwise=1]="Clockwise",e[e.CounterClockwise=2]="CounterClockwise"}(nt||(nt={}));class ot{static computePath(e,t,n){const o=U(e.element)[e.direction].add(e.element.bounds.x,e.element.bounds.y),r=U(t.element)[t.direction].add(t.element.bounds.x,t.element.bounds.y);if(n.isStraight)return o.x===r.x&&o.y===r.y&&(r.x+=1,r.y+=1),[o,r];if(n.isVariable){const n=ot.tryFindStraightPath(e,t);if(null!==n)return n[0].x===n[1].x&&n[0].y===n[1].y&&(n[1].x+=1,n[1].y+=1),n}const s=40,i=vt(e.element.bounds,s),l=vt(t.element.bounds,s),a=vt(e.element.bounds,39),c=vt(t.element.bounds,39);let d=o.clone();switch(e.direction){case z.Up:case z.Topright:case z.Topleft:d=d.add(0,-40);break;case z.Right:case z.Upright:case z.Downright:d=d.add(s,0);break;case z.Down:case z.Bottomright:case z.Bottomleft:d=d.add(0,s);break;case z.Left:case z.Upleft:case z.Downleft:d=d.add(-40,0)}let h=r.clone();switch(t.direction){case z.Up:case z.Topright:case z.Topleft:h=h.add(0,-40);break;case z.Right:case z.Upright:case z.Downright:h=h.add(s,0);break;case z.Down:case z.Bottomright:case z.Bottomleft:h=h.add(0,s);break;case z.Left:case z.Upleft:case z.Downleft:h=h.add(-40,0)}const p=rt(yt(i),h),u=rt(yt(l),p),m=wt(i,e.direction,d,p),g=wt(l,t.direction,h,u),y=[o,d],b=[r,h];let f={...d},E={...h};for(;;){if(!xt(f,E,a)&&!xt(f,E,c)){const e=St(y.slice(-2)),t=St(b.slice(-2));if("HORIZONTAL"===e&&"HORIZONTAL"===t){const e=(f.x+E.x)/2;y.push({x:e,y:f.y},{x:e,y:E.y})}else if("VERTICAL"===e&&"VERTICAL"===t){const e=(f.y+E.y)/2;y.push({x:f.x,y:e},{x:E.x,y:e})}else"HORIZONTAL"===e&&"VERTICAL"===t?y.push({x:E.x,y:f.y}):y.push({x:f.x,y:E.y});break}const e=m.shift();if(void 0!==e)y.push(e),f=e;else{const e=g.shift();if(void 0===e)return[o,d,h,r];b.push(e),E=e}}const C=b.reverse();return(v=[...y,...C]).length<=1||(v=lt(v=function(e){if(e.length<4)return e;const t=pt(dt(e));return ht(e[0],t)}(v=function(e){const t=dt(e);if(t.length<=1)return e;const n=[];for(const e of t){const t=n[n.length-1];t&&(0===t.dx&&0===e.dx||0===t.dy&&0===e.dy)?n[n.length-1]={dx:t.dx+e.dx,dy:t.dy+e.dy}:n.push(e)}return ht(e[0],n)}(v=function(e){const t=[];for(const n of e){const e=t[t.length-1];e&&gt(n,e)||t.push(n)}return t}(v))))),v;var v}static tryFindStraightPath(e,t){const n=40,o=Nt(e.direction),r=Nt(t.direction);if(o===z.Right&&r===z.Left&&t.element.bounds.x>=e.element.bounds.x+e.element.bounds.width){const o=Pt([e.element.bounds.y,e.element.bounds.y+Math.max(n,e.element.bounds.height)],[t.element.bounds.y,t.element.bounds.y+Math.max(n,t.element.bounds.height)]);if(null!==o&&o[1]-o[0]>=n){const n=(o[0]+o[1])/2;return[{x:e.element.bounds.x+e.element.bounds.width,y:n},{x:t.element.bounds.x,y:n}]}}if(o===z.Left&&r===z.Right&&e.element.bounds.x>=t.element.bounds.x+t.element.bounds.width){const o=Pt([e.element.bounds.y,e.element.bounds.y+Math.max(n,e.element.bounds.height)],[t.element.bounds.y,t.element.bounds.y+Math.max(n,t.element.bounds.height)]);if(null!==o&&o[1]-o[0]>=n){const n=(o[0]+o[1])/2;return[{x:e.element.bounds.x,y:n},{x:t.element.bounds.x+t.element.bounds.width,y:n}]}}if(o===z.Down&&r===z.Up&&t.element.bounds.y>=e.element.bounds.y+e.element.bounds.height){const o=Pt([e.element.bounds.x,e.element.bounds.x+e.element.bounds.width],[t.element.bounds.x,t.element.bounds.x+t.element.bounds.width]);if(null!==o&&o[1]-o[0]>=n){const n=(o[0]+o[1])/2;return[{x:n,y:e.element.bounds.y+e.element.bounds.height},{x:n,y:t.element.bounds.y}]}}if(o===z.Up&&r===z.Down&&e.element.bounds.y>=t.element.bounds.y+t.element.bounds.height){const o=Pt([e.element.bounds.x,e.element.bounds.x+e.element.bounds.width],[t.element.bounds.x,t.element.bounds.x+t.element.bounds.width]);if(null!==o&&o[1]-o[0]>=n){const n=(o[0]+o[1])/2;return[{x:n,y:e.element.bounds.y},{x:n,y:t.element.bounds.y+t.element.bounds.height}]}}return null}}function rt(e,t){let n=1/0,o=e[0];for(const r of e){const e=st(t,r);e<n&&(n=e,o=r)}return o}function st(e,t){const n=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y);return Math.sqrt(n**2+o**2)}function it(e){let t=0;for(let n=1;n<e.length;n++)t+=st(e[n],e[n-1]);return t}function lt(e){for(let t=0;t<e.length-2;t++){const n=e[t],o=e[t+1],r=e[t+2];if(at(n,o,r)||ct(n,o,r))return lt([...e.slice(0,t+1),...e.slice(t+2)])}return e}function at(e,t,n){return mt(e.y,t.y)&&mt(t.y,n.y)&&(e.x>=t.x&&t.x>=n.x||e.x<=t.x&&t.x<=n.x)}function ct(e,t,n){return mt(e.x,t.x)&&mt(t.x,n.x)&&(e.y<=t.y&&t.y<=n.y||e.y>=t.y&&t.y>=n.y)}function dt(e){const t=[];for(let n=0;n<e.length-1;n++){const o=e[n],r=e[n+1],s=r.x-o.x,i=r.y-o.y;t.push({dx:s,dy:i})}return t}function ht(e,t){const n=[e];let o=e;for(const{dx:e,dy:r}of t)o={x:o.x+e,y:o.y+r},n.push(o);return n}function pt(e){for(let t=0;t<e.length-3;t++){const n=e[t],o=e[t+1],r=e[t+2],s=e[t+3];if(0===n.dy&&0===o.dx&&0===r.dy&&Math.sign(n.dx)===Math.sign(r.dx)&&Math.sign(o.dy)===Math.sign(s.dy))return pt([...e.slice(0,t),{dx:n.dx+r.dx,dy:0},{dx:0,dy:o.dy},...e.slice(t+3)]);if(0===n.dx&&0===o.dy&&0===r.dx&&Math.sign(n.dy)===Math.sign(r.dy)&&Math.sign(o.dx)===Math.sign(s.dx))return pt([...e.slice(0,t),{dx:0,dy:n.dy+r.dy},{dx:o.dx,dy:0},...e.slice(t+3)])}return e}function ut(e){return Math.abs(e)<1e-6}function mt(e,t){return ut(e-t)}function gt(e,t){const n=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y);return ut(n)&&ut(o)}function yt(e){return[bt(e),ft(e),Ct(e),Et(e)]}function bt(e){return{x:e.x,y:e.y}}function ft(e){return{x:e.x+e.width,y:e.y}}function Et(e){return{x:e.x,y:e.y+e.height}}function Ct(e){return{x:e.x+e.width,y:e.y+e.height}}function vt(e,t){return{x:e.x-t,y:e.y-t,width:e.width+2*t,height:e.height+2*t}}function wt(e,t,n,o){let r,s;const i=bt(e),l=ft(e),a=Et(e),c=Ct(e);switch(t){case z.Up:case z.Topright:case z.Topleft:r=[l,c,a,i],s=[i,a,c,l];break;case z.Right:case z.Upright:case z.Downright:r=[c,a,i,l],s=[l,i,a,c];break;case z.Down:case z.Bottomright:case z.Bottomleft:r=[a,i,l,c],s=[c,l,i,a];break;case z.Left:case z.Upleft:case z.Downleft:r=[i,l,c,a],s=[a,c,l,i];break;default:throw Error("Unreachable code")}if(null!==o){for(let e=0;e<4;e++)if(gt(r[e],o)){r=r.slice(0,e+1);break}for(let e=0;e<4;e++)if(gt(s[e],o)){s=s.slice(0,e+1);break}}return it([n,...r])<it([n,...s])?r:s}function xt(e,t,n){if(function(e,t,n){return e.x>n.x&&e.x<n.x+n.height&&e.y>n.y&&e.y<n.y+n.height}(e,0,n))return!0;const o=bt(n),r=ft(n),s=Et(n),i=Ct(n);return kt(e,t,o,r)||kt(e,t,r,i)||kt(e,t,o,s)||kt(e,t,s,i)}function kt(e,t,n,o){const r=Mt(e,t,n),s=Mt(e,t,o),i=Mt(n,o,e),l=Mt(n,o,t);return r!==s&&i!==l||!(r!==nt.Collinear||!Tt(e,n,t))||!(s!==nt.Collinear||!Tt(e,o,t))||!(i!==nt.Collinear||!Tt(n,e,o))||!(l!==nt.Collinear||!Tt(n,t,o))}function Mt(e,t,n){const o=(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y);return ut(o)?nt.Collinear:o>0?nt.Clockwise:nt.CounterClockwise}function Tt(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Pt(e,t){const[n,o]=e,[r,s]=t,i=Math.max(n,r),l=Math.min(o,s);return i<=l?[i,l]:null}function St(e){const[t,n]=e,o=n.x-t.x,r=n.y-t.y;return 0===o&&0!==r?"VERTICAL":0!==o&&0===r?"HORIZONTAL":null}function Nt(e){switch(e){case z.Left:case z.Upleft:case z.Downleft:return z.Left;case z.Right:case z.Upright:case z.Downright:return z.Right;case z.Down:case z.Bottomleft:case z.Bottomright:return z.Down;case z.Up:case z.Topleft:case z.Topright:return z.Up}}class Dt extends R{constructor(e){super(),this.path=[{x:0,y:0},{x:200,y:100}],this.source={direction:z.Up,element:""},this.target={direction:z.Up,element:""},O(this,e)}serialize(){return{...super.serialize(),type:this.type,path:this.path,source:this.source,target:this.target,isManuallyLayouted:this.isManuallyLayouted}}deserialize(e,t){e.type in et&&(super.deserialize(e),this.type=e.type,this.path=e.path,this.source=e.source,this.target=e.target,this.isManuallyLayouted=e.isManuallyLayouted)}render(e,t,n){if(!t||!n)return[this];const{straight:o,variable:r}=this.constructor.features,s=ot.computePath({element:t,direction:this.source.direction},{element:n,direction:this.target.direction},{isStraight:o,isVariable:r}),i=Math.min(...s.map((e=>e.x))),l=Math.min(...s.map((e=>e.y))),a=Math.max(Math.max(...s.map((e=>e.x)))-i,1),c=Math.max(Math.max(...s.map((e=>e.y)))-l,1);return this.bounds={x:i,y:l,width:a,height:c},this.path=s.map((e=>({x:e.x-i,y:e.y-l}))),[this]}cloneRelationship(e){return new(0,this.constructor)({...this,...e,id:B()})}}Dt.features={connectable:!1,droppable:!1,hoverable:!0,movable:!1,reconnectable:!0,resizable:!1,selectable:!0,updatable:!0,straight:!1,variable:!0,alternativePortVisualization:!1},Dt.isUMLRelationship=e=>e.type in et;class Lt extends J{constructor(e){super(),this.type=v.ClassDiagram,this.ownedRelationships=[],this.bounds={...this.bounds,width:0,height:0},O(this,e)}render(e,t=[]){const n=t.reduce(((e,t)=>({width:Math.max(Math.abs(t.bounds.x),Math.abs(t.bounds.x+t.bounds.width),e.width),height:Math.max(Math.abs(t.bounds.y),Math.abs(t.bounds.y+t.bounds.height),e.height)})),{width:0,height:0});return this.bounds={x:-n.width-40,y:-n.height-40,width:2*n.width+40,height:2*n.height+40},[this]}}class At extends Dt{render(e,t,n){if(super.render(e,t,n),this.name){const t=this.bounds;let n=new I(0,0),o="v";const r=this.path.map((e=>new I(e.x,e.y)));let s=r.reduce(((e,t,n,o)=>n+1<o.length?e+o[n+1].subtract(t).length:e),0)/2;for(let e=0;e<r.length-1;e++){const t=r[e+1].subtract(r[e]);if(t.length>s){const i=t.normalize();o=Math.abs(i.x)>Math.abs(i.y)?"h":"v",n=r[e].add(i.scale(s));break}s-=t.length}n=n.add(t.x,t.y);const i=W.size(e,this.name),l={bounds:{x:"v"===o?n.x+5:n.x-i.width/2,y:n.y-40,width:i.width,height:i.height}};this.bounds=j([this,l]);const a=t.x-this.bounds.x,c=t.y-this.bounds.y;this.path.forEach((e=>{e.x+=a,e.y+=c}))}return[this]}}var Ot=n(2568);const It=Ot.Ay,Bt=Ot.AH,zt={color:{primary:"var(--apollon-primary, #2a8fbd)",secondary:"var(--apollon-secondary, #6c757d)",warningYellow:"var(--apollon-warning-yellow, #ffc800)",background:"var(--apollon-background, #ffffff)",backgroundVariant:"var(--apollon-background-variant, #e5e5e5)",grid:"var(--apollon-grid, rgba(36, 39, 36, 0.1))",primaryContrast:"var(--apollon-primary-contrast, #212529)",gray:"var(--apollon-gray, #e9ecef)",grayAccent:"var(--apollon-gray-variant, #343a40)"},font:{color:"var(--apollon-primary-contrast, #212529)",family:"Helvetica Neue, Helvetica, Arial, sans-serif",size:16},interactive:{normal:"rgba(0, 220, 0, 0.3)",hovered:"rgba(0, 220, 0, 0.15)"}},$t=()=>zt,Ft=It.polyline.attrs((e=>({fillColor:e.fillColor,strokeColor:e.strokeColor,stroke:e.strokeColor||"black",fill:e.fillColor||"white"})))`
  fill: ${e=>e.fillColor||e.theme.color.background};
  stroke: ${e=>e.strokeColor||e.theme.color.primaryContrast};
`,Ut=It.path.attrs((e=>({fillColor:e.fillColor,strokeColor:e.strokeColor,stroke:e.strokeColor||"black",fill:e.fillColor||"white"})))`
  fill: ${e=>e.fillColor||e.theme.color.background};
  stroke: ${e=>e.strokeColor||e.theme.color.primaryContrast};
`,Rt=It.path.attrs((e=>({fillColor:e.fillColor,strokeColor:e.strokeColor,stroke:e.strokeColor||"white",fill:e.fillColor||"black"})))`
  fill: ${e=>e.fillColor||e.theme.color.primaryContrast};
  stroke: ${e=>e.strokeColor||e.theme.color.background};
`,jt=It.rect.attrs((e=>({fillColor:e.fillColor,strokeColor:e.strokeColor,stroke:e.strokeColor||"black",fill:e.fillColor||"white"})))`
  fill: ${e=>e.fillColor||e.theme.color.background};
  stroke: ${e=>e.strokeColor||e.theme.color.primaryContrast};
`,Ht=It.rect.attrs((e=>({fillColor:e.fillColor,strokeColor:e.strokeColor,stroke:e.strokeColor||"white",fill:e.fillColor||"black"})))`
  fill: ${e=>e.fillColor||e.theme.color.primaryContrast};
  stroke: ${e=>e.strokeColor||e.theme.color.background};
`,Wt=It.circle.attrs((e=>({fillColor:e.fillColor,strokeColor:e.strokeColor,stroke:e.strokeColor||"black",fill:e.fillColor||"white"})))`
  fill: ${e=>e.fillColor||e.theme.color.background};
  stroke: ${e=>e.strokeColor||e.theme.color.primaryContrast};
`,Vt=It.circle.attrs((e=>({fillColor:e.fillColor,strokeColor:e.strokeColor,stroke:e.strokeColor||"white",fill:e.fillColor||"black"})))`
  fill: ${e=>e.fillColor||e.theme.color.primaryContrast};
  stroke: ${e=>e.strokeColor||e.theme.color.background};
`,Gt=It.ellipse.attrs((e=>({fillColor:e.fillColor,strokeColor:e.strokeColor,stroke:e.strokeColor||"black",fill:e.fillColor||"white"})))`
  fill: ${e=>e.fillColor||e.theme.color.background};
  stroke: ${e=>e.strokeColor||e.theme.color.primaryContrast};
`,Yt=It.line.attrs((e=>({strokeColor:e.strokeColor,stroke:e.strokeColor||"black"})))`
  stroke: ${e=>e.strokeColor||e.theme.color.primaryContrast};
`,Zt=(e,t)=>o.createElement("marker",{id:e,viewBox:"0 0 30 30",markerWidth:22,markerHeight:30,refX:30,refY:15,orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:"M0,29 L30,15 L0,1",fillColor:"none",strokeColor:t})),_t=(e,t)=>o.createElement("marker",{id:e,viewBox:"0 0 30 30",markerWidth:"30",markerHeight:"30",refX:"30",refY:"15",orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:"M0,15 L15,22 L30,15 L15,8 z",fillColor:t,strokeColor:t})),Xt=(e,t)=>o.createElement("marker",{id:e,viewBox:"0 0 30 30",markerWidth:"30",markerHeight:"30",refX:"30",refY:"15",orient:"auto",markerUnits:"strokeWidth"},o.createElement(Rt,{d:"M0,15 L15,22 L30,15 L15,8 z",fillColor:t})),qt=(e,t)=>o.createElement("marker",{id:e,viewBox:"0 0 30 30",markerWidth:"22",markerHeight:"30",refX:"30",refY:"15",orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:"M0,1 L0,29 L30,15 z",strokeColor:t})),Kt=(e,t)=>{switch(e){case z.Up:case z.Topright:case z.Topleft:return{dx:"TOP"===t?-5:5,textAnchor:"TOP"===t?"end":"start"};case z.Right:case z.Upright:case z.Downright:return{dy:"TOP"===t?-10:21,textAnchor:"start"};case z.Down:case z.Bottomright:case z.Bottomleft:return{dx:"TOP"===t?-5:5,dy:10,textAnchor:"TOP"===t?"end":"start"};case z.Left:case z.Upleft:case z.Downleft:return{dy:"TOP"===t?-10:21,textAnchor:"end"}}},Jt=(e,t=!1)=>{const n=t?31:8;if(e.length<2)return new I;const o=e[1].subtract(e[0]);return e[0].add(o.normalize().scale(n))},Qt=e=>(e=>{switch(e){case a.ClassDependency:case a.ClassUnidirectional:return Zt;case a.ClassAggregation:return _t;case a.ClassComposition:return Xt;case a.ClassInheritance:case a.ClassRealization:return qt}})(e),en=({element:e})=>{const t=Qt(e.type),n=(e=>{switch(e){case a.ClassDependency:case a.ClassRealization:return 7}})(e.type),r=e.path.map((e=>new I(e.x,e.y))),s=Jt(r),i=Jt(r.reverse(),!!t),l=`marker-${e.id}`,c=e.textColor?{fill:e.textColor}:{};return o.createElement("g",null,t&&t(l,e.strokeColor),o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1,markerEnd:`url(#${l})`,strokeDasharray:n}),o.createElement("text",{x:s.x||0,y:s.y||0,...Kt(e.source.direction,"BOTTOM"),pointerEvents:"none",style:{...c}},e.source.multiplicity),o.createElement("text",{x:i.x||0,y:i.y||0,...Kt(e.target.direction,"BOTTOM"),pointerEvents:"none",style:{...c}},e.target.multiplicity),o.createElement("text",{x:s.x||0,y:s.y||0,...Kt(e.source.direction,"TOP"),pointerEvents:"none",style:{...c}},e.source.role),o.createElement("text",{x:i.x||0,y:i.y||0,...Kt(e.target.direction,"TOP"),pointerEvents:"none",style:{...c}},e.target.role))},tn=(e,t,n,o)=>{const r=W.size(e,n,{textAnchor:o.textAnchor});return{bounds:{x:t.x+("end"===o.textAnchor?-r.width:0)+(o.dx?o.dx:0),y:t.y+(o.dy?o.dy:0),width:r.width,height:r.height}}};class nn extends Dt{constructor(e){super(),this.source={direction:z.Up,element:"",multiplicity:"",role:""},this.target={direction:z.Up,element:"",multiplicity:"",role:""},O(this,e)}render(e,t,n){super.render(e,t,n);const o=this.bounds,r=Kt(this.source.direction,"BOTTOM"),s=Kt(this.target.direction,"BOTTOM"),i=Kt(this.source.direction,"TOP"),l=Kt(this.target.direction,"TOP"),a=Qt(this.type),c=this.path.map((e=>new I(e.x,e.y))),d=Jt(c).add(this.bounds.x,this.bounds.y),h=Jt(c.reverse(),!!a).add(this.bounds.x,this.bounds.y),p=[tn(e,d,this.source.multiplicity,r),tn(e,h,this.target.multiplicity,s),tn(e,d,this.source.role,i),tn(e,h,this.target.role,l)];this.bounds=j([this,...p]);const u=o.x-this.bounds.x,m=o.y-this.bounds.y;return this.path.forEach((e=>{e.x+=u,e.y+=m})),[this]}}class on extends Dt{}class rn extends Dt{}rn.features={...Dt.features,variable:!1};var sn;!function(e){e.Semicircle="M 13 -13.5 a 1 1 0 0 0 0 27",e.Threequarterscircle="M 8 -12.5 C -3.5 -7.5 -3.3 7.9 8 12.5",e.Quartercircle="M 2 -7.8 C -1.5 -3 -1.2 3.4 2 7.8"}(sn||(sn={}));class ln extends Dt{render(e,t,n){super.render(e,t,n);const o=this.bounds,r=this.path[this.path.length-1],s=new I(this.bounds.x,this.bounds.y).add(r.x,r.y),i={bounds:{x:s.x-Math.floor(13.5),y:s.y-Math.floor(13.5),width:27,height:27}};this.bounds=j([this,i]);const l=o.x-this.bounds.x,a=o.y-this.bounds.y;return this.path.forEach((e=>{e.x+=l,e.y+=a})),[this]}}ln.features={...Dt.features,variable:!1},ln.isUMLInterfaceRequired=e=>ln.isUMLRelationship(e)&&(e.type===p.DeploymentInterfaceRequired||e.type===d.ComponentInterfaceRequired);class an extends Dt{constructor(){super(...arguments),this.type=y.UseCaseAssociation}}an.features={...Dt.features,straight:!0};class cn extends Dt{constructor(){super(...arguments),this.type=y.UseCaseExtend}}cn.features={...Dt.features,straight:!0};class dn extends Dt{constructor(){super(...arguments),this.type=y.UseCaseGeneralization}}dn.features={...Dt.features,straight:!0};class hn extends Dt{constructor(){super(...arguments),this.type=y.UseCaseInclude}}hn.features={...Dt.features,straight:!0};class pn extends Dt{constructor(e){super(e),this.type=f.PetriNetArc,this.name=pn.defaultMultiplicity,this.name=e&&e.name||this.name}}pn.features={...Dt.features,straight:!0},pn.defaultMultiplicity="1";class un extends At{constructor(e){super(e),this.type=S.ReachabilityGraphArc,this.name=un.transition,this.name=e&&e.name||this.name}}un.features={...Dt.features},un.transition="t";class mn extends Dt{constructor(){super(...arguments),this.type=x.SyntaxTreeLink}}mn.features={...Dt.features,straight:!0};class gn extends At{constructor(e){super(e),this.type=D.BPMNFlow,this.name="",this.name=e?.name||this.name,this.flowType=e?.flowType||gn.defaultFlowType}serialize(e){return{...super.serialize(),type:this.type,flowType:this.flowType}}deserialize(e,t){super.deserialize(e,t),this.flowType=e.flowType||gn.defaultFlowType}}gn.features={...Dt.features},gn.defaultFlowType="sequence";const yn={[et.ClassAggregation]:class extends nn{constructor(){super(...arguments),this.type=a.ClassAggregation}},[et.ClassBidirectional]:class extends nn{constructor(){super(...arguments),this.type=a.ClassBidirectional}},[et.ClassComposition]:class extends nn{constructor(){super(...arguments),this.type=a.ClassComposition}},[et.ClassDependency]:class extends nn{constructor(){super(...arguments),this.type=a.ClassDependency}},[et.ClassInheritance]:class extends nn{constructor(){super(...arguments),this.type=a.ClassInheritance}},[et.ClassRealization]:class extends nn{constructor(){super(...arguments),this.type=a.ClassRealization}},[et.ClassUnidirectional]:class extends nn{constructor(){super(...arguments),this.type=a.ClassUnidirectional}},[et.ObjectLink]:class extends Dt{constructor(){super(...arguments),this.type=m.ObjectLink}},[et.ActivityControlFlow]:class extends At{constructor(){super(...arguments),this.type=i.ActivityControlFlow}},[et.UseCaseAssociation]:an,[et.UseCaseExtend]:cn,[et.UseCaseGeneralization]:dn,[et.UseCaseInclude]:hn,[et.CommunicationLink]:class extends Dt{constructor(e){super(),this.type=E.CommunicationLink,this.messages=[],O(this,e)}serialize(){return{...super.serialize(),messages:this.messages.reduce(((e,t)=>({...e,[t.id]:t})),{})}}deserialize(e,t){e.type===E.CommunicationLink&&(super.deserialize(e,t),this.messages=Object.values(e.messages).map((e=>new Te(e))))}render(e,t,n){super.render(e,t,n);const o=this.bounds,r=this.path.map((e=>new I(e.x,e.y)));let s,i,l=r.reduce(((e,t,n,o)=>n+1<o.length?e+o[n+1].subtract(t).length:e),0)/2;for(let e=0;e<r.length-1;e++){const t=r[e+1].subtract(r[e]);if(t.length>l){const n=t.normalize();s=Math.abs(n.x)>Math.abs(n.y)?n.x>0?z.Left:z.Right:n.y>0?z.Up:z.Down,i=r[e].add(n.scale(l));break}l-=t.length}if(!s||!i)throw Error(`Could not determine direction or messagePosition for CommunicationLink. \n MessagePosition: ${i} \n Direction: ${s}`);i=i.add(o.x,o.y);const a=this.messages.filter((e=>"source"===e.direction)),c=this.messages.filter((e=>"target"===e.direction)),d=[{bounds:o}];if(a&&a.length>0){const t=this.computeBoundingBoxForMessages(e,i,a,s);d.push({bounds:t})}const h=F(s);if(c&&c.length>0){const t=this.computeBoundingBoxForMessages(e,i,c,h);d.push({bounds:t})}this.bounds=j(d);const p=o.x-this.bounds.x,u=o.y-this.bounds.y;return this.path.forEach((e=>{e.x+=p,e.y+=u})),this.messages.forEach((e=>{e.bounds.x+=p-o.x,e.bounds.y+=u-o.y})),[this]}computeBoundingBoxForMessages(e,t,n,o){const r=W.size(e,"⟶",{fontWeight:"bold",fontSize:"120%"});let s=o===z.Left?t.y-r.height:o===z.Right?t.y+W.size(e,n[0].name).height+r.height:t.y;const i=o===z.Up?t.x+r.width:o===z.Down?t.x-r.width:t.x;for(const t of n){const n=W.size(e,t.name);o===z.Right?(t.bounds.x=i-n.width/2,t.bounds.y=s,t.bounds.width=n.width,t.bounds.height=n.height,s+=n.height):o===z.Down?(t.bounds.x=i-n.width,t.bounds.y=s,t.bounds.width=n.width,t.bounds.height=n.height,s+=n.height):o===z.Up?(t.bounds.x=i,t.bounds.y=s,t.bounds.width=n.width,t.bounds.height=n.height,s+=n.height):o===z.Left&&(t.bounds.x=i-n.width/2,t.bounds.y=s,t.bounds.width=n.width,t.bounds.height=n.height,s-=n.height)}return j(n)}},[et.ComponentDependency]:class extends on{constructor(){super(...arguments),this.type=d.ComponentDependency}},[et.ComponentInterfaceProvided]:class extends rn{constructor(){super(...arguments),this.type=d.ComponentInterfaceProvided}},[et.ComponentInterfaceRequired]:class extends ln{constructor(){super(...arguments),this.type=d.ComponentInterfaceRequired}},[et.DeploymentAssociation]:class extends At{constructor(){super(...arguments),this.type=p.DeploymentAssociation}},[et.DeploymentDependency]:class extends on{constructor(){super(...arguments),this.type=p.DeploymentDependency}},[et.DeploymentInterfaceProvided]:class extends rn{constructor(){super(...arguments),this.type=p.DeploymentInterfaceProvided}},[et.DeploymentInterfaceRequired]:class extends ln{constructor(){super(...arguments),this.type=p.DeploymentInterfaceRequired}},[et.PetriNetArc]:pn,[et.ReachabilityGraphArc]:un,[et.SyntaxTreeLink]:mn,[et.FlowchartFlowline]:class extends Dt{constructor(){super(...arguments),this.type=M.FlowchartFlowline}},[et.BPMNFlow]:gn};function bn(e,t){const n=o=>e.includes(o.id)?[o.id]:J.isUMLContainer(o)?o.ownedElements.reduce(((e,o)=>[...e,...n(t[o])]),[]):[];return Object.values(t).filter((e=>!e.owner)).reduce(((e,t)=>[...e,...n(t)]),[])}function fn(e,t){const n=[];for(const o of e){const e=t[o];e&&(J.isUMLContainer(e)&&n.push(...fn(e.ownedElements,t)),n.push(e.id))}return n}function En(e,t){if(!J.isUMLContainer(e))return[e.clone()];const n=[],o=e.clone(),{ownedElements:r}=e;for(const e of r){const r=t.find((t=>t.id===e));if(!r)continue;const[s,...i]=En(r,t);s.owner=o.id;const l=o.ownedElements.findIndex((t=>t===e));o.ownedElements[l]=s.id,n.push(s,...i)}return[o,...n]}var Cn;!function(e){e.APPEND="@@element/diagram/APPEND",e.BRING_TO_FRONT="@@element/diagram/BRING_TO_FRONT"}(Cn||(Cn={}));const vn={isUMLDiagram:e=>e.type in v,get:e=>e&&vn.isUMLDiagram(e)?new Lt(e):null,append:e=>(t,n)=>{t({type:Cn.APPEND,payload:{ids:Array.isArray(e)?e:[e]},undoable:!1})},bringToFront:e=>(t,n)=>{const o=(Array.isArray(e)?e:[e]).filter((e=>n().diagram.ownedElements.includes(e)));t({type:Cn.BRING_TO_FRONT,payload:{ids:o},undoable:!1})}};var wn;!function(e){e.APPEND="@@element/container/APPEND",e.REMOVE="@@element/container/REMOVE"}(wn||(wn={}));const xn={get:e=>e?vn.isUMLDiagram(e)?vn.get(e):J.isUMLContainer(e)?new(0,Qe[e.type])(e):null:null,append:(e,t)=>(n,o)=>{const r=Array.isArray(e)?e:[e],{elements:s,diagram:i}=o(),l=r.filter((e=>Dt.isUMLRelationship(s[e])));l.length&&n({type:Cn.APPEND,payload:{ids:l},undoable:!1});const a=r.filter((e=>R.isUMLElement(s[e])));a.length&&n({type:wn.APPEND,payload:{ids:a,owner:t||i.id},undoable:!1})},remove:e=>({type:wn.REMOVE,payload:{ids:Array.isArray(e)?e:[e]},undoable:!0})};var kn;!function(e){e.CREATE="@@element/CREATE",e.UPDATE="@@element/UPDATE",e.DELETE="@@element/DELETE"}(kn||(kn={}));const Mn={create:(e,t)=>async n=>{const o=Array.isArray(e)?e:[e];n({type:kn.CREATE,payload:{values:o},undoable:!0});const r=o.filter((e=>!e.owner)).map((e=>e.id));r.length&&n(xn.append(r,t))},get:e=>e&&R.isUMLElement(e)?new(0,Qe[e.type])(e):null,getById:e=>(t,n)=>{const{elements:o}=n();return Mn.get(o[e])},update:(e,t)=>({type:kn.UPDATE,payload:{values:(Array.isArray(e)?e:[e]).map((e=>({id:e,...t})))},undoable:!1}),delete:e=>(t,n)=>{const{elements:o,selected:r}=n(),s=bn(e?Array.isArray(e)?e:[e]:r,o);s.length&&(t(xn.remove(s)),t({type:kn.DELETE,payload:{ids:fn(s,o)},undoable:!1}))},getAbsolutePosition:e=>(t,n)=>{const{elements:o}=n();let r=o[e],s=new I(r.bounds.x,r.bounds.y);for(;r.owner;)r=o[r.owner],s=s.add(r.bounds.x,r.bounds.y);return s},getChildren:e=>(t,n)=>{const{elements:o}=n(),r=o[e];return r?J.isUMLContainer(r)?r.ownedElements.reduce(((e,n)=>[...e,...t(Mn.getChildren(n))]),[r]):[r]:[]}};var Tn,Pn,Sn;!function(e){e.START="@@element/connectable/START",e.END="@@element/connectable/END"}(Tn||(Tn={})),function(e){e.START="@@element/reconnectable/START",e.END="@@element/reconnectable/END",e.RECONNECT="@@element/reconnectable/RECONNECT"}(Pn||(Pn={})),function(e){e.LAYOUT="@@relationship/LAYOUT",e.WAYPOINTLAYOUT="@@relationship/WAYPOINTLAYOUT",e.STARTWAYPOINTSLAYOUT="@@relationship/waypoints/START",e.ENDWAYPOINTSLAYOUT="@@relationship/waypoints/END"}(Sn||(Sn={}));const Nn={get:e=>e&&Dt.isUMLRelationship(e)?new(0,yn[e.type])(e):null,getById:e=>(t,n)=>{const{elements:o}=n();return Nn.get(o[e])},getSupportedConnectionsForElements:e=>{const t=Array.isArray(e)?e:[e];return t.length>0?t.reduce(((e,t)=>{const n=Qe[t.type].supportedRelationships;return e.filter((e=>n.includes(e)))}),Qe[t[0].type].supportedRelationships):[]},layout:(e,t,n)=>({type:Sn.LAYOUT,payload:{id:e,path:t,bounds:n},undoable:!1}),layoutWaypoints:(e,t,n)=>({type:Sn.WAYPOINTLAYOUT,payload:{id:e,path:t,bounds:n},undoable:!1}),flip:e=>(t,n)=>{const{selected:o,elements:r}=n(),s=(e?Array.isArray(e)?e:[e]:o).map((e=>{const t=r[e],n={element:t.target.element,direction:t.target.direction},o={element:t.source.element,direction:t.source.direction};return{id:t.id,source:n,target:o}}));t({type:Pn.RECONNECT,payload:{connections:s},undoable:!0})},startWaypointsLayout:(e,t,n)=>o=>{const r=e?Array.isArray(e)?e:[e]:void 0;r&&!r.length||o({type:Sn.STARTWAYPOINTSLAYOUT,payload:{id:e,path:t,bounds:n},undoable:!1})},endWaypointsLayout:e=>t=>{e.length&&t({type:Sn.ENDWAYPOINTSLAYOUT,payload:{id:e},undoable:!1})}},Dn={startConnecting:(e,t)=>(n,o)=>{const r=t?Array.isArray(t)?t:[t]:o().selected.map((e=>n(Mn.getById(e)))).filter((e=>null!==e)).filter((e=>Qe[e.type].features.connectable)).map((e=>e.id)),s=Array.isArray(e)?e:[e];if(!r.length||1!==s.length&&s.length!==r.length)return;const i=r.map(((e,t)=>({element:e,direction:1===s.length?s[0]:s[t]})));n({type:Tn.START,payload:{ports:i},undoable:!1})},connect:(e,t)=>(n,o)=>{const r=t?Array.isArray(t)?t:[t]:o().connecting,s=Array.isArray(e)?e:[e];if(!s.length||1!==s.length&&s.length!==r.length)return;const i=[];for(const[e,t]of r.entries()){const n=1===s.length?s[0]:s[e];t.element===n.element&&t.direction===n.direction||i.push({source:t,target:n})}const l=i.map((e=>{const t=n(Mn.getById(e.source.element)),r=n(Mn.getById(e.target.element));let s;if(t&&r){const e=Nn.getSupportedConnectionsForElements([t,r]);s=e.length>0?e[0]:tt[o().diagram.type]}else s=tt[o().diagram.type];return new(0,yn[s])(e)}));i.length&&n(Mn.create(l)),t||n({type:Tn.END,payload:{ports:r},undoable:!1})},endConnecting:e=>(t,n)=>{const o=e?Array.isArray(e)?e:[e]:n().connecting;o.length&&t({type:Tn.END,payload:{ports:o},undoable:!1})}};var Ln;!function(e){e.HOVER="@@element/hoverable/HOVER",e.LEAVE="@@element/hoverable/LEAVE"}(Ln||(Ln={}));const An={hover:e=>({type:Ln.HOVER,payload:{ids:Array.isArray(e)?e:[e]},undoable:!1}),leave:e=>({type:Ln.LEAVE,payload:{ids:Array.isArray(e)?e:[e]},undoable:!1})};var On;!function(e){e.SELECT="@@element/interactable/SELECT",e.DESELECT="@@element/interactable/DESELECT"}(On||(On={}));const In={makeInteractive:e=>({type:On.SELECT,payload:{ids:[e]},undoable:!1}),unmakeInteractive:e=>({type:On.DESELECT,payload:{ids:[e]},undoable:!1})};var Bn,zn;!function(e){e.START="@@element/movable/START",e.END="@@element/movable/END"}(Bn||(Bn={})),function(e){e.MOVE="@@element/movable/MOVE"}(zn||(zn={}));const $n={startMoving:e=>(t,n)=>{const{elements:o,selected:r}=n(),s=e?Array.isArray(e)?e:[e]:bn(r,o),i=[],l={...Qe,...yn};for(const e of s)l[o[e].type].features.movable&&i.push(e);i.length&&(t(vn.bringToFront(s)),t({type:Bn.START,payload:{ids:i},undoable:!0}))},move:(e,t)=>(n,o)=>{const r=t?Array.isArray(t)?t:[t]:o().moving;r.length&&n({type:zn.MOVE,payload:{ids:r,delta:e},undoable:!1})},endMoving:(e,t=!1)=>(n,o)=>{const r=e?Array.isArray(e)?e:[e]:o().moving;r.length&&n({type:Bn.END,payload:{ids:r,keyboard:t},undoable:!1})}};var Fn,Un;!function(e){e.START="@@element/resizable/START",e.END="@@element/resizable/END"}(Fn||(Fn={})),function(e){e.RESIZE="@@element/resizable/RESIZE"}(Un||(Un={}));const Rn={startResizing:e=>(t,n)=>{const o=e?Array.isArray(e)?e:[e]:[];o.length&&t({type:Fn.START,payload:{ids:o},undoable:!0})},resize:(e,t,n)=>(o,r)=>{const s=n?Array.isArray(n)?n:[n]:[];s.length&&o({type:Un.RESIZE,payload:{ids:s,delta:e,resizeFrom:t},undoable:!1})},endResizing:e=>(t,n)=>{const o=e?Array.isArray(e)?e:[e]:[];o.length&&t({type:Fn.END,payload:{ids:o},undoable:!1})}};var jn,Hn,Wn,Vn,Gn;!function(e){e.SELECT="@@element/selectable/SELECT",e.DESELECT="@@element/selectable/DESELECT"}(jn||(jn={})),function(e){e.en="en",e.de="de"}(Hn||(Hn={})),function(e){e.Modelling="Modelling",e.Exporting="Exporting",e.Assessment="Assessment"}(Wn||(Wn={})),function(e){e.Modelling="Modelling",e.Exporting="Exporting",e.Highlight="Highlight"}(Vn||(Vn={})),function(e){e.CHANGE_VIEW="@@element/CHANGE_VIEW",e.SET_ZOOM_FACTOR="@@element/SET_ZOOM_FACTOR",e.SET_SELECTION_BOX="@@element/SET_SELECTION_BOX_ACTIVE"}(Gn||(Gn={}));const Yn={select:(e,t)=>(n,o)=>{const r=e?Array.isArray(e)?e:[e]:Object.keys(o().elements);return r.length||n({type:Gn.SET_SELECTION_BOX,payload:{selectionBoxActive:!1},undoable:!1}),n({type:jn.SELECT,payload:{ids:r,overwrite:t},undoable:!1})},deselect:e=>(t,n)=>{const o=e?Array.isArray(e)?e:[e]:n().selected;if(o.length)return t({type:jn.DESELECT,payload:{ids:o},undoable:!1})}};var Zn,_n;!function(e){e.SELECTION_CHANGE="@@element/remote-selection/CHANGE",e.PRUNE_SELECTORS="@@element/remote-selection/PRUNE_SELECTORS"}(Zn||(Zn={})),function(e){e.SELECT="@@element/remote-selection/SELECT",e.DESELECT="@@element/remote-selection/DESELECT"}(_n||(_n={}));const Xn={remoteSelectionChange:(e,t)=>({type:Zn.SELECTION_CHANGE,payload:{selector:e,changes:t},undoable:!1}),remoteSelect:(e,t)=>Xn.remoteSelectionChange(e,t.map((e=>({type:_n.SELECT,id:e})))),remoteDeselect:(e,t)=>Xn.remoteSelectionChange(e,t.map((e=>({type:_n.DESELECT,id:e})))),remoteSelectDeselect:(e,t,n)=>Xn.remoteSelectionChange(e,[...t.map((e=>({type:_n.SELECT,id:e}))),...n.map((e=>({type:_n.DESELECT,id:e})))]),pruneRemoteSelectors:e=>({type:Zn.PRUNE_SELECTORS,payload:{allowedSelectors:e},undoable:!1})};var qn;!function(e){e.START="@@element/updatable/START",e.END="@@element/updatable/END",e.ENDALL="@@element/updatable/ENDALL"}(qn||(qn={}));const Kn={updateStart:e=>(t,n)=>{if(n().updating.length)return null;t({type:qn.START,payload:{ids:Array.isArray(e)?e:[e]},undoable:!0})},updateEnd:e=>({type:qn.END,payload:{ids:Array.isArray(e)?e:[e]},undoable:!1}),updateEndAll:()=>({type:qn.ENDALL,payload:{},undoable:!1})},Jn={...Mn,...An,...Yn,...Xn,...$n,...Rn,...Dn,...In,...Kn};function Qn(e){return null!=e}const eo={startReconnecting:(e,t)=>(n,o)=>{const r=t?Array.isArray(t)?t:[t]:o().selected.map((e=>n(Nn.getById(e)))).filter((e=>null!==e&&Dt.isUMLRelationship(e))).map((e=>e.id));r.length&&n({type:Pn.START,payload:{ids:r,endpoint:e},undoable:!0})},reconnect:e=>(t,n)=>{const{reconnecting:o,elements:r}=n(),s=Object.keys(o).map((t=>{const n=r[t],s=o[t],i="source"===s?"target":"source",l={[s]:n[s],[i]:{...n[i],...e}};return l.source.element===l.target.element&&l.source.direction===l.target.direction?null:{id:t,...l}})).filter(Qn);s.length&&t({type:Pn.RECONNECT,payload:{connections:s},undoable:!1})},endReconnecting:e=>(t,n)=>{const o=e?Array.isArray(e)?e:[e]:Object.keys(n().reconnecting);o.length&&t({type:Pn.END,payload:{ids:o},undoable:!1})}},to={...Nn,...eo};function no(e){return e.type===et.CommunicationLink?{...e,messages:e.messages.reduce(((e,t)=>({...e,[t.id]:t})),{})}:e}function oo(e){return Object.entries(e).filter((([,e])=>e)).map((([e])=>e))}function ro(e){return e.reduce(((e,t)=>({...e,[t]:!0})),{})}class so{static fromModel(e){const t=function(e){return function(e){return e.version.startsWith("2.")}(e)?function(e){const t=Array.isArray(e.elements)?e.elements:[],n=Array.isArray(e.relationships)?e.relationships:[],o=Array.isArray(e.assessments)?e.assessments:[],r=e.interactive||{elements:[],relationships:[]};return{...e,version:"3.0.0",elements:t.reduce(((e,t)=>({...e,[t.id]:t})),{}),relationships:n.map(no).reduce(((e,t)=>({...e,[t.id]:t})),{}),assessments:o.reduce(((e,t)=>({...e,[t.modelElementId]:t})),{}),interactive:{elements:r.elements.reduce(((e,t)=>({...e,[t]:!0})),{}),relationships:r.relationships.reduce(((e,t)=>({...e,[t]:!0})),{})}}}(e):e}(e),n=t.elements,o=t.relationships,r=e=>{const t=new Qe[e.type],o=J.isUMLContainer(t)?Object.values(n).filter((t=>t.owner===e.id)).map((e=>{const t=n[e.owner];return{...e,bounds:{...e.bounds,x:e.bounds.x-t.bounds.x,y:e.bounds.y-t.bounds.y}}})):[];return t.deserialize(e,o),[t,...o.reduce(((e,t)=>[...e,...r(t)]),[])]},s=Object.values(n).filter((e=>!e.owner)).reduce(((e,t)=>[...e,...r(t)]),[]),i=Object.values(o).map((e=>{const t=new yn[e.type];return t.deserialize(e),t})),l=new Lt;return l.type=t.type,l.ownedRelationships=Object.values(t.relationships).map((e=>e.id)),{diagram:l,interactive:[...oo(t.interactive.elements),...oo(t.interactive.relationships)],elements:[...s,...i].reduce(((e,t)=>({...e,[t.id]:{...t}})),{}),assessments:(Object.values(t.assessments)||[]).reduce(((e,t)=>({...e,[t.modelElementId]:{score:t.score,feedback:t.feedback,label:t.label,labelColor:t.labelColor,correctionStatus:t.correctionStatus,dropInfo:t.dropInfo}})),{})}}static toModel(e){const t=Object.values(e.elements).map((e=>Jn.get(e))).reduce(((e,t)=>({...e,...t&&{[t.id]:t}})),{}),n=Object.values(e.elements).filter((e=>Dt.isUMLRelationship(e))).map((e=>to.get(e))),o=e=>{const n=J.isUMLContainer(e)?e.ownedElements.map((e=>t[e])):[],r={[e.id]:e.serialize(n)};for(const t of n){const n=o(t);Object.values(n).forEach((t=>{t.bounds.x+=e.bounds.x,t.bounds.y+=e.bounds.y})),Object.assign(r,n)}return r},r=Object.values(t).filter((e=>!e.owner)).reduce(((e,t)=>({...e,...o(t)})),{}),s=(Object.values(r),n.map((e=>e.serialize()))),i={elements:ro(e.interactive.filter((t=>R.isUMLElement(e.elements[t])))),relationships:ro(e.interactive.filter((t=>Dt.isUMLRelationship(e.elements[t]))))},l=Object.fromEntries(Object.entries(e.assessments).map((([t,n])=>[t,{modelElementId:t,elementType:e.elements[t].type,score:e.assessments[t].score,feedback:e.assessments[t].feedback,label:e.assessments[t].label,labelColor:e.assessments[t].labelColor,correctionStatus:e.assessments[t].correctionStatus,dropInfo:e.assessments[t].dropInfo}])));return{version:"3.0.0",type:e.diagram.type,size:{width:e.diagram.bounds.width,height:e.diagram.bounds.height},interactive:i,elements:r,relationships:Object.fromEntries(s.map((e=>[e.id,e]))),assessments:l}}}var io=n(9733),lo=n(961);const{Consumer:ao,Provider:co}=o.createContext({onDragStart:e=>new Promise(((e,t)=>t())),onDragEnd:e=>e=>{}});function ho(e){return function(t){return o.createElement(ao,null,(n=>o.createElement(e,{...t,...n})))}}const po=ho;class uo extends o.Component{componentDidMount(){(0,lo.findDOMNode)(this).addEventListener("pointerup",this.props.onDragEnd(this.props.owner))}componentWillUnmount(){(0,lo.findDOMNode)(this).removeEventListener("pointerup",this.props.onDragEnd(this.props.owner))}render(){return this.props.children}}const mo=po(uo);var go=n(1829);const{Consumer:yo,Provider:bo}=(0,o.createContext)(null),fo=e=>(0,o.forwardRef)(((t,n)=>o.createElement(yo,null,(r=>o.createElement(e,{ref:n,...t,...r}))))),Eo=(0,io.Ng)(((e,t)=>({ports:U(Jn.get(e.elements[t.port.element]))})),{end:Jn.endConnecting,getAbsolutePosition:Jn.getAbsolutePosition}),Co=It.polyline`
  stroke: ${e=>e.theme.color.primaryContrast};
  fill: 'none';
  pointer-events: 'none';
`;class vo extends o.Component{render(){const{port:e,ports:t}=this.props,{x:n,y:r}=this.props.getAbsolutePosition(e.element),s={...t[e.direction]},i=[new I(n+s.x,r+s.y),this.props.target].map((e=>`${e.x} ${e.y}`)).join(", ");return o.createElement(Co,{points:i,"pointer-events":"none",stroke:"black",fill:"none",strokeDasharray:"5,5"})}}const wo=Eo(vo);var xo=n(5574),ko=n.n(xo);const Mo=(0,go.Zz)(fo,(0,io.Ng)((e=>({connecting:[...e.connecting,...Object.keys(e.reconnecting).map((t=>e.elements[t][e.reconnecting[t]]))],zoomFactor:e.editor.zoomFactor})),{endConnecting:Jn.endConnecting,endReconnecting:to.endReconnecting})),To={position:null};class Po extends o.Component{constructor(){super(...arguments),this.state=To,this.onPointerMove=e=>{const{zoomFactor:t=1}=this.props,n=this.props.canvas.origin();let o;o=e instanceof PointerEvent?new I(e.clientX-n.x,e.clientY-n.y).scale(1/t):new I(e.targetTouches[0].clientX-n.x,e.targetTouches[0].clientY-n.y).scale(1/t),this.setState({position:o})},this.onPointerUp=e=>{ko()({tablet:!0})?document.removeEventListener("touchend",this.onPointerMove):document.removeEventListener("pointermove",this.onPointerMove),this.setState(To),this.props.endConnecting(),this.props.endReconnecting()}}componentDidUpdate(e){this.props.connecting.length&&e.connecting!==this.props.connecting&&(ko()({tablet:!0})?(document.addEventListener("touchmove",this.onPointerMove),document.addEventListener("touchend",this.onPointerUp,{once:!0})):(document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp,{once:!0})))}componentWillUnmount(){ko()({tablet:!0})?(document.removeEventListener("touchmove",this.onPointerMove),document.removeEventListener("touchend",this.onPointerUp)):(document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp))}render(){const{connecting:e}=this.props,{position:t}=this.state;return e.length&&t?e.map(((e,n)=>o.createElement(wo,{key:n,port:e,target:t}))):null}}const So=Mo(Po);class No{constructor(e=[new I,new I]){this.path=e}get length(){return this.path.map((e=>new I(e.x,e.y))).reduce(((e,t,n,o)=>n+1<o.length?e+o[n+1].subtract(t).length:e),0)}position(e=0){for(let t=0;t<this.path.length-1;t++){const n=new I(this.path[t+1].x,this.path[t+1].y),o=new I(this.path[t].x,this.path[t].y),r=n.subtract(o);if(r.length>e){const t=r.normalize();return o.add(t.scale(e))}e-=r.length}return new I}}const Do=It.svg`
  height: 1em;
  vertical-align: middle;
  width: 1em;
`,Lo=e=>o.createElement(Do,{width:"16px",height:"16px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",...e}),Ao=e=>o.createElement(Lo,{viewBox:"0 0 192 512",...e},o.createElement("path",{d:"M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"})),Oo=It.circle.attrs((e=>({r:16,fillOpacity:.8,fill:e.theme.color.gray})))``,Io=It.polygon.attrs((e=>({points:"-10,8 0,-10 10,8",fill:e.theme.color.warningYellow})))``,Bo={x:-12,y:-12,width:24,height:24},zo=It((e=>o.createElement(Lo,{viewBox:"0 0 512 512",...e},o.createElement("path",{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"})))).attrs(Bo)`
  fill: green;
`,$o=It((e=>o.createElement(Lo,{viewBox:"0 0 352 512",...e},o.createElement("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})))).attrs(Bo)`
  fill: red;
`,Fo=It(Ao).attrs(Bo)`
  fill: blue;
`,Uo=It(Ao).attrs({x:-6,y:-5,width:12,height:12})`
  fill: black;
`;var Ro;!function(e){e.ASSESS="@@element/ASSESS",e.DELETE="@@assessment/DELETE"}(Ro||(Ro={}));class jo{}jo.assess=(e,t,n)=>{const o={...t};return"DROPPED"!==n&&o.dropInfo&&delete o.dropInfo,{type:Ro.ASSESS,payload:{element:e,assessment:o},undoable:!1}},jo.delete=e=>({type:Ro.DELETE,payload:{element:e},undoable:!1}),jo.getById=e=>t=>e[t]||null;const Ho=(0,io.Ng)(((e,t)=>{const n=e.elements[t.id];return{assessment:e.assessments[t.id],bounds:n.bounds,path:Dt.isUMLRelationship(n)?n.path:void 0,readonly:e.editor.readonly}}),{select:Jn.select,deselect:Jn.deselect,assess:jo.assess,updateStart:Jn.updateStart}),Wo=e=>{class t extends o.Component{constructor(){super(...arguments),this.onDragOver=e=>{e.preventDefault(),e.stopPropagation(),this.props.select(this.props.id)},this.onDragLeave=()=>{this.props.deselect(this.props.id)},this.onDrop=e=>{if(e.preventDefault(),this.props.deselect(this.props.id),e.stopPropagation(),e.dataTransfer){const t=e.dataTransfer.getData("text/plain");if(!t)return void console.warn("Could not get artemis sgi element from drop element");let n;try{n=JSON.parse(t)}catch(e){return void console.error("Could not parse artemis sgi",e)}const o="Do you want to remove the link to the assessment instruction?",r="Assessment Instruction: "+n.instructionDescription,s="This feedback is associated with the assessment instruction. You can provide additional feedback for this submission element. Student will see combined feedback during the review.",{id:i,assessment:l}=this.props,a=n.credits,c={instruction:n,removeMessage:o,tooltipMessage:r,feedbackHint:s};this.props.assess(i,{...l,score:a,dropInfo:c},"DROPPED"),this.props.updateStart(i)}}}componentDidMount(){if(!this.props.readonly){const e=(0,lo.findDOMNode)(this);e.addEventListener("dragover",this.onDragOver.bind(this)),e.addEventListener("dragleave",this.onDragLeave.bind(this)),e.addEventListener("drop",this.onDrop.bind(this))}}componentWillUnmount(){const e=(0,lo.findDOMNode)(this);e.removeEventListener("dragover",this.onDragOver),e.removeEventListener("dragleave",this.onDragLeave),e.removeEventListener("drop",this.onDrop)}render(){const{assessment:t,assess:n,select:r,deselect:s,updateStart:i,bounds:l,path:a,readonly:c,...d}=this.props;let h,p;if(a){const e=new No(a);h=e.position(e.length/2),p=e.position(e.length/2-48)}else h=new I(l.width,0),p=new I(h.x-48,h.y);return o.createElement(e,{...d},t&&t.correctionStatus&&"INCORRECT"===t.correctionStatus.status&&o.createElement("g",{transform:`translate(${p.x} ${p.y})`,pointerEvents:"none"},o.createElement(o.Fragment,null,o.createElement(Oo,null),o.createElement(Io,null),o.createElement(Uo,null))),t&&o.createElement("g",{transform:`translate(${h.x} ${h.y})`,pointerEvents:"none"},0===t.score&&!!t.feedback&&o.createElement(o.Fragment,null,o.createElement(Oo,null),o.createElement(Fo,null)),t.score>0&&o.createElement(o.Fragment,null,o.createElement(Oo,null),o.createElement(zo,null)),t.score<0&&o.createElement(o.Fragment,null,o.createElement(Oo,null),o.createElement($o,null))))}}return Ho(t)},Vo=({children:e,fill:t,x:n="50%",y:r="50%",dominantBaseline:s="middle",textAnchor:i="middle",fontWeight:l="bold",pointerEvents:a="none",noX:c=!1,noY:d=!1,...h})=>{const p={};return c||(p.x=n),d||(p.y=r),o.createElement("text",{...p,style:t?{fill:t}:{},dominantBaseline:s,textAnchor:i,fontWeight:l,pointerEvents:a,...h},e)},Go=({element:e,children:t,fillColor:n})=>o.createElement("g",null,o.createElement(jt,{fillColor:n||e.fillColor,strokeColor:"none",width:"100%",height:e.stereotype?50:40}),o.createElement(jt,{y:e.stereotype?50:40,width:"100%",height:e.bounds.height-(e.stereotype?50:40),strokeColor:"none"}),e.stereotype?o.createElement("svg",{height:50},o.createElement(Vo,{fill:e.textColor},o.createElement("tspan",{x:"50%",dy:-8,textAnchor:"middle",fontSize:"85%"},`«${e.stereotype}»`),o.createElement("tspan",{x:"50%",dy:18,textAnchor:"middle",fontStyle:e.italic?"italic":void 0,textDecoration:e.underline?"underline":void 0},e.name))):o.createElement("svg",{height:40},o.createElement(Vo,{fill:e.textColor,fontStyle:e.italic?"italic":void 0,textDecoration:e.underline?"underline":void 0},e.name)),t,o.createElement(jt,{width:"100%",height:"100%",strokeColor:e.strokeColor,fillColor:"none","pointer-events":"none"}),e.hasAttributes&&o.createElement(Ut,{d:`M 0 ${e.headerHeight} H ${e.bounds.width}`,strokeColor:e.strokeColor}),e.hasMethods&&o.createElement(Ut,{d:`M 0 ${e.deviderPosition} H ${e.bounds.width}`,strokeColor:e.strokeColor})),Yo=({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(jt,{fillColor:t||e.fillColor,strokeColor:"none",width:"100%",height:"100%"}),o.createElement(Vo,{x:10,fill:e.textColor,fontWeight:"normal",textAnchor:"start"},e.name)),Zo=Object.freeze({x:0,y:0,dx:0,dy:0,angle:0,width:void 0,height:void 0,lineHeight:16,capHeight:11,scaleToFit:!1,textAnchor:"middle",verticalAnchor:"middle"});class _o extends o.Component{constructor(){var e;super(...arguments),this.state={wordsByLines:[{words:(e=this.props).children?e.children.toString().split(/\s+/):[],width:0}]},this.spaceWidth=0,this.wordsWithComputedWidth=[],this.shouldCalculateWidth=e=>e.children!==this.props.children||e.style!==this.props.style||e.width!==this.props.width||e.height!==this.props.height,this.calculateWordWidths=e=>{try{return{wordsWithComputedWidth:(e.children?e.children.toString().split(/\s+/):[]).map((t=>({word:t,width:this.getStringWidth(t,e.style)}))),spaceWidth:this.getStringWidth(" ",e.style)}}catch(e){return null}}}componentDidMount(){this.updateWordsByLines(this.props,!0)}componentDidUpdate(e){const t=this.shouldCalculateWidth(e);t&&this.updateWordsByLines(this.props,t)}getStringWidth(e,t){try{const n=document.createElement("div");return n.innerHTML=e,Object.assign(n.style,t),this.calculateStringWidth(n,(e=>e.clientWidth+2))}catch(e){return 0}}calculateStringWidth(e,t){e.style.visibility="hidden",e.style.position="absolute",document.body.appendChild(e);const n=t(e);return e.parentNode.removeChild(e),n}updateWordsByLines(e,t){if(e.width||e.scaleToFit){if(t){const t=this.calculateWordWidths(e);if(!t)return void this.updateWordsWithoutCalculate(e);{const{wordsWithComputedWidth:e,spaceWidth:n}=t;this.wordsWithComputedWidth=e,this.spaceWidth=n}}const n=this.calculateWordsByLines(this.wordsWithComputedWidth,this.spaceWidth,e.width);this.setState({wordsByLines:n})}else this.updateWordsWithoutCalculate(e)}updateWordsWithoutCalculate(e){const t=e.children?e.children.toString().split(/\s+/):[];this.setState({wordsByLines:[{words:t,width:0}]})}calculateWordsByLines(e,t,n){const{scaleToFit:o}=this.props;return e.reduce(((e,{word:r,width:s})=>{const i=e[e.length-1];if(i&&(!n||o||i.width+s+t<n))i.words.push(r),i.width+=s+t;else{const t={words:[r],width:s};e.push(t)}return e}),[])}render(){const{x:e,y:t,dx:n,dy:r,textAnchor:s,verticalAnchor:i,scaleToFit:l,angle:a,lineHeight:c,capHeight:d,fill:h,...p}=this.props,{wordsByLines:u}=this.state,m=e+n,g=t+r;let y;switch(i){case"start":y=d;break;case"middle":y=(u.length-1)/2*-c+d/2;break;default:y=u.length-1*-c}const b=[];if(l&&u.length){const e=u[0].width,t=(this.props.width||0)/e,n=t,o=m-t*m,r=g-n*g;b.push(`matrix(${t}, 0, 0, ${n}, ${o}, ${r})`)}return a&&b.push(`rotate(${a}, ${m}, ${g})`),b.length&&(p.transform=b.join(" ")),o.createElement("text",{style:h?{fill:h}:{},x:m,y:g,textAnchor:s,...p,pointerEvents:"none"},u.map(((e,t)=>o.createElement("tspan",{x:m,dy:0===t?y:c,key:t},e.words.join(" ")))))}}_o.defaultProps=Zo;const Xo=(0,go.Zz)(Ot.SL,(0,io.Ng)(((e,t)=>({interactive:e.interactive.includes(t.element.id),interactable:e.editor.view===Vn.Exporting||e.editor.view===Vn.Highlight}))))((({element:e,interactive:t,interactable:n,theme:r})=>o.createElement("g",null,o.createElement(Wt,{cx:"50%",cy:"50%",r:Math.min(e.bounds.width,e.bounds.height)/2-2.5,strokeColor:n&&t?r.interactive.normal:e.fillColor,strokeWidth:5}),o.createElement(Vt,{cx:"50%",cy:"50%",r:Math.min(e.bounds.width,e.bounds.height)/2-7.5,strokeColor:"none",fillColor:t&&n?r.interactive.normal:e.fillColor,fillOpacity:1})))),qo=(0,go.Zz)(Ot.SL,(0,io.Ng)(((e,t)=>({interactive:e.interactive.includes(t.element.id),interactable:e.editor.view===Vn.Exporting||e.editor.view===Vn.Highlight}))))((({element:e,interactive:t,interactable:n,theme:r})=>o.createElement("g",null,o.createElement(Ht,{width:e.bounds.width,height:e.bounds.height,strokeColor:"none",fillColor:t&&n?r.interactive.normal:e.fillColor,fillOpacity:1})))),Ko=(0,go.Zz)(Ot.SL,(0,io.Ng)(((e,t)=>({interactive:e.interactive.includes(t.element.id),interactable:e.editor.view===Vn.Exporting||e.editor.view===Vn.Highlight}))))((({element:e,interactive:t,interactable:n,theme:r})=>o.createElement("g",null,o.createElement(Ht,{width:e.bounds.width,height:e.bounds.height,strokeColor:"none",fillColor:t&&n?r.interactive.normal:e.fillColor,fillOpacity:1})))),Jo=(0,go.Zz)(Ot.SL,(0,io.Ng)(((e,t)=>({interactive:e.interactive.includes(t.element.id),interactable:e.editor.view===Vn.Exporting||e.editor.view===Vn.Highlight}))))((({element:e,interactive:t,interactable:n,theme:r})=>o.createElement("g",null,o.createElement(Vt,{cx:"50%",cy:"50%",r:Math.min(e.bounds.width,e.bounds.height)/2,strokeColor:"none",fillColor:t&&n?r.interactive.normal:e.fillColor,fillOpacity:1})))),Qo=({x:e,y:t,fill:n,textCentered:r=!1,messages:s,directionIcon:i})=>{const l=r?{textAnchor:"middle"}:{};return o.createElement(Vo,{x:e,y:t,fontSize:"85%",textAnchor:"start",dominantBaseline:"auto",fontWeight:"normal",fill:n},o.createElement("tspan",{fontWeight:"bold",fontSize:"120%",...l},s.length?i:""),s.map(((e,t)=>o.createElement("tspan",{key:t,x:e.bounds.x,y:e.bounds.y},e.name))))},er=({id:e,color:t,d:n})=>o.createElement("g",null,o.createElement("marker",{id:`marker-${e}`,viewBox:"0 0 30 30",markerWidth:"22",markerHeight:"30",refX:"30",refY:"15",orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:"M0,29 L30,15 L0,1",fillColor:"none",strokeColor:t})),o.createElement(Ut,{d:n,strokeDasharray:7,markerEnd:`url(#marker-${e})`,strokeColor:t})),tr=({id:e,color:t,d:n})=>o.createElement("g",null,o.createElement("marker",{id:`marker-${e}`,viewBox:"0 0 30 30",markerWidth:"22",markerHeight:"30",refX:"30",refY:"15",orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:"M0,29 L30,15 L0,1",fillColor:"none",strokeColor:t})),o.createElement(Ut,{d:n,strokeColor:t,strokeDasharray:7,markerEnd:`url(#marker-${e})`})),nr=({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(Wt,{cx:"50%",cy:"50%",r:10,strokeColor:e.strokeColor,strokeWidth:2,fillColor:t||e.fillColor}),o.createElement(Vo,{x:25,noY:!0,dominantBaseline:"auto",textAnchor:"start",fill:e.textColor},e.name)),or=({element:e})=>o.createElement("g",null,o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none"})),rr=(0,io.Ng)(((e,t)=>{const n=e.diagram.ownedRelationships.map((t=>e.elements[t])).filter((e=>ln.isUMLInterfaceRequired(e))).map((e=>e));return{hasOppositeRequiredInterface:n.filter((e=>e.id!==t.element.id)).some((e=>e.target.element===t.element.target.element&&e.target.direction.valueOf()===F(t.element.target.direction).valueOf())),currentRequiredInterfaces:n.filter((e=>e.target.element===t.element.target.element)),currentAllInterfaces:e.diagram.ownedRelationships.map((t=>e.elements[t])).filter((e=>e.target.element===t.element.target.element))}}),{})((e=>{const{element:t,hasOppositeRequiredInterface:n,currentRequiredInterfaces:r,currentAllInterfaces:s}=e;let i;switch(t.target.direction){case z.Up:i=new I(0,-3);break;case z.Down:i=new I(0,3);break;case z.Right:i=new I(3,0);break;case z.Left:i=new I(-3,0)}return o.createElement("g",null,o.createElement("marker",{id:`marker-${t.id}`,viewBox:"0 0 27 27",markerWidth:27,markerHeight:27,refX:"0",refY:"0",orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:(()=>{let e="";switch(r.length){case 1:e=s.length===r.length?sn.Semicircle:sn.Threequarterscircle;break;case 2:e=n?sn.Threequarterscircle:sn.Quartercircle;break;default:e=sn.Quartercircle}return e})(),fillColor:"none",strokeColor:t.strokeColor,strokeWidth:2})),o.createElement(Ft,{points:t.path.map(((e,n)=>(n===t.path.length-1&&(e=new I(e.x,e.y).add(i)),`${e.x} ${e.y}`))).join(","),strokeColor:t.strokeColor,fillColor:"none",strokeWidth:1,markerEnd:`url(#marker-${t.id})`}))})),sr=({element:e})=>o.createElement("g",null,o.createElement("marker",{id:`marker-${e.id}`,viewBox:"0 0 30 30",markerWidth:"22",markerHeight:"30",refX:"30",refY:"15",orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:"M0,29 L30,15 L0,1",fillColor:"none",strokeColor:e.strokeColor})),o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1,strokeDasharray:7,markerEnd:`url(#marker-${e.id})`})),ir=(e,t)=>e<=2?t/2:t/(1+1/Math.sin(Math.PI/e)),lr=({element:e,children:t,fillColor:n})=>o.createElement("g",{"data-cy":"uml-component"},o.createElement(jt,{width:"100%",height:"100%",strokeColor:e.strokeColor,fillColor:n||e.fillColor}),o.createElement("g",{transform:`translate(${e.bounds.width-31}, 7)`},o.createElement(Ut,{d:"M 4.8 0 L 24 0 L 24 24 L 4.8 24 L 4.8 19.2 L 0 19.2 L 0 14.4 L 4.8 14.4 L 4.8 9.6 L 0 9.6 L 0 4.8 L 4.8 4.8 Z",fillColor:n||e.fillColor,strokeColor:e.strokeColor,strokeWidth:"1.2",strokeMiterlimit:"10"}),o.createElement(Ut,{d:"M 4.8 4.8 L 9.6 4.8 L 9.6 9.6 L 4.8 9.6 M 4.8 14.4 L 9.6 14.4 L 9.6 19.2 L 4.8 19.2",fillColor:"none",strokeColor:e.strokeColor,strokeWidth:"1.2",strokeMiterlimit:"10"})),o.createElement(Vo,{fill:e.textColor},e.stereotype&&e.displayStereotype&&o.createElement("tspan",{x:"50%",dy:-8,textAnchor:"middle",fontSize:"85%"},`«${e.stereotype}»`),o.createElement("tspan",{x:"50%",dy:e.stereotype&&e.displayStereotype?18:0,textAnchor:"middle"},e.name)),t),ar=({element:e,children:t})=>o.createElement("g",null,t,o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:e.textColor,lineHeight:16,capHeight:11},e.name)),cr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(Ft,{points:"0 3, 0 17, 20 17, 20 3, 10 11, 0 3, 20 3",strokeLinecap:"round",strokeLinejoin:"round",fillColor:"transparent"})),dr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(Ft,{points:"0.2 3, 19.8 3, 10 11, 0.2 3",strokeLinecap:"round",strokeLinejoin:"round",fillColor:"currentColor"}),o.createElement(Ft,{points:"0 5.5, 0 17, 20 17, 20 5.5, 10 13.5, 0 5.5",strokeLinecap:"round",strokeLinejoin:"round",fillColor:"currentColor"})),hr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(jt,{height:16,width:16,x:2,y:2,strokeLinejoin:"round",fillColor:"transparent"}),o.createElement(Ft,{points:"6 6, 12 6",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement(Ft,{points:"6 10, 14 10",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement(Ft,{points:"6 14, 10 14",strokeLinecap:"round",strokeLinejoin:"round"})),pr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(jt,{height:16,width:16,x:2,y:2,strokeLinejoin:"round",fillColor:"transparent"}),o.createElement(jt,{height:4,width:16,x:2,y:2,strokeLinejoin:"round",fillColor:"currentColor"}),o.createElement(Ft,{points:"2 10, 18 10",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement(Ft,{points:"2 14, 18 14",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement(Ft,{points:"6 2, 6 18",strokeLinecap:"round",strokeLinejoin:"round"})),ur=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(Ut,{d:"M5 1.5C5 2.5 5 8 5 8M5 1.5C5 0.499993 7 0.500007 7 1.5M5 1.5C5 1.5 5 4.00001 5 3.00001C5 2 3 1.93337 3 3.00001C3 4.06664 3 10 3 10C3 10 3 8.25001 3 7.25001C3 6.25 1 6.25 1 7.25001C1 8.25001 1 12 1 12L3 14V16H9V14L11 12V8.56252C11 8.56252 11 5 11 4C11 3 9 3 9 4C9 5 9 3.00001 9 3.00001M7 1.5C7 2.49999 7 8 7 8M7 1.5C7 1.5 7 4.00001 7 3.00001C7 2.00001 9 2.00001 9 3.00001M9 3.00001V8",strokeLinejoin:"round",fillColor:"transparent"})),mr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(Wt,{cx:"10",cy:"4",r:4,fillColor:"transparent"}),o.createElement(Ft,{points:"4 16, 4 11, 16 11, 16 16",fillColor:"transparent"})),gr=e=>o.createElement("svg",{...e,height:14,width:14},o.createElement(Ft,{points:"3 3, 11 3",strokeLinecap:"round",strokeLinejoin:"round",strokeColor:e.stroke,fillColor:"currentColor"}),o.createElement(Ft,{points:"3 7, 11 7",strokeLinecap:"round",strokeLinejoin:"round",strokeColor:e.stroke,fillColor:"currentColor"}),o.createElement(Ft,{points:"3 11, 11 11",strokeLinecap:"round",strokeLinejoin:"round",strokeColor:e.stroke,fillColor:"currentColor"})),yr=e=>o.createElement("svg",{...e,height:14,width:14},o.createElement(Ut,{d:"M7,3 A 4 4 30 1 1 3.535 5",strokeColor:e.stroke,fillColor:"transparent",strokeLinejoin:"round",strokeLinecap:"round"}),o.createElement(Ut,{d:"M9.5,1.5 L7,3 L8,6",strokeColor:e.stroke,fillColor:"transparent",strokeLinejoin:"round",strokeLinecap:"round"})),br=e=>o.createElement("svg",{...e,height:14,width:14},o.createElement(Ft,{points:"3 3, 3 11",strokeLinecap:"round",strokeLinejoin:"round",strokeColor:e.stroke,fillColor:"currentColor"}),o.createElement(Ft,{points:"7 3, 7 11",strokeLinecap:"round",strokeLinejoin:"round",strokeColor:e.stroke,fillColor:"currentColor"}),o.createElement(Ft,{points:"11 3, 11 11",strokeLinecap:"round",strokeLinejoin:"round",strokeColor:e.stroke,fillColor:"currentColor"})),fr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(Wt,{cx:"50%",cy:"50%",r:10,fillColor:"transparent"}),o.createElement(Ft,{points:"10 4, 10 10, 13 13",strokeLinecap:"round",strokeLinejoin:"round"})),Er=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(Ft,{points:"10 3, 3 15, 17 15, 10 3",strokeLinecap:"round",strokeLinejoin:"round",fillColor:"transparent"})),Cr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(jt,{height:16,width:16,x:2,y:2,strokeLinejoin:"round",fillColor:"transparent"}),o.createElement(Ft,{points:"6 7, 14 7",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement(Ft,{points:"6 13, 14 13",strokeLinecap:"round",strokeLinejoin:"round"})),vr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(Ft,{points:"10 3, 4 15, 10 12, 16 15, 10 3",strokeLinecap:"round",strokeLinejoin:"round",fillColor:"currentColor",fillRule:"evenodd"})),wr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(Ft,{points:"3 7, 13 7, 13 4, 18 10, 13 16, 13 13, 3 13, 3 7",strokeLinecap:"round",strokeLinejoin:"round",fillColor:"transparent"})),xr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(Ft,{points:"3 7, 13 7, 13 4, 18 10, 13 16, 13 13, 3 13, 3 7",strokeLinecap:"round",strokeLinejoin:"round",fillColor:"currentColor",fillRule:"evenodd"})),kr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(Ft,{points:"3 10, 9 6, 9 14, 3 10",strokeLinecap:"round",strokeLinejoin:"round",fillColor:"currentColor",fillRule:"evenodd"}),o.createElement(Ft,{points:"10 10, 16 6, 16 14, 10 10",strokeLinecap:"round",strokeLinejoin:"round",fillColor:"currentColor",fillRule:"evenodd"})),Mr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(Ft,{points:"10 3, 3 15, 17 15, 10 3",strokeLinecap:"round",strokeLinejoin:"round",fillColor:"currentColor",fillRule:"evenodd"})),Tr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(Wt,{cx:"50%",cy:"50%",r:10,fillColor:"currentColor"})),Pr=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement(Ft,{points:"3 16, 6 4, 13 11, 17 4, 14 16, 7 10, 3 16",strokeLinecap:"round",strokeLinejoin:"round",fillColor:"currentColor"})),Sr=({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(Ft,{points:`${e.bounds.width/2} 0, ${e.bounds.width} ${e.bounds.height/2}, ${e.bounds.width/2} ${e.bounds.height}, 0 ${e.bounds.height/2}, ${e.bounds.width/2} 0`,strokeColor:e.strokeColor,fillColor:t||e.fillColor}),o.createElement(Wt,{cx:e.bounds.width/2,cy:e.bounds.height/2,r:Math.min(e.bounds.width,e.bounds.height)/2-9,strokeColor:e.strokeColor,fillColor:"transparent"}),o.createElement(Wt,{cx:e.bounds.width/2,cy:e.bounds.height/2,r:Math.min(e.bounds.width,e.bounds.height)/2-12,strokeColor:e.strokeColor,fillColor:"transparent"}),o.createElement(Ut,{d:[`M${e.bounds.width/2}, ${e.bounds.height/2-4}`,`L${e.bounds.width/2+3.5}, ${e.bounds.height/2-1}`,`L${e.bounds.width/2+2} ${e.bounds.height/2+3.5}`,`L${e.bounds.width/2-2} ${e.bounds.height/2+3.5}`,`L${e.bounds.width/2-3.5} ${e.bounds.height/2-1}`,`L${e.bounds.width/2} ${e.bounds.height/2-4}`].join(" ")+" z",strokeColor:e.strokeColor,fillColor:"transparent"}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height+20,width:e.bounds.width,height:e.bounds.height,fill:e.textColor,lineHeight:16,capHeight:11,verticalAnchor:"start"},e.name)),Nr=({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(Ft,{points:`${e.bounds.width/2} 0, ${e.bounds.width} ${e.bounds.height/2}, ${e.bounds.width/2} ${e.bounds.height}, 0 ${e.bounds.height/2}, ${e.bounds.width/2} 0`,strokeColor:e.strokeColor,fillColor:t||e.fillColor}),o.createElement(Ft,{points:`13 13, ${e.bounds.width-13} ${e.bounds.height-13}`,strokeColor:e.strokeColor,fillColor:"transparent"}),o.createElement(Ft,{points:`13 ${e.bounds.height-13}, ${e.bounds.width-13} 13`,strokeColor:e.strokeColor,fillColor:"transparent"}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height+20,width:2*e.bounds.width,height:e.bounds.height,fill:e.textColor,lineHeight:16,capHeight:11,verticalAnchor:"start"},e.name)),Dr=({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(Ft,{points:`${e.bounds.width/2} 0, ${e.bounds.width} ${e.bounds.height/2}, ${e.bounds.width/2} ${e.bounds.height}, 0 ${e.bounds.height/2}, ${e.bounds.width/2} 0`,strokeColor:e.strokeColor,fillColor:t||e.fillColor}),o.createElement(Wt,{cx:e.bounds.width/2,cy:e.bounds.height/2,r:Math.min(e.bounds.width,e.bounds.height)/2-12,strokeColor:e.strokeColor,fillColor:"transparent"}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height+20,width:2*e.bounds.width,height:e.bounds.height,fill:e.textColor,lineHeight:16,capHeight:11,verticalAnchor:"start"},e.name)),Lr=({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(Ft,{points:`${e.bounds.width/2} 0, ${e.bounds.width} ${e.bounds.height/2}, ${e.bounds.width/2} ${e.bounds.height}, 0 ${e.bounds.height/2}, ${e.bounds.width/2} 0`,strokeColor:e.strokeColor,fillColor:t||e.fillColor}),o.createElement(Ft,{points:`${e.bounds.width/2} 10, ${e.bounds.width/2} ${e.bounds.height-10}`,strokeColor:e.strokeColor,fillColor:"transparent"}),o.createElement(Ft,{points:`10 ${e.bounds.height/2}, ${e.bounds.width-10} ${e.bounds.height/2}`,strokeColor:e.strokeColor,fillColor:"transparent"}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height+20,width:2*e.bounds.width,height:e.bounds.height,fill:e.textColor,lineHeight:16,capHeight:11,verticalAnchor:"start"},e.name)),Ar=({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(Ft,{points:`${e.bounds.width/2} 0, ${e.bounds.width} ${e.bounds.height/2}, ${e.bounds.width/2} ${e.bounds.height}, 0 ${e.bounds.height/2}, ${e.bounds.width/2} 0`,strokeColor:e.strokeColor,fillColor:t||e.fillColor}),o.createElement(Ft,{points:`13 13, ${e.bounds.width-13} ${e.bounds.height-13}`,strokeColor:e.strokeColor,fillColor:"transparent"}),o.createElement(Ft,{points:`13 ${e.bounds.height-13}, ${e.bounds.width-13} 13`,strokeColor:e.strokeColor,fillColor:"transparent"}),o.createElement(Ft,{points:`${e.bounds.width/2} 10, ${e.bounds.width/2} ${e.bounds.height-10}`,strokeColor:e.strokeColor,fillColor:"transparent"}),o.createElement(Ft,{points:`10 ${e.bounds.height/2}, ${e.bounds.width-10} ${e.bounds.height/2}`,strokeColor:e.strokeColor,fillColor:"transparent"}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height+20,width:2*e.bounds.width,height:e.bounds.height,fill:e.textColor,lineHeight:16,capHeight:11,verticalAnchor:"start"},e.name)),Or=(0,go.Zz)(Ot.SL,(0,io.Ng)(((e,t)=>({hovered:e.hovered.includes(t.element.id),interactive:e.interactive.includes(t.element.id),interactable:e.editor.view===Vn.Exporting||e.editor.view===Vn.Highlight}))))((({element:e,strokeColor:t,textColor:n,interactive:r,interactable:s,hovered:i,theme:l})=>o.createElement("g",null,o.createElement(jt,{rx:10,ry:10,width:e.bounds.width,height:e.bounds.height,strokeColor:"transparent",fillColor:s&&r?l.interactive.normal:s&&i?l.interactive.hovered:"transparent"}),o.createElement(Ut,{d:`M20,0 L10,0 A 10 10 280 0 0 0 10 L0,${e.bounds.height-10} A 10 10 180 0 0 10 ${e.bounds.height} L20, ${e.bounds.height}`,strokeColor:t||e.strokeColor,fillColor:"transparent"}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:n||e.textColor,lineHeight:16,capHeight:11},e.name)))),Ir=(0,go.Zz)(Ot.SL,(0,io.Ng)(((e,t)=>({hovered:e.hovered.includes(t.element.id),interactive:e.interactive.includes(t.element.id),interactable:e.editor.view===Vn.Exporting||e.editor.view===Vn.Highlight}))))((({element:e,strokeColor:t,textColor:n,children:r,interactive:s,interactable:i,hovered:l,theme:a})=>o.createElement("g",null,o.createElement(jt,{rx:10,ry:10,width:"100%",height:"100%",strokeColor:t||e.strokeColor,fillColor:i&&s?a.interactive.normal:i&&l?a.interactive.hovered:"transparent",strokeDasharray:"4"}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:n||e.textColor,lineHeight:16,capHeight:11},e.name),r))),Br={[L.Package]:({element:e,children:t,fillColor:n})=>o.createElement("g",null,o.createElement(Ut,{d:"M 0 10 V 0 H 40 V 10",strokeColor:e.strokeColor,fillColor:n||e.fillColor}),o.createElement(jt,{y:10,width:"100%",height:e.bounds.height-10,strokeColor:e.strokeColor,fillColor:n||e.fillColor}),o.createElement("text",{x:"50%",y:20,dy:10,textAnchor:"middle",fontWeight:"bold",pointerEvents:"none",style:e.textColor?{fill:e.textColor}:{}},e.name),t),[L.Class]:Go,[L.AbstractClass]:Go,[L.Interface]:Go,[L.Enumeration]:Go,[L.ClassAttribute]:Yo,[L.ClassMethod]:Yo,[L.ObjectName]:Go,[L.ObjectAttribute]:Yo,[L.ObjectMethod]:Yo,[L.Activity]:({element:e,children:t,fillColor:n})=>o.createElement("g",null,o.createElement(jt,{rx:10,ry:10,width:"100%",height:"100%",strokeColor:e.strokeColor,fillColor:n||e.fillColor}),o.createElement(Vo,{y:20,fill:e.textColor},e.name),t),[L.ActivityActionNode]:({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(jt,{rx:10,ry:10,width:"100%",height:"100%",strokeColor:e.strokeColor,fillColor:t||e.fillColor}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:e.textColor},e.name)),[L.ActivityFinalNode]:Xo,[L.ActivityForkNode]:qo,[L.ActivityForkNodeHorizontal]:Ko,[L.ActivityInitialNode]:Jo,[L.ActivityMergeNode]:({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(Ft,{points:`${e.bounds.width/2} 0, ${e.bounds.width} ${e.bounds.height/2}, ${e.bounds.width/2} ${e.bounds.height}, 0 ${e.bounds.height/2}, ${e.bounds.width/2} 0`,strokeColor:e.strokeColor,fillColor:t||e.fillColor}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:e.textColor},e.name)),[L.ActivityObjectNode]:({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(jt,{width:"100%",height:"100%",fillColor:t||e.fillColor,strokeColor:e.strokeColor}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:e.textColor},e.name)),[L.UseCase]:({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(Gt,{cx:"50%",cy:"50%",rx:"50%",ry:"50%",strokeColor:e.strokeColor,fillColor:t||e.fillColor}),o.createElement(Vo,{fill:e.textColor},e.name)),[L.UseCaseActor]:({element:e,fillColor:t})=>o.createElement("g",null,o.createElement("rect",{width:"100%",height:"100%",fill:"none"}),o.createElement("g",{stroke:e.strokeColor||"black",strokeWidth:2},o.createElement(Wt,{cx:H(1,40,!0),cy:H(1,25,!0),r:H(1,15,!0),fillColor:t||e.fillColor,strokeColor:e.fillColor}),o.createElement(Yt,{x1:H(1,40),y1:H(1,40),x2:H(1,40),y2:H(1,75),strokeColor:e.fillColor}),o.createElement(Yt,{x1:H(1,10),y1:50,x2:H(1,65),y2:50,strokeColor:e.fillColor}),o.createElement(Yt,{x1:H(1,40),y1:H(1,75),x2:H(1,10),y2:H(1,110),strokeColor:e.fillColor}),o.createElement(Yt,{x1:H(1,40),y1:H(1,75),x2:H(1,65),y2:H(1,110),strokeColor:e.fillColor})),o.createElement(Vo,{fill:e.textColor,x:H(1,40),y:H(1,130)},e.name)),[L.UseCaseSystem]:({element:e,children:t,fillColor:n})=>o.createElement("g",null,o.createElement(jt,{width:"100%",height:"100%",fillColor:n||e.fillColor,strokeColor:e.strokeColor}),o.createElement(Vo,{fill:e.textColor,y:16},e.name),t),[L.Component]:lr,[L.Subsystem]:({element:e,children:t,fillColor:n})=>o.createElement("g",{"data-cy":"uml-subsystem"},o.createElement(jt,{width:"100%",height:"100%",strokeColor:e.strokeColor,fillColor:n||e.fillColor}),o.createElement("g",{transform:`translate(${e.bounds.width-31}, 7)`},o.createElement(Ut,{d:"M 4.8 0 L 24 0 L 24 24 L 4.8 24 L 4.8 19.2 L 0 19.2 L 0 14.4 L 4.8 14.4 L 4.8 9.6 L 0 9.6 L 0 4.8 L 4.8 4.8 Z",fillColor:n||e.fillColor,strokeColor:e.strokeColor,strokeWidth:"1.2",strokeMiterlimit:"10"}),o.createElement(Ut,{d:"M 4.8 4.8 L 9.6 4.8 L 9.6 9.6 L 4.8 9.6 M 4.8 14.4 L 9.6 14.4 L 9.6 19.2 L 4.8 19.2",fillColor:"none",strokeColor:e.strokeColor,strokeWidth:"1.2",strokeMiterlimit:"10"})),o.createElement(Vo,{fill:e.textColor,y:"25px"},e.stereotype&&e.displayStereotype&&o.createElement("tspan",{x:"50%",dy:-8,textAnchor:"middle",fontSize:"85%"},`«${e.stereotype}»`),o.createElement("tspan",{x:"50%",dy:e.stereotype&&e.displayStereotype?18:0,textAnchor:"middle"},e.name)),t),[L.ComponentInterface]:nr,[L.DeploymentNode]:({element:e,children:t,fillColor:n})=>o.createElement("g",null,o.createElement("g",null,o.createElement(Ut,{d:`M 0 8 l 8 -8 H ${e.bounds.width} l -8 8 Z`,strokeColor:e.strokeColor,fillColor:n||e.fillColor}),o.createElement(Ut,{d:`M ${e.bounds.width} 0 V ${e.bounds.height-8} l -8 8 V 8 Z`,strokeColor:e.strokeColor,fillColor:n||e.fillColor}),o.createElement(jt,{x:"0",y:8,width:e.bounds.width-8,height:e.bounds.height-9,strokeColor:e.strokeColor,fillColor:n||e.fillColor})),o.createElement(Vo,{y:30,fill:e.textColor},e.stereotype&&e.displayStereotype&&o.createElement("tspan",{x:"50%",dy:-8,textAnchor:"middle",fontSize:"85%"},`«${e.stereotype}»`),o.createElement("tspan",{x:"50%",dy:e.stereotype&&e.displayStereotype?18:0,textDecoration:"underline",textAnchor:"middle"},e.name)),t),[L.DeploymentComponent]:lr,[L.DeploymentArtifact]:({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(jt,{width:"100%",height:"100%",strokeColor:e.strokeColor,fillColor:t||e.fillColor}),o.createElement(Vo,{y:28,dominantBaseline:"auto",fill:e.textColor},e.name),o.createElement("g",{transform:`translate(${e.bounds.width-26}, 7)`},o.createElement(Ut,{d:"M 0 0 L 13 0 L 19.2 7.25 L 19.2 24 L 0 24 L 0 0 Z",fillColor:t||e.fillColor,strokeColor:e.strokeColor,strokeWidth:"1.2",strokeMiterlimit:"10"}),o.createElement(Ut,{d:"M 13 0 L 13 7.25 L 19.2 7.25",fillColor:"none",strokeColor:e.strokeColor,strokeWidth:"1.2",strokeMiterlimit:"10"}))),[L.DeploymentInterface]:nr,[L.PetriNetTransition]:({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(Vo,{y:-15,fill:e.textColor},e.name),o.createElement(jt,{width:e.bounds.width,height:e.bounds.height,strokeColor:e.strokeColor,fillColor:t||e.fillColor,strokeWidth:1,fillOpacity:1})),[L.PetriNetPlace]:({element:e,fillColor:t})=>{const n=Math.min(e.bounds.width,e.bounds.height)/2,r=e.amountOfTokens>0&&e.amountOfTokens>5,s=e.capacity!==ke.defaultCapacity;let i,l=[];if(e.amountOfTokens>0&&!r){const t=n-5;l=((e,t)=>{const n=[];if(1===e)n.push(new I(0,0));else{const o=2*Math.PI/e,r=t+2.5*e/5-ir(5,t);for(let t=0;t<e;t++){const e=t*o+.5*Math.PI;n.push(new I(Math.cos(e)*r,Math.sin(e)*r))}}return n})(e.amountOfTokens,t),i=ir(5,t)}return o.createElement("g",null,o.createElement(Wt,{cx:"50%",cy:"50%",r:n,strokeColor:e.strokeColor,strokeWidth:1,fillColor:t||e.fillColor,fillOpacity:1}),!r&&l.map(((t,r)=>o.createElement(Vt,{key:r,cx:n+t.x,cy:n+t.y,r:i,strokeColor:"none",fillColor:e.strokeColor,fillOpacity:1}))),r&&o.createElement(Vo,{fill:e.strokeColor},e.amountOfTokens),s&&o.createElement("text",{x:"95%",y:5,pointerEvents:"none",style:e.textColor?{fill:e.textColor}:{}},"C=",e.capacity),o.createElement(Vo,{fill:e.textColor,y:e.bounds.height+15},e.name))},[L.ReachabilityGraphMarking]:({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(jt,{rx:10,ry:10,width:"100%",height:"100%",strokeColor:e.strokeColor,fillColor:t||e.fillColor}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:e.textColor,lineHeight:16,capHeight:11},e.name),e.isInitialMarking&&o.createElement("g",null,o.createElement("marker",{id:`marker-${e.id}`,viewBox:"0 0 30 30",markerWidth:22,markerHeight:30,refX:30,refY:15,orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:"M0,29 L30,15 L0,1",fillColor:"none",strokeColor:e.strokeColor})),o.createElement(Ft,{points:"-50,-50 3,3",strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1,markerEnd:`url(#marker-${e.id})`}))),[L.CommunicationLinkMessage]:Yo,[L.SyntaxTreeTerminal]:({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(jt,{width:"100%",height:"100%",strokeColor:e.strokeColor,fillColor:t||e.fillColor}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:e.textColor,lineHeight:16,capHeight:11},e.name)),[L.SyntaxTreeNonterminal]:({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(jt,{rx:10,ry:10,width:"100%",height:"100%",strokeColor:e.strokeColor,fillColor:t||e.fillColor}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:e.textColor,lineHeight:16,capHeight:11},e.name)),[L.FlowchartTerminal]:({element:e,fillColor:t})=>o.createElement(ar,{element:e},o.createElement(jt,{fillColor:t||e.fillColor,rx:10,ry:10,width:"100%",height:"100%",strokeColor:e.strokeColor})),[L.FlowchartDecision]:({element:e,fillColor:t})=>o.createElement(ar,{element:e},o.createElement(Ft,{points:`${e.bounds.width/2} 0, ${e.bounds.width} ${e.bounds.height/2}, ${e.bounds.width/2} ${e.bounds.height}, 0 ${e.bounds.height/2}, ${e.bounds.width/2} 0`,strokeColor:e.strokeColor,fillColor:t||e.fillColor})),[L.FlowchartProcess]:({element:e,fillColor:t})=>o.createElement(ar,{element:e},o.createElement(jt,{width:"100%",height:"100%",strokeColor:e.strokeColor,fillColor:t||e.fillColor})),[L.FlowchartInputOutput]:({element:e,fillColor:t})=>o.createElement(ar,{element:e},o.createElement(Ft,{points:`${H(1.1,e.bounds.width)} 0, ${H(.9,e.bounds.width)} ${e.bounds.height}, ${H(-.1,e.bounds.width)} ${e.bounds.height}, ${H(.1,e.bounds.width)} 0, ${H(1.1,e.bounds.width)} 0`,strokeColor:e.strokeColor,fillColor:t||e.fillColor})),[L.FlowchartFunctionCall]:({element:e,fillColor:t})=>o.createElement(ar,{element:e},o.createElement(jt,{fillColor:t||e.fillColor,width:10,height:"100%",strokeColor:e.strokeColor,x:"0"}),o.createElement(jt,{width:e.bounds.width-20,height:"100%",strokeColor:e.strokeColor,x:10,fillColor:t||e.fillColor}),o.createElement(jt,{width:10,height:"100%",strokeColor:e.strokeColor,x:e.bounds.width-10,fillColor:t||e.fillColor})),[L.ColorLegend]:({element:e,fillColor:t})=>o.createElement("g",null,o.createElement(Ut,{d:`M 0 0 L ${e.bounds.width-15} 0 L ${e.bounds.width} 15 L ${e.bounds.width} ${e.bounds.height} L 0 ${e.bounds.height} L 0 0 Z`,fillColor:t||e.fillColor,strokeColor:e.strokeColor,strokeWidth:"1.2",strokeMiterlimit:"10"}),o.createElement(Ut,{d:`M ${e.bounds.width-15} 0 L ${e.bounds.width-15} 15 L ${e.bounds.width} 15`,fillColor:"none",strokeColor:e.strokeColor,strokeWidth:"1.2",strokeMiterlimit:"10"}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:e.textColor},e.name)),[L.BPMNTask]:({element:e,fillColor:t,strokeColor:n,textColor:r})=>o.createElement("g",null,o.createElement(jt,{rx:10,ry:10,width:"100%",height:"100%",fillColor:t||e.fillColor,strokeColor:n||e.strokeColor}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:r||e.textColor,lineHeight:16,capHeight:11},e.name),((e,t={})=>{switch(e){case"default":default:return null;case"user":return o.createElement(mr,{...t});case"send":return o.createElement(dr,{...t});case"receive":return o.createElement(cr,{...t});case"manual":return o.createElement(ur,{...t});case"business-rule":return o.createElement(pr,{...t});case"script":return o.createElement(hr,{...t})}})(e.taskType,{x:10,y:10}),((e,t={})=>{switch(e){case"none":default:return null;case"parallel multi instance":return o.createElement(br,{...t});case"sequential multi instance":return o.createElement(gr,{...t});case"loop":return o.createElement(yr,{...t})}})(e.marker,{x:e.bounds.width/2-7,y:e.bounds.height-16})),[L.BPMNSubprocess]:({element:e,fillColor:t,strokeColor:n,textColor:r})=>o.createElement("g",null,o.createElement(jt,{rx:10,ry:10,width:"100%",height:"100%",fillColor:t||e.fillColor,strokeColor:n||e.strokeColor}),o.createElement(jt,{x:e.bounds.width/2-7,y:e.bounds.height-14,width:14,height:14,fillColor:"transparent",strokeColor:e.strokeColor}),o.createElement(Ft,{points:`${e.bounds.width/2-4} ${e.bounds.height-7}, ${e.bounds.width/2+4} ${e.bounds.height-7}`,strokeColor:n||e.strokeColor,strokeLinejoin:"round",strokeLinecap:"round"}),o.createElement(Ft,{points:`${e.bounds.width/2} ${e.bounds.height-11}, ${e.bounds.width/2} ${e.bounds.height-3}`,strokeColor:n||e.strokeColor,strokeLinejoin:"round",strokeLinecap:"round"}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:r||e.textColor,lineHeight:16,capHeight:11},e.name)),[L.BPMNTransaction]:({element:e,fillColor:t,strokeColor:n,textColor:r})=>o.createElement("g",null,o.createElement(jt,{rx:10,ry:10,width:e.bounds.width,height:e.bounds.height,fillColor:t||e.fillColor,strokeColor:n||e.strokeColor}),o.createElement(jt,{rx:7,ry:7,x:3,y:3,width:e.bounds.width-6,height:e.bounds.height-6,fillColor:t||e.fillColor,strokeColor:n||e.strokeColor}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:r||e.textColor,lineHeight:16,capHeight:11},e.name)),[L.BPMNCallActivity]:({element:e,fillColor:t,strokeColor:n,textColor:r})=>o.createElement("g",null,o.createElement(jt,{rx:10,ry:10,width:e.bounds.width,height:e.bounds.height,strokeColor:n||e.strokeColor,strokeWidth:3,fillColor:t||e.fillColor}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height/2,width:e.bounds.width,height:e.bounds.height,fontWeight:"bold",fill:r||e.textColor,lineHeight:16,capHeight:11},e.name)),[L.BPMNAnnotation]:Or,[L.BPMNStartEvent]:({element:e,fillColor:t,strokeColor:n,textColor:r})=>o.createElement("g",null,o.createElement(Wt,{cx:"50%",cy:"50%",r:Math.min(e.bounds.width,e.bounds.height)/2,fillColor:t||e.fillColor||"transparent",strokeColor:n||e.strokeColor}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height+20,width:2*e.bounds.width,fill:r||e.textColor,lineHeight:16,capHeight:11,verticalAnchor:"start"},e.name),((e,t={})=>{switch(e){case"default":default:return null;case"message":return o.createElement(cr,{...t});case"timer":return o.createElement(fr,{...t});case"conditional":return o.createElement(Cr,{...t});case"signal":return o.createElement(Er,{...t})}})(e.eventType,{x:e.bounds.width/2-10,y:e.bounds.height/2-10})),[L.BPMNIntermediateEvent]:({element:e,fillColor:t,strokeColor:n,textColor:r})=>o.createElement("g",null,o.createElement(Wt,{cx:"50%",cy:"50%",r:Math.min(e.bounds.width,e.bounds.height)/2-.5,fillColor:t||e.fillColor||"transparent",strokeColor:n||e.strokeColor}),o.createElement(Wt,{cx:"50%",cy:"50%",r:Math.min(e.bounds.width,e.bounds.height)/2-3.5,fillColor:t||e.fillColor||"transparent",strokeColor:n||e.strokeColor}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height+20,width:2*e.bounds.width,fill:r||e.textColor,lineHeight:16,capHeight:11,verticalAnchor:"start"},e.name),((e,t={})=>{switch(e){case"default":default:return null;case"message-catch":return o.createElement(cr,{...t});case"message-throw":return o.createElement(dr,{...t});case"timer-catch":return o.createElement(fr,{...t});case"escalation-throw":return o.createElement(vr,{...t});case"conditional-catch":return o.createElement(Cr,{...t});case"link-catch":return o.createElement(wr,{...t});case"link-throw":return o.createElement(xr,{...t});case"compensation-throw":return o.createElement(kr,{...t});case"signal-catch":return o.createElement(Er,{...t});case"signal-throw":return o.createElement(Mr,{...t})}})(e.eventType,{x:e.bounds.width/2-10,y:e.bounds.height/2-10})),[L.BPMNEndEvent]:({element:e,fillColor:t,strokeColor:n,textColor:r})=>o.createElement("g",null,o.createElement(Wt,{cx:"50%",cy:"50%",r:Math.min(e.bounds.width,e.bounds.height)/2-1.5,strokeWidth:3,fillColor:t||e.fillColor,strokeColor:n||e.strokeColor}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height+20,fill:r||e.textColor,width:2*e.bounds.width,lineHeight:16,capHeight:11,verticalAnchor:"start"},e.name),((e,t={})=>{switch(e){case"default":default:return null;case"message":return o.createElement(dr,{...t});case"escalation":return o.createElement(vr,{...t});case"error":return o.createElement(Pr,{...t});case"compensation":return o.createElement(kr,{...t});case"signal":return o.createElement(Mr,{...t});case"terminate":return o.createElement(Tr,{...t})}})(e.eventType,{x:e.bounds.width/2-10,y:e.bounds.height/2-10})),[L.BPMNGateway]:e=>{let t=Nr;switch(e.element.gatewayType){case"complex":t=Ar;break;case"event-based":t=Sr;break;case"exclusive":t=Nr;break;case"inclusive":t=Dr;break;case"parallel":t=Lr}return o.createElement("g",null,o.createElement(t,{...e}))},[L.BPMNDataObject]:({element:e,fillColor:t,strokeColor:n,textColor:r})=>o.createElement("g",null,o.createElement(Ft,{points:`0 0, 0 ${e.bounds.height}, ${e.bounds.width} ${e.bounds.height}, ${e.bounds.width} 15, ${e.bounds.width-15} 0, ${e.bounds.width-15} 15, ${e.bounds.width} 15, ${e.bounds.width-15} 0, 0 0`,strokeColor:n||e.strokeColor,fillColor:t||e.fillColor}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height+20,width:2*e.bounds.width,fill:r||e.textColor,lineHeight:16,capHeight:11,verticalAnchor:"start"},e.name)),[L.BPMNDataStore]:({element:e,fillColor:t,strokeColor:n,textColor:r})=>o.createElement("g",null,o.createElement(Ut,{d:`M 0 10 L 0 ${e.bounds.height-10} A ${e.bounds.width/2} 10 0 0 0 ${e.bounds.width} ${e.bounds.height-10} L ${e.bounds.width} 10 A ${e.bounds.width/2} 10 180 0 0 0 10`,strokeColor:n||e.strokeColor,fillColor:t||e.fillColor}),o.createElement(Ut,{d:`M 0 30 A ${e.bounds.width/2} 10 0 0 0 ${e.bounds.width} 30`,strokeColor:n||e.strokeColor,fillColor:"transparent"}),o.createElement(Ut,{d:`M 0 20 A ${e.bounds.width/2} 10 0 0 0 ${e.bounds.width} 20`,strokeColor:n||e.strokeColor,fillColor:"transparent"}),o.createElement(Ut,{d:`M 0 10 A ${e.bounds.width/2} 10 0 0 0 ${e.bounds.width} 10`,strokeColor:n||e.strokeColor,fillColor:"transparent"}),o.createElement(_o,{x:e.bounds.width/2,y:e.bounds.height+20,width:2*e.bounds.width,fill:r||e.textColor,lineHeight:16,capHeight:11,verticalAnchor:"start"},e.name)),[L.BPMNPool]:({element:e,fillColor:t,strokeColor:n,textColor:r,children:s})=>o.createElement("g",null,o.createElement(jt,{y:0,width:Xe.HEADER_WIDTH,height:e.bounds.height,strokeColor:n||e.strokeColor,fillColor:t||e.fillColor}),o.createElement(jt,{y:0,x:Xe.HEADER_WIDTH,width:e.bounds.width-Xe.HEADER_WIDTH,height:e.bounds.height,strokeColor:n||e.strokeColor,fillColor:t||e.fillColor}),o.createElement(_o,{y:20,x:-e.bounds.height/2,textAnchor:"middle",alignmentBaseline:"middle",transform:"rotate(270)",fontWeight:"bold",pointerEvents:"none",fill:r||e.textColor},e.name),s),[L.BPMNSwimlane]:({element:e,fillColor:t,textColor:n,children:r})=>o.createElement("g",null,o.createElement(jt,{width:e.bounds.width,height:e.bounds.height,fillColor:t||e.fillColor}),o.createElement(_o,{y:20,x:-e.bounds.height/2,transform:"rotate(270)",textAnchor:"middle",alignmentBaseline:"middle",pointerEvents:"none",fill:n||e.textColor},e.name),r),[L.BPMNGroup]:Ir,[et.ClassAggregation]:en,[et.ClassBidirectional]:en,[et.ClassComposition]:en,[et.ClassDependency]:en,[et.ClassInheritance]:en,[et.ClassRealization]:en,[et.ClassUnidirectional]:en,[et.ObjectLink]:({element:e})=>o.createElement("g",null,o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1})),[et.ActivityControlFlow]:({element:e})=>{let t={x:0,y:0},n="v";const r=e.path.map((e=>new I(e.x,e.y)));let s=r.reduce(((e,t,n,o)=>n+1<o.length?e+o[n+1].subtract(t).length:e),0)/2;for(let e=0;e<r.length-1;e++){const o=r[e+1].subtract(r[e]);if(o.length>s){const i=o.normalize();n=Math.abs(i.x)>Math.abs(i.y)?"h":"v",t=r[e].add(i.scale(s));break}s-=o.length}const i=e.textColor?{fill:e.textColor}:{};return o.createElement("g",null,o.createElement("marker",{id:`marker-${e.id}`,viewBox:"0 0 30 30",markerWidth:"22",markerHeight:"30",refX:"30",refY:"15",orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:"M0,29 L30,15 L0,1",fillColor:"none",strokeColor:e.strokeColor})),o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1,markerEnd:`url(#marker-${e.id})`}),o.createElement("text",{x:t.x,y:t.y,...(e=>{switch(e){case"v":return{dx:5,dominantBaseline:"middle",textAnchor:"start"};case"h":return{dy:-5,dominantBaseline:"text-after-edge",textAnchor:"middle"}}})(n),pointerEvents:"none",style:{...i}},e.name))},[et.UseCaseAssociation]:({element:e})=>{const[t,n]=e.path.map((e=>new I(e.x,e.y))),r=n.subtract(t),s=r.normalize(),i=t.add(s.scale(.5*r.length));return o.createElement("g",null,o.createElement("path",{id:`textpath-${e.id}`,d:`\n        M ${t.x} ${t.y-10}\n        L ${n.x} ${n.y-10}\n    `}),o.createElement(Vo,{dy:"20px",noX:!0,noY:!0,fill:e.textColor,transform:s.x<0?`\n            translate(${i.x}, ${i.y})\n            rotate(180)\n            translate(${-i.x}, ${-i.y})\n          `:void 0},o.createElement("textPath",{xlinkHref:`#textpath-${e.id}`,startOffset:"50%"},e.name)),o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1}))},[et.UseCaseExtend]:({element:e})=>{const[t,n]=e.path.map((e=>new I(e.x,e.y))),r=n.subtract(t);if(r.length<=100)return o.createElement(er,{id:e.id,color:e.strokeColor,d:`M ${t.x} ${t.y} L ${n.x} ${n.y}`});const s=r.normalize(),i=t.add(s.scale(.5*r.length)),l=t.add(s.scale(.5*r.length-40)),a=n.subtract(s.scale(.5*r.length-40));return o.createElement("g",null,o.createElement(er,{color:e.strokeColor,id:e.id,d:`\n          M ${t.x} ${t.y} L ${l.x} ${l.y}\n          M ${a.x} ${a.y} L ${n.x} ${n.y}\n        `}),o.createElement("path",{id:`textpath-${e.id}`,d:`\n          M ${l.x} ${l.y}\n          L ${a.x} ${a.y}\n        `}),o.createElement(Vo,{noX:!0,noY:!0,fill:e.textColor,transform:s.x<0?`\n              translate(${i.x}, ${i.y})\n              rotate(180)\n              translate(${-i.x}, ${-i.y})\n            `:void 0},o.createElement("textPath",{xlinkHref:`#textpath-${e.id}`,startOffset:"50%"},"«extend»")))},[et.UseCaseGeneralization]:({element:e})=>o.createElement("g",null,o.createElement("marker",{id:`marker-${e.id}`,viewBox:"0 0 30 30",markerWidth:"22",markerHeight:"30",refX:"30",refY:"15",orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:"M0,1 L0,29 L30,15 z",strokeColor:e.strokeColor})),o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1,markerEnd:`url(#marker-${e.id})`})),[et.UseCaseInclude]:({element:e})=>{const[t,n]=e.path.map((e=>new I(e.x,e.y))),r=n.subtract(t);if(r.length<=100)return o.createElement(tr,{id:e.id,color:e.strokeColor,d:`M ${t.x} ${t.y} L ${n.x} ${n.y}`});const s=r.normalize(),i=t.add(s.scale(.5*r.length)),l=t.add(s.scale(.5*r.length-40)),a=n.subtract(s.scale(.5*r.length-40));return o.createElement("g",null,o.createElement(tr,{id:e.id,color:e.strokeColor,d:`\n          M ${t.x} ${t.y} L ${l.x} ${l.y}\n          M ${a.x} ${a.y} L ${n.x} ${n.y}\n        `}),o.createElement("path",{id:`textpath-${e.id}`,d:`\n          M ${l.x} ${l.y}\n          L ${a.x} ${a.y}\n        `}),o.createElement(Vo,{noX:!0,noY:!0,fill:e.textColor,transform:s.x<0?`\n              translate(${i.x}, ${i.y})\n              rotate(180)\n              translate(${-i.x}, ${-i.y})\n            `:void 0},o.createElement("textPath",{xlinkHref:`#textpath-${e.id}`,startOffset:"50%"},"«include»")))},[et.CommunicationLink]:({element:e})=>{const t=e.messages.filter((e=>"source"===e.direction)),n=e.messages.filter((e=>"target"===e.direction));let r={x:0,y:0},s=z.Left;const i=e.path.map((e=>new I(e.x,e.y)));let l=i.reduce(((e,t,n,o)=>n+1<o.length?e+o[n+1].subtract(t).length:e),0)/2;for(let e=0;e<i.length-1;e++){const t=i[e+1].subtract(i[e]);if(t.length>l){const n=t.normalize();s=Math.abs(n.x)>Math.abs(n.y)?n.x>0?z.Left:z.Right:n.y>0?z.Up:z.Down,r=i[e].add(n.scale(l));break}l-=t.length}return o.createElement("g",null,{[z.Up]:o.createElement(o.Fragment,null,o.createElement(Qo,{x:r.x+8,y:r.y,fill:e.textColor,directionIcon:"↓",messages:t}),o.createElement(Qo,{x:r.x-16,y:r.y,fill:e.textColor,directionIcon:"↑",messages:n})),[z.Right]:o.createElement(o.Fragment,null,o.createElement(Qo,{x:r.x,y:r.y,fill:e.textColor,directionIcon:"⟶",messages:n,textCentered:!0}),o.createElement(Qo,{x:r.x,y:r.y+16,fill:e.textColor,directionIcon:"⟵",messages:t,textCentered:!0})),[z.Down]:o.createElement(o.Fragment,null,o.createElement(Qo,{x:r.x+8,y:r.y,fill:e.textColor,directionIcon:"↓",messages:n}),o.createElement(Qo,{x:r.x-16,y:r.y,fill:e.textColor,directionIcon:"↑",messages:t})),[z.Left]:o.createElement(o.Fragment,null,o.createElement(Qo,{x:r.x,y:r.y,fill:e.textColor,directionIcon:"⟶",messages:t,textCentered:!0}),o.createElement(Qo,{x:r.x,y:r.y+16,fill:e.textColor,directionIcon:"⟵",messages:n,textCentered:!0}))}[s],o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1}))},[et.ComponentInterfaceProvided]:or,[et.ComponentInterfaceRequired]:rr,[et.ComponentDependency]:sr,[et.DeploymentAssociation]:({element:e})=>{let t={x:0,y:0},n="v";const r=e.path.map((e=>new I(e.x,e.y)));let s=r.reduce(((e,t,n,o)=>n+1<o.length?e+o[n+1].subtract(t).length:e),0)/2;for(let e=0;e<r.length-1;e++){const o=r[e+1].subtract(r[e]);if(o.length>s){const i=o.normalize();n=Math.abs(i.x)>Math.abs(i.y)?"h":"v",t=r[e].add(i.scale(s));break}s-=o.length}return o.createElement("g",null,o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1}),o.createElement(Vo,{fill:e.textColor,x:t.x,y:t.y,...(e=>{switch(e){case"v":return{dx:5,dominantBaseline:"middle",textAnchor:"start"};case"h":return{dy:-5,dominantBaseline:"text-after-edge",textAnchor:"middle"}}})(n),pointerEvents:"none"},e.name))},[et.DeploymentDependency]:sr,[et.DeploymentInterfaceProvided]:or,[et.DeploymentInterfaceRequired]:rr,[et.PetriNetArc]:({element:e})=>{const[t,n]=e.path.map((e=>new I(e.x,e.y))),r=n.subtract(t),s=r.normalize(),i=t.add(s.scale(.5*r.length)),l=e.name!==pn.defaultMultiplicity;return o.createElement("g",null,o.createElement("marker",{id:`marker-${e.id}`,viewBox:"0 0 30 30",markerWidth:"22",markerHeight:"30",refX:"30",refY:"15",orient:"auto",markerUnits:"strokeWidth"},o.createElement(Rt,{d:"M0,1 L0,29 L30,15 z",fill:e.strokeColor})),o.createElement("path",{id:`textpath-${e.id}`,d:`\n        M ${t.x} ${t.y-10}\n        L ${n.x} ${n.y-10}\n    `}),l&&o.createElement(Vo,{dy:"20px",noX:!0,noY:!0,fill:e.textColor,transform:s.x<0?`\n            translate(${i.x}, ${i.y})\n            rotate(180)\n            translate(${-i.x}, ${-i.y})\n          `:void 0},o.createElement("textPath",{xlinkHref:`#textpath-${e.id}`,startOffset:"50%"},e.name)),o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1,markerEnd:`url(#marker-${e.id})`}))},[et.ReachabilityGraphArc]:({element:e})=>{let t={x:0,y:0},n="v";const r=e.path.map((e=>new I(e.x,e.y)));let s=r.reduce(((e,t,n,o)=>n+1<o.length?e+o[n+1].subtract(t).length:e),0)/2;for(let e=0;e<r.length-1;e++){const o=r[e+1].subtract(r[e]);if(o.length>s){const i=o.normalize();n=Math.abs(i.x)>Math.abs(i.y)?"h":"v",t=r[e].add(i.scale(s));break}s-=o.length}const i=e.textColor?{fill:e.textColor}:{};return o.createElement("g",null,o.createElement("marker",{id:`marker-${e.id}`,viewBox:"0 0 30 30",markerWidth:22,markerHeight:30,refX:30,refY:15,orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:"M0,29 L30,15 L0,1",fillColor:"none",strokeColor:e.strokeColor})),o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1,markerEnd:`url(#marker-${e.id})`}),o.createElement("text",{x:t.x,y:t.y,...(e=>{switch(e){case"v":return{dx:5,dominantBaseline:"middle",textAnchor:"start"};case"h":return{dy:-5,dominantBaseline:"text-after-edge",textAnchor:"middle"}}})(n),pointerEvents:"none",style:{...i}},e.name))},[et.SyntaxTreeLink]:({element:e})=>o.createElement("g",null,o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1})),[et.FlowchartFlowline]:({element:e})=>{let t={x:0,y:0},n="v";const r=e.path.map((e=>new I(e.x,e.y)));let s=r.reduce(((e,t,n,o)=>n+1<o.length?e+o[n+1].subtract(t).length:e),0)/2;for(let e=0;e<r.length-1;e++){const o=r[e+1].subtract(r[e]);if(o.length>s){const i=o.normalize();n=Math.abs(i.x)>Math.abs(i.y)?"h":"v",t=r[e].add(i.scale(s));break}s-=o.length}const i=e.textColor?{fill:e.textColor}:{};return o.createElement("g",null,o.createElement("marker",{id:`marker-${e.id}`,viewBox:"0 0 30 30",markerWidth:"22",markerHeight:"30",refX:"30",refY:"15",orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:"M0,29 L30,15 L0,1",fillColor:"none",strokeColor:e.strokeColor})),o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1,markerEnd:`url(#marker-${e.id})`}),o.createElement("text",{x:t.x,y:t.y,...(e=>{switch(e){case"v":return{dx:5,dominantBaseline:"middle",textAnchor:"start"};case"h":return{dy:-5,dominantBaseline:"text-after-edge",textAnchor:"middle"}}})(n),pointerEvents:"none",style:{...i}},e.name))},[et.BPMNFlow]:({element:e})=>{let t={x:0,y:0},n="vertical";const r=e.path.map((e=>new I(e.x,e.y)));let s=r.reduce(((e,t,n,o)=>n+1<o.length?e+o[n+1].subtract(t).length:e),0)/2;for(let e=0;e<r.length-1;e++){const o=r[e+1].subtract(r[e]);if(o.length>s){const i=o.normalize();n=Math.abs(i.x)>Math.abs(i.y)?"horizontal":"vertical",t=r[e].add(i.scale(s));break}s-=o.length}return o.createElement("g",null,"message"===e.flowType&&o.createElement("marker",{id:`marker-start-${e.id}`,viewBox:"0 0 10 10",markerWidth:10,markerHeight:10,refX:0,refY:0,orient:"auto",markerUnits:"strokeWidth"},o.createElement(Wt,{cx:"0%",cy:"0%",r:5,strokeColor:e.fillColor,strokeWidth:1})),("sequence"===e.flowType||"message"===e.flowType)&&o.createElement("marker",{id:`marker-end-${e.id}`,viewBox:"0 0 10 5",markerWidth:10,markerHeight:10,refX:11,refY:5,orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:"M0,0 L10,5 L0,10, L0,0 z",fillRule:"evenodd",fillColor:"strokeColor",strokeLinejoin:"round"})),"data association"===e.flowType&&o.createElement("marker",{id:`marker-end-${e.id}`,viewBox:"0 0 10 5",markerWidth:10,markerHeight:10,refX:11,refY:5,orient:"auto",markerUnits:"strokeWidth"},o.createElement(Ut,{d:"M5,0 L10,5 L5,10",fillRule:"evenodd",strokeLinejoin:"round",strokeLinecap:"round",fillColor:"transparent"})),o.createElement(Ft,{points:e.path.map((e=>`${e.x} ${e.y}`)).join(","),strokeColor:e.strokeColor,fillColor:"none",strokeWidth:1,markerStart:"message"===e.flowType?`url(#marker-start-${e.id})`:void 0,markerEnd:"association"!==e.flowType?`url(#marker-end-${e.id})`:void 0,strokeDasharray:"sequence"!==e.flowType?4:void 0}),o.createElement("text",{x:t.x,y:t.y,...(e=>{switch(e){case"vertical":return{dx:5,dominantBaseline:"middle",textAnchor:"start"};case"horizontal":return{dy:-5,dominantBaseline:"text-after-edge",textAnchor:"middle"}}})(n),pointerEvents:"none",style:{fill:e.textColor}},e.name))}},zr=(0,go.Zz)(Ot.SL,(0,io.Ng)(((e,t)=>({hovered:e.hovered[0]===t.id,selected:e.selected.includes(t.id),remoteSelectors:e.remoteSelection[t.id]||[],moving:e.moving.includes(t.id),interactive:e.interactive.includes(t.id),interactable:e.editor.view===Vn.Exporting||e.editor.view===Vn.Highlight,element:e.elements[t.id],zoomFactor:e.editor.zoomFactor,selectionBoxActive:e.editor.selectionBoxActive})),{}));class $r extends o.Component{render(){const{hovered:e,selected:t,remoteSelectors:n,moving:r,interactive:s,interactable:i,element:l,child:a,children:c,theme:d,zoomFactor:h,selectionBoxActive:p,...u}=this.props;let m=null;J.isUMLContainer(l)&&a&&(m=l.ownedElements.map((e=>o.createElement(a,{key:e,id:e}))));const g=Br[l.type],y=i&&s?d.interactive.normal:i&&e?d.interactive.hovered:l.highlight?l.highlight:l.fillColor?l.fillColor:d.color.background;return o.createElement("svg",{...u,...l.bounds,pointerEvents:r?"none":void 0,fillOpacity:r?.7:void 0,fill:y},o.createElement(g,{fillColor:y,element:Jn.get(l)},m),c,!i&&(e||t)&&o.createElement("rect",{x:-2.5,y:-2.5,width:l.bounds.width+5,height:l.bounds.height+5,fill:"none",stroke:"#0064ff",strokeOpacity:"0.2",strokeWidth:5,pointerEvents:"none"}),n.length>0&&o.createElement("g",null,n.map(((e,t)=>{const n="translate("+(l.bounds.width+5)+" "+32*t+")";return o.createElement("g",{key:e.name+"_"+e.color,id:e.name+"_"+e.color},o.createElement("rect",{x:-2.5,y:-2.5,width:l.bounds.width+5,height:l.bounds.height+5,fill:"none",stroke:e.color,strokeOpacity:"0.2",strokeWidth:5,pointerEvents:"none"}),o.createElement("g",{transform:n,pointerEvents:"none"},o.createElement("rect",{fillOpacity:"0.2",rx:"10",x:"-40",y:"-20",width:"85px",height:"30px",fill:e.color}),o.createElement("text",null,o.createElement("tspan",{textAnchor:"middle"},e.name.length<8?e.name:e.name.substring(0,6)+".."))))}))))}}const Fr=zr($r);function Ur(e){if(e.changedTouches.length>0){const t=document.elementFromPoint(e.changedTouches[e.changedTouches.length-1].clientX,e.changedTouches[e.changedTouches.length-1].clientY);if(!t)return;const n=new PointerEvent("pointerup",{cancelable:!0,bubbles:!0,screenX:e.changedTouches[e.changedTouches.length-1].pageX,screenY:e.changedTouches[e.changedTouches.length-1].pageY,clientX:e.changedTouches[e.changedTouches.length-1].clientX,clientY:e.changedTouches[e.changedTouches.length-1].clientY});t.dispatchEvent(n)}}function Rr(e){return{clientX:e instanceof PointerEvent?e.clientX:e.touches[0].clientX,clientY:e instanceof PointerEvent?e.clientY:e.touches[0].clientY}}const jr={offset:new I,handlerIndex:0,path:[{x:0,y:0}]},Hr=(0,go.Zz)(Ot.SL,(0,io.Ng)(((e,t)=>({hovered:e.hovered[0]===t.id,selected:e.selected.includes(t.id),remoteSelectors:e.remoteSelection[t.id]||[],interactive:e.interactive.includes(t.id),interactable:e.editor.view===Vn.Exporting||e.editor.view===Vn.Highlight,reconnecting:!!e.reconnecting[t.id],disabled:!!Object.keys(e.reconnecting).length||!!Object.keys(e.connecting).length,relationship:e.elements[t.id],mode:e.editor.mode,readonly:e.editor.readonly||!1,selectionBoxActive:e.editor.selectionBoxActive})),{startwaypointslayout:to.startWaypointsLayout,endwaypointslayout:to.endWaypointsLayout}));class Wr extends o.Component{constructor(){super(...arguments),this.state=jr,this.onPointerDown=(e,t,n)=>{this.setState({handlerIndex:t,offset:new I(e.clientX-n.mpX,e.clientY-n.mpY)}),document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp,{once:!0})},this.onPointerMove=e=>{const t=this.state.handlerIndex,n=t%2?"horizontal":"vertical",o=Rr(e),r=o.clientX-this.state.offset.x,s=o.clientY-this.state.offset.y;this.updateRelationshipPoints(n,t,r,s)},this.onPointerUp=e=>{this.props.endwaypointslayout(this.props.id),e.currentTarget.removeEventListener("pointermove",this.onPointerMove)},this.updateRelationshipPoints=(e,t,n,o)=>{const r=t+1,s=Number(r)+1,i=this.props.relationship.source.direction;switch(e){case"horizontal":i===z.Up||i===z.Down?this.updateXCoordinate(r,s,n,o):this.updateYCoordinate(r,s,n,o);break;case"vertical":i===z.Up||i===z.Down?this.updateYCoordinate(r,s,n,o):this.updateXCoordinate(r,s,n,o)}const l=[new I];this.props.relationship.path.forEach((e=>{l.push(new I(e.x,e.y))}));const a=function(e){if(0===e.length)return{x:0,y:0,width:0,height:0};const t=e[0];let n=t.x,o=t.y,r=t.x,s=t.y;for(const t of e)t.x<n&&(n=t.x),t.y<o&&(o=t.y),t.x>r&&(r=t.x),t.y>s&&(s=t.y);return{x:n,y:o,width:r-n,height:s-o}}(l);a.x=this.props.relationship.bounds.x,a.y=this.props.relationship.bounds.y,a.width=20*Math.ceil(a.width/20),a.height=20*Math.ceil(a.height/20),this.setState({path:this.props.relationship.path}),this.props.startwaypointslayout(this.props.id,this.props.relationship.path,a)},this.updateXCoordinate=(e,t,n,o)=>{this.props.relationship.path[e].x=n,this.props.relationship.path[t].x=n},this.updateYCoordinate=(e,t,n,o)=>{this.props.relationship.path[e].y=o,this.props.relationship.path[t].y=o}}render(){const{hovered:e,selected:t,remoteSelectors:n,interactive:r,interactable:s,reconnecting:i,disabled:l,relationship:a,children:c,theme:d,mode:h,readonly:p,startwaypointslayout:u,endwaypointslayout:m,selectionBoxActive:g,...y}=this.props,b=h===Wn.Assessment?35:15,f=Br[a.type],E=a.path.map((e=>`${e.x} ${e.y}`)).join(","),C=[];a.path.map(((e,t)=>{const n=(a.path[t].x+a.path[t+1]?.x)/2,o=(a.path[t].y+a.path[t+1]?.y)/2;isNaN(n)||isNaN(o)||C.push({mpX:n,mpY:o})})),C.pop(),C.shift();const v=s&&r?d.interactive.normal:s&&e?d.interactive.hovered:e||t?"rgba(0, 100, 255, 0.2)":a.highlight?a.highlight:"rgba(0, 100, 255, 0)";return o.createElement("svg",{...y,...a.bounds,visibility:i?"hidden":void 0,pointerEvents:l?"none":"stroke"},o.createElement("polyline",{points:E,stroke:v,fill:"none",strokeWidth:b}),n.length>0&&n.map((e=>o.createElement("polyline",{key:e.name,points:E,stroke:e.color,strokeOpacity:"0.2",strokeWidth:b,fill:"none"}))),o.createElement(f,{element:to.get(a)}),c,C.map(((e,t)=>o.createElement("circle",{visibility:g||r||s||p?"hidden":void 0,pointerEvents:g||r||s||p?"none":"all",style:{cursor:"grab"},key:y.id+"_"+e.mpX+"_"+e.mpY,cx:e.mpX,cy:e.mpY,r:"15",onPointerDown:n=>{this.onPointerDown(n,t,e)},fill:v}))))}}const Vr=Hr(Wr),Gr=(0,io.Ng)(((e,t)=>({hovered:e.hovered[0]===t.id,selected:e.selected.includes(t.id),connecting:!!e.connecting.length,reconnecting:!!Object.keys(e.reconnecting).length,element:e.elements[t.id],type:e.elements[t.id].type})),{start:Jn.startConnecting,connect:Jn.connect,reconnect:to.reconnect}),Yr=It((e=>{const{alternativePortVisualization:t,...n}=e;return t?o.createElement("svg",{...n},o.createElement("path",{d:"M 2.5 0 v -10 h -5 v 10 Z"}),o.createElement("path",{d:"M -15 -25 a 15 15 0 0 1 30 0 a 15 15 0 0 1 -30 0"})):o.createElement("svg",{...n},o.createElement("path",{d:"M -20 0 A 10 10 0 0 1 20 0"}))})).attrs((({direction:e,ports:t})=>({fill:"#0064ff",fillOpacity:.2,x:`${t[e].x}px`,y:`${t[e].y}px`,rotate:e===z.Up||e===z.Topright||e===z.Topleft?0:e===z.Right||e===z.Upright||e===z.Downright?90:e===z.Down||e===z.Bottomright||e===z.Bottomleft?180:-90})))`
  cursor: crosshair;
  pointer-events: all;

  path {
    transform: rotate(${e=>e.rotate}deg);
  }
`,Zr=e=>{class t extends o.Component{constructor(){super(...arguments),this.elementOnPointerUp=e=>{const t=(0,lo.findDOMNode)(this);if(!(e instanceof PointerEvent))return void Ur(e);let n;if(e.target instanceof SVGElement&&null!=e.target.parentElement&&e.target.parentElement.hasAttribute("direction")&&(n=e.target.parentElement.getAttribute("direction")),null==n){const o=t.getBoundingClientRect(),r={x:(e.clientX-o.left)/o.width,y:(e.clientY-o.top)/o.height},s={[z.Up]:new I(.5,0),[z.Right]:new I(1,.5),[z.Down]:new I(.5,1),[z.Left]:new I(0,.5),[z.Upright]:new I(1,.25),[z.Downright]:new I(1,.75),[z.Upleft]:new I(0,.25),[z.Downleft]:new I(0,.75),[z.Topright]:new I(.75,0),[z.Bottomright]:new I(.75,1),[z.Topleft]:new I(.25,0),[z.Bottomleft]:new I(.25,1)},i=U(this.props.element),l=Object.entries(i).map((([e,t])=>({key:e,distance:Math.sqrt(Math.pow(s[e].x-r.x,2)+Math.pow(s[e].y-r.y,2))}))),a=Math.min(...l.map((e=>e.distance)));n=l.filter((e=>a===e.distance))[0].key}this.props.connecting&&this.props.connect({element:this.props.id,direction:n}),this.props.reconnecting&&!e.defaultPrevented&&(this.props.reconnect({element:this.props.id,direction:n}),e.preventDefault())},this.onPointerDown=e=>{const t=e.currentTarget.getAttribute("direction"),n=e.currentTarget.parentElement.getAttribute("id");this.props.start(t,n)},this.onPointerUp=e=>{const t=e.currentTarget.getAttribute("direction");this.props.connecting&&this.props.connect({element:this.props.id,direction:t}),this.props.reconnecting&&this.props.reconnect({element:this.props.id,direction:t})}}componentDidMount(){const e=(0,lo.findDOMNode)(this);e.addEventListener("pointerup",this.elementOnPointerUp.bind(this)),ko()({tablet:!0})&&e.addEventListener("touchend",this.elementOnPointerUp.bind(this))}componentWillUnmount(){const e=(0,lo.findDOMNode)(this);e.removeEventListener("pointerup",this.elementOnPointerUp),ko()({tablet:!0})&&e.removeEventListener("touchend",this.elementOnPointerUp)}render(){const{hovered:t,selected:n,connecting:r,reconnecting:s,start:i,connect:l,reconnect:a,type:c,element:d,...h}=this.props,p={...Qe,...yn}[c].features,u=U(d);return o.createElement(e,{...h},h.children,(t||n||r||s)&&o.createElement(o.Fragment,null,"ActivityForkNode"!==this.props.type&&o.createElement(Yr,{ports:u,direction:z.Up,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,alternativePortVisualization:p.alternativePortVisualization}),"ActivityForkNodeHorizontal"!==this.props.type&&o.createElement(Yr,{ports:u,direction:z.Right,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,alternativePortVisualization:p.alternativePortVisualization}),"ActivityForkNode"!==this.props.type&&o.createElement(Yr,{ports:u,direction:z.Down,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,alternativePortVisualization:p.alternativePortVisualization}),"ActivityForkNodeHorizontal"!==this.props.type&&o.createElement(Yr,{ports:u,direction:z.Left,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,alternativePortVisualization:p.alternativePortVisualization}),"ActivityForkNode"===this.props.type&&this.props.element.bounds.height>120&&o.createElement(o.Fragment,null,o.createElement(Yr,{ports:u,direction:z.Upright,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,alternativePortVisualization:p.alternativePortVisualization}),o.createElement(Yr,{ports:u,direction:z.Upleft,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,alternativePortVisualization:p.alternativePortVisualization}),o.createElement(Yr,{ports:u,direction:z.Downright,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,alternativePortVisualization:p.alternativePortVisualization}),o.createElement(Yr,{ports:u,direction:z.Downleft,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,alternativePortVisualization:p.alternativePortVisualization})),"ActivityForkNodeHorizontal"===this.props.type&&this.props.element.bounds.width>120&&o.createElement(o.Fragment,null,o.createElement(Yr,{ports:u,direction:z.Topright,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,alternativePortVisualization:p.alternativePortVisualization}),o.createElement(Yr,{ports:u,direction:z.Topleft,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,alternativePortVisualization:p.alternativePortVisualization}),o.createElement(Yr,{ports:u,direction:z.Bottomright,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,alternativePortVisualization:p.alternativePortVisualization}),o.createElement(Yr,{ports:u,direction:z.Bottomleft,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,alternativePortVisualization:p.alternativePortVisualization}))))}}return Gr(t)},_r=e=>class extends o.Component{render(){return o.createElement(mo,{owner:this.props.id},o.createElement(e,{...this.props}))}},Xr=(0,io.Ng)(((e,t)=>({cannotBeHovered:e.editor.selectionBoxActive||e.moving.length>0&&!J.isUMLContainer(e.elements[t.id])})),{hover:Jn.hover,leave:Jn.leave}),qr=e=>{class t extends o.Component{constructor(){super(...arguments),this.enter=e=>{this.props.cannotBeHovered||this.props.hover(this.props.id),e.stopPropagation()},this.leave=e=>{this.props.cannotBeHovered||this.props.leave(this.props.id),e.stopPropagation()}}componentDidMount(){const e=(0,lo.findDOMNode)(this);e.addEventListener("pointerenter",this.enter),e.addEventListener("pointerleave",this.leave)}componentWillUnmount(){const e=(0,lo.findDOMNode)(this);e.removeEventListener("pointerenter",this.enter),e.removeEventListener("pointerleave",this.leave)}render(){const{hover:t,leave:n,cannotBeHovered:r,...s}=this.props;return o.createElement(e,{...s})}}return Xr(t)},Kr=(0,io.Ng)(((e,t)=>({hovered:e.hovered[0]===t.id,selected:e.interactive.includes(t.id)})),{select:Jn.makeInteractive,deselect:Jn.unmakeInteractive}),Jr=e=>{class t extends o.Component{constructor(){super(...arguments),this.select=e=>{e.which&&1!==e.which||!this.props.hovered||(this.props.selected?this.props.deselect(this.props.id):this.props.select(this.props.id))}}componentDidMount(){(0,lo.findDOMNode)(this).addEventListener("pointerdown",this.select)}componentWillUnmount(){(0,lo.findDOMNode)(this).removeEventListener("pointerdown",this.select)}render(){const{hovered:t,selected:n,select:r,deselect:s,...i}=this.props;return o.createElement(e,{...i})}}return Kr(t)};function Qr(e,t=0){let n;return function(...o){const r=this;clearTimeout(n),n=window.setTimeout((()=>e.apply(r,o)),t>0?t:300)}}const es={offset:new I},ts=(0,io.Ng)(((e,t)=>({movable:e.selected.includes(t.id)&&!e.resizing.includes(t.id)&&!e.connecting.length,moving:e.moving.includes(t.id),zoomFactor:e.editor.zoomFactor,selectionBoxActive:e.editor.selectionBoxActive})),{start:Jn.startMoving,move:Jn.move,end:Jn.endMoving}),ns=e=>{class t extends o.Component{constructor(){super(...arguments),this.state=es,this.moveWindow={x:0,y:0},this.move=(e,t)=>{const{zoomFactor:n=1}=this.props;e=10*Math.round(e/10),t=10*Math.round(t/10),0===e&&0===t||(this.setState((o=>({offset:o.offset.add(e*n,t*n)}))),this.moveWindow={x:this.moveWindow.x+e,y:this.moveWindow.y+t},this.debouncedMove(this.moveWindow))},this.debouncedMove=Qr((()=>{this.props.move(this.moveWindow),this.moveWindow={x:0,y:0}}),2),this.onPointerDown=e=>{const{zoomFactor:t=1}=this.props;if(e.which&&1!==e.which)return;const n=Rr(e);this.setState({offset:new I(n.clientX,n.clientY)}),ko()({tablet:!0})?(document.addEventListener("touchmove",this.onPointerMove),document.addEventListener("touchend",this.onPointerUp,{once:!0})):(document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp,{once:!0})),setTimeout((()=>!this.props.movable&&this.onPointerUp()),0)},this.onPointerMove=e=>{const{zoomFactor:t=1}=this.props,n=Rr(e),o=(n.clientX-this.state.offset.x)/t,r=(n.clientY-this.state.offset.y)/t;this.props.moving?this.move(o,r):(Math.abs(o)>5||Math.abs(r)>5)&&this.props.start()},this.onPointerUp=()=>{ko()({tablet:!0})?document.removeEventListener("touchmove",this.onPointerMove):document.removeEventListener("pointermove",this.onPointerMove),this.props.moving&&(this.setState(es),this.props.end())}}componentDidMount(){const e=(0,lo.findDOMNode)(this);e.style.cursor="move";const t=e.firstChild;ko()({tablet:!0})?t.addEventListener("touchstart",this.onPointerDown):t.addEventListener("pointerdown",this.onPointerDown)}componentDidUpdate(e,t,n){const o=(0,lo.findDOMNode)(this);this.props.selectionBoxActive?o.style.cursor="default":o.style.cursor="move"}componentWillUnmount(){const e=(0,lo.findDOMNode)(this).firstChild;ko()({tablet:!0})?(e.removeEventListener("touchstart",this.onPointerDown),document.removeEventListener("touchmove",this.onPointerMove),document.removeEventListener("touchend",this.onPointerUp)):(e.removeEventListener("pointerdown",this.onPointerDown),document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp))}render(){const{movable:t,zoomFactor:n,start:r,move:s,end:i,...l}=this.props;return o.createElement(e,{...l})}}return ts(t)},os={offset:new I,endpoint:null},rs=(0,io.Ng)(((e,t)=>({path:e.elements[t.id].path,reconnecting:!!e.reconnecting[t.id],disabled:!!Object.keys(e.reconnecting).length||!!Object.keys(e.connecting).length,selectionBoxActive:e.editor.selectionBoxActive})),{start:to.startReconnecting,reconnect:to.reconnect}),ss=It.line.attrs({strokeWidth:15,strokeOpacity:0,stroke:"black"})`
  cursor: move;
`,is=e=>{class t extends o.Component{constructor(){super(...arguments),this.state=os,this.onPointerDown=e=>{if(e.nativeEvent.which&&1!==e.nativeEvent.which)return;const t=e.currentTarget.dataset.endpoint;this.setState({endpoint:t,offset:new I(e.clientX,e.clientY)}),ko()({tablet:!0})?(document.addEventListener("touchmove",this.onPointerMove),document.addEventListener("touchend",this.onPointerUp,{once:!0}),document.addEventListener("pointerup",this.onPointerUp,{once:!0})):(document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp,{once:!0}))},this.onPointerMove=e=>{const t=Rr(e),n=t.clientX-this.state.offset.x,o=t.clientY-this.state.offset.y,{endpoint:r}=this.state;!this.props.reconnecting&&r&&(Math.abs(n)>5||Math.abs(o)>5)&&this.props.start(r)},this.onPointerUp=e=>{e instanceof PointerEvent?(ko()({tablet:!0})?document.removeEventListener("touchmove",this.onPointerMove):document.removeEventListener("pointermove",this.onPointerMove),this.cancel()):Ur(e)},this.cancel=()=>{this.props.reconnecting&&this.setState(os)},this.composePath=e=>{const t=new No(e),n=Math.min(t.length/2,40);return[e[0],t.position(n)]}}componentWillUnmount(){ko()({tablet:!0})?(document.removeEventListener("touchmove",this.onPointerMove),document.removeEventListener("touchend",this.onPointerUp),document.removeEventListener("pointerup",this.onPointerUp)):(document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp)),this.cancel()}render(){const{path:t,reconnecting:n,start:r,reconnect:s,disabled:i,selectionBoxActive:l,...a}=this.props,c=this.composePath(t),d=this.composePath([...t].reverse());return o.createElement(e,{...a},a.children,o.createElement(ss,{x1:c[0].x,y1:c[0].y,x2:c[1].x,y2:c[1].y,onPointerDown:this.onPointerDown,"data-endpoint":"target",pointerEvents:l||i?"none":"all"}),o.createElement(ss,{x1:d[0].x,y1:d[0].y,x2:d[1].x,y2:d[1].y,onPointerDown:this.onPointerDown,"data-endpoint":"source",pointerEvents:l||i?"none":"all"}))}}return rs(t)},ls={resizing:!1,offset:new I},as=(0,io.Ng)((e=>({zoomFactor:e.editor.zoomFactor,selectionBoxActive:e.editor.selectionBoxActive})),{start:Jn.startResizing,resize:Jn.resize,end:Jn.endResizing}),cs={width:15,height:15,transform:"translate(-10, -10)",fill:"none"},ds=It.rect.attrs({x:"100%",y:"100%",...cs})`
  cursor: nwse-resize;
`,hs=It.rect.attrs({x:"0%",y:"0%",...cs})`
  cursor: nwse-resize;
`,ps=It.rect.attrs({x:"100%",y:"0%",...cs})`
  cursor: nesw-resize;
`,us=It.rect.attrs({x:"0%",y:"100%",...cs})`
  cursor: nesw-resize;
`,ms=e=>t=>{class n extends o.Component{constructor(){super(...arguments),this.state=ls,this.resize=(t,n,o)=>{t=10*Math.round(t/10),n=10*Math.round(n/10),e&&e.preventX&&(t=0),e&&e.preventY&&(n=0),0===t&&0===n||(this.setState((e=>({offset:e.offset.add(t,n)}))),this.props.resize({width:t,height:n},o,this.props.id))},this.onPointerDown=(e,t)=>{if(e.nativeEvent.which&&1!==e.nativeEvent.which)return;let n=new I;switch(t){case $.BOTTOMRIGHT:n=new I(e.clientX,e.clientY);break;case $.TOPLEFT:n=new I(-e.clientX,-e.clientY);break;case $.TOPRIGHT:n=new I(e.clientX,-e.clientY);break;case $.BOTTOMLEFT:n=new I(-e.clientX,e.clientY)}this.setState({resizing:!0,offset:n.scale(1/this.props.zoomFactor)}),this.props.start(this.props.id);const o=e.currentTarget;o.setPointerCapture(e.pointerId),o.addEventListener("pointermove",this.onPointerMove),o.setAttribute("resizeFrom",t),o.addEventListener("pointerup",this.onPointerUp,{once:!0})},this.onPointerMove=e=>{const t=e.currentTarget.getAttribute("resizeFrom");let n=0,o=0;switch(t){case $.BOTTOMRIGHT:n=e.clientX/this.props.zoomFactor-this.state.offset.x,o=e.clientY/this.props.zoomFactor-this.state.offset.y;break;case $.TOPLEFT:n=-e.clientX/this.props.zoomFactor-this.state.offset.x,o=-e.clientY/this.props.zoomFactor-this.state.offset.y;break;case $.TOPRIGHT:n=e.clientX/this.props.zoomFactor-this.state.offset.x,o=-e.clientY/this.props.zoomFactor-this.state.offset.y;break;case $.BOTTOMLEFT:n=-e.clientX/this.props.zoomFactor-this.state.offset.x,o=e.clientY/this.props.zoomFactor-this.state.offset.y}this.resize(n,o,t),e.stopPropagation()},this.onPointerUp=e=>{const t=e.currentTarget;t&&(t.releasePointerCapture(e.pointerId),t.removeEventListener("pointermove",this.onPointerMove),this.setState(ls),this.props.end(this.props.id),e.stopPropagation())}}componentWillUnmount(){document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp)}render(){const{start:e,resize:n,end:r,selectionBoxActive:s,...i}=this.props;return o.createElement(t,{...i},i.children,o.createElement(ds,{onPointerDown:e=>{this.onPointerDown(e,$.BOTTOMRIGHT)},pointerEvents:s?"none":"all"}),o.createElement(hs,{onPointerDown:e=>{this.onPointerDown(e,$.TOPLEFT)},pointerEvents:s?"none":"all"}),o.createElement(ps,{onPointerDown:e=>{this.onPointerDown(e,$.TOPRIGHT)},pointerEvents:s?"none":"all"}),o.createElement(us,{onPointerDown:e=>{this.onPointerDown(e,$.BOTTOMLEFT)},pointerEvents:s?"none":"all"}))}}return as(n)},gs=(0,io.Ng)(((e,t)=>({hovered:e.hovered[0]===t.id,selected:e.selected.includes(t.id)})),{select:Jn.select,deselect:Jn.deselect}),ys=e=>{class t extends o.Component{constructor(){super(...arguments),this.select=e=>{e.which&&1!==e.which||!this.props.hovered||(e.shiftKey&&this.props.selected?this.props.deselect(this.props.id):this.props.selected||(e.shiftKey||this.props.deselect(),this.props.select(this.props.id)))}}componentDidMount(){(0,lo.findDOMNode)(this).addEventListener("pointerdown",this.select)}componentWillUnmount(){(0,lo.findDOMNode)(this).removeEventListener("pointerdown",this.select)}render(){const{hovered:t,selected:n,select:r,deselect:s,...i}=this.props;return o.createElement(e,{...i})}}return gs(t)},bs=It.g.attrs((e=>({...e})))`
  transition: all 180ms ease-in-out;
  pointer-events: all;

  path {
    pointer-events: all;
    fill: var(--apollon-primary-contrast);
  }
  rect {
    pointer-events: all;
    fill: var(--apollon-background);
    stroke: var(--apollon-gray);
  }
  :hover {
    transform: translate(0px, -30px);
  }
  :active {
    transform: translate(0px, -30px);
  }
  :hover rect {
    fill: var(--apollon-gray);
    stroke: var(--apollon-gray-variant);
  }
  :active rect {
    fill: var(--apollon-gray);
    stroke: var(--apollon-gray-variant);
  }
`,fs=({children:e,...t})=>o.createElement(bs,{...t},o.createElement("rect",{height:30,width:30,rx:"0.25rem",ry:"0.25rem"}),e),Es=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement("path",{d:"M2.39999 13.6H3.53999L11.36 5.77999L10.22 4.63999L2.39999 12.46V13.6ZM0.799988 15.2V11.8L11.36 1.25999C11.52 1.11332 11.6967 0.999988 11.89 0.919988C12.0833 0.839988 12.2867 0.799988 12.5 0.799988C12.7133 0.799988 12.92 0.839988 13.12 0.919988C13.32 0.999988 13.4933 1.11999 13.64 1.27999L14.74 2.39999C14.9 2.54665 15.0167 2.71999 15.09 2.91999C15.1633 3.11999 15.2 3.31999 15.2 3.51999C15.2 3.73332 15.1633 3.93665 15.09 4.12999C15.0167 4.32332 14.9 4.49999 14.74 4.65999L4.19999 15.2H0.799988ZM10.78 5.21999L10.22 4.63999L11.36 5.77999L10.78 5.21999Z"})),Cs=e=>o.createElement("svg",{...e,height:20,width:20},o.createElement("path",{d:"M4.66666 14C4.29999 14 3.9861 13.8694 3.72499 13.6083C3.46388 13.3472 3.33332 13.0333 3.33332 12.6667V4H2.66666V2.66667H5.99999V2H9.99999V2.66667H13.3333V4H12.6667V12.6667C12.6667 13.0333 12.5361 13.3472 12.275 13.6083C12.0139 13.8694 11.7 14 11.3333 14H4.66666ZM11.3333 4H4.66666V12.6667H11.3333V4ZM5.99999 11.3333H7.33332V5.33333H5.99999V11.3333ZM8.66666 11.3333H9.99999V5.33333H8.66666V11.3333Z"})),vs={},ws=(0,io.Ng)(((e,t)=>({hovered:e.hovered[0]===t.id,selected:e.selected.includes(t.id)})),{updateStart:Jn.updateStart,deleteElement:Jn.delete,getElementById:Jn.getById,getRelationshipById:to.getById}),xs=e=>{class t extends o.Component{constructor(){super(...arguments),this.state=vs,this.onStartUpdate=()=>{this.props.updateStart(this.props.id)},this.onDelete=()=>{this.props.deleteElement(this.props.id)}}componentDidMount(){(0,lo.findDOMNode)(this).addEventListener("dblclick",this.onStartUpdate)}componentWillUnmount(){(0,lo.findDOMNode)(this).removeEventListener("dblclick",this.onStartUpdate)}findRightmostPoint(e){let t;for(const n of e)(void 0===t||n.x>t.x)&&(t=n);return t}getContextActionBaseCoordinates(e){if(!Dt.isUMLRelationship(e))return{x:e.bounds.width,y:-30};const t=e,n=this.findRightmostPoint(t.path);return{x:(n?.x??0)-40,y:(n?.y??0)-30}}render(){const{updateStart:t,deleteElement:n,getElementById:r,getRelationshipById:s,hovered:i,selected:l,...a}=this.props,c=r(a.id),d=s(a.id),h=this.getContextActionBaseCoordinates(c||d);return o.createElement(e,{...a},o.createElement(fs,{style:{opacity:l?1:0,transform:`translate(${h.x}px, ${l?h.y-10:h.y}px)`},onClick:this.onStartUpdate},o.createElement(Es,{x:7,y:7})),o.createElement(fs,{style:{opacity:l?1:0,transform:`translate(${h.x}px, ${l?h.y-50:h.y}px)`},onClick:this.onDelete},o.createElement(Cs,{x:7,y:7})))}}return ws(t)},ks=(0,io.Ng)(((e,t)=>({features:e.editor.features,type:e.elements[t.id].type,readonly:e.editor.readonly,view:e.editor.view,mode:e.editor.mode}))),Ms=e=>{const t={...Qe,...yn}[e.type].features,n=e.type in et?Vr:Fr,o=[];if(e.mode===Wn.Assessment)o.push(Wo,xs,ys,qr);else if(e.readonly)o.push(ys,qr);else if(e.view===Vn.Exporting||e.view===Vn.Highlight)o.push(Jr,qr);else if(e.view===Vn.Modelling){if(e.features.hoverable&&t.hoverable&&o.push(qr),t.reconnectable&&o.push(is),e.features.selectable&&t.selectable&&o.push(ys),e.features.movable&&t.movable&&o.push(ns),e.features.resizable&&t.resizable){const e={preventY:"WIDTH"===t.resizable,preventX:"HEIGHT"===t.resizable};o.push(ms(e))}e.features.connectable&&t.connectable&&o.push(Zr),e.features.updatable&&t.updatable&&o.push(xs),e.features.droppable&&t.droppable&&o.push(_r)}return{component:(0,go.Zz)(...o.reverse())(n)}};class Ts extends o.Component{constructor(){super(...arguments),this.state=Ms(this.props)}componentDidUpdate(e){e!==this.props&&this.setState(Ms(this.props))}render(){const{component:e}=this.state;return o.createElement(e,{id:this.props.id,child:Ps})}}const Ps=ks(Ts),Ss=It.svg.attrs({tabIndex:-1})`
  position: ${({isStatic:e})=>e?"static":"absolute"};
  top: 0;
  left: 0;
  min-width: 100%;
  min-height: 100%;
  outline: none;
  overflow: visible;
  transform-origin: center center;
  fill: white;
`,Ns=(0,io.Ng)((e=>({diagram:e.diagram,isStatic:e.editor.readonly,elements:e.elements})),null,null,{forwardRef:!0});class Ds extends o.Component{constructor(){super(...arguments),this.layer=(0,o.createRef)(),this.origin=()=>{if(!this.layer.current)return new I;const e=this.layer.current.getBoundingClientRect();return new I(e.left+e.width/2,e.top+e.height/2)},this.snap=e=>{const t=this.origin();return e.subtract(t).round().add(t)}}render(){const{elements:e,diagram:t,isStatic:n}=this.props;let r=0,s=0;if(n){for(const t of Object.values(e))if(Dt.isUMLRelationship(t))for(const e of t.path)e.x<r&&(r=e.x),e.y<s&&(s=e.y);r=Math.abs(Math.round(r)),s=Math.abs(Math.round(s))}return o.createElement(mo,null,o.createElement(Ss,{id:"modeling-editor-canvas",width:t.bounds.width+r,height:t.bounds.height+s,isStatic:n,ref:this.layer,"data-cy":"modeling-editor-canvas"},o.createElement("g",{style:{transformOrigin:"top left",transform:"translate("+r/2+"px,"+s/2+"px)"}},this.layer.current&&o.createElement("svg",{x:"50%",y:"50%"},t.ownedElements.map((e=>o.createElement(Ps,{key:e,id:e}))),t.ownedRelationships.map((e=>o.createElement(Ps,{key:e,id:e}))),o.createElement(So,null)))))}}const Ls=Ns(Ds);class As{}As.changeView=e=>({type:Gn.CHANGE_VIEW,payload:{view:e},undoable:!1}),As.setZoomFactor=e=>({type:Gn.SET_ZOOM_FACTOR,payload:{zoomFactor:e},undoable:!1}),As.setSelectionBoxActive=e=>({type:Gn.SET_SELECTION_BOX,payload:{selectionBoxActive:e},undoable:!1});const Os=(e,t,n)=>Math.max(t,Math.min(e,n)),Is=It.button`
  background: var(--apollon-background);
  color: var(--apollon-primary-contrast);
  border: 1px solid var(--apollon-gray);
  margin: 0;
  outline: none;
  border-radius: 0.25rem;
  width: 2.25em;
  height: 2.25em;
  display: flex;
  align-items: center;
  justify-content: center;

  :hover {
    background-color: var(--apollon-gray);
    border-color: var(--apollon-gray-variant);
  }

  :active {
    background-color: var(--apollon-gray);
    border-color: var(--apollon-gray-variant);
  }
`,Bs=e=>{const{min:t=.5,max:n=5,step:r=.5,value:s,onChange:i,style:l}=e;return o.createElement("div",{style:{display:"flex",flexDirection:"column",position:"absolute",right:"0.75em",bottom:"0.75em",...l}},o.createElement(Is,{style:{marginBottom:"0.5em"},onClick:()=>i(Os(s+r,t,n))},"+"),o.createElement(Is,{onClick:()=>i(Os(s-r,t,n))},"-"))},zs=It.div`
  display: block;
  overflow: auto;

  position: relative;
  min-height: inherit;
  max-height: inherit;

  width: ${e=>Os(100/e.scale,100,200)}%;
  height: ${e=>Os(100/e.scale,100,200)}%;

  -ms-overflow-style: -ms-autohiding-scrollbar;
  border: ${1}px solid ${e=>e.theme.color.gray};
  background-position: calc(50% + ${24.5}px)
    calc(50% + ${24.5}px);
  background-size:
    ${50}px ${50}px,
    ${50}px ${50}px,
    ${10}px ${10}px,
    ${10}px ${10}px;
  background-image: linear-gradient(to right, ${e=>e.theme.color.grid} 1px, transparent 1px),
    linear-gradient(to bottom, ${e=>e.theme.color.grid} 1px, transparent 1px),
    linear-gradient(to right, ${e=>e.theme.color.gray} 1px, transparent 1px),
    linear-gradient(to bottom, ${e=>e.theme.color.gray} 1px, transparent 1px);
  background-repeat: repeat;
  background-attachment: local;
  transition:
    transform 500ms,
    width 500ms,
    height 500ms;
  transform-origin: top left;
  transform: scale(${e=>e.scale??1});
`,$s=(0,io.Ng)((e=>({moving:[...e.moving],connecting:e.connecting.length>0,reconnecting:Object.keys(e.reconnecting).length>0,scale:e.editor.zoomFactor})),{move:Jn.move,setZoomFactor:As.setZoomFactor}),Fs=100;class Us extends o.Component{constructor(){super(...arguments),this.state={scrollingDisabled:!1,gestureStartZoomFactor:1,isMobile:ko()({tablet:!0})},this.editor=(0,o.createRef)(),this.zoomContainer=(0,o.createRef)(),this.customScrolling=e=>{const{scale:t=1}=this.props;if(this.editor.current){const n=this.editor.current.getBoundingClientRect(),o=e.touches[e.touches.length-1],r=o.clientX*t<n.x+Fs?-5:o.clientX*t>n.x+n.width-Fs?5:0,s=o.clientY*t<n.y+Fs?-5:o.clientY*t>n.y+n.height-Fs?5:0;this.editor.current.scrollBy(r,s),this.props.moving&&this.props.move({x:r,y:s},this.props.moving)}e.preventDefault(),e.stopPropagation()},this.activateScrolling=e=>{e&&(e.style.overflow="auto",document.body.style.overflowY="auto",e.style.overscrollBehavior="auto",this.setState({scrollingDisabled:!1}))},this.deactivateScrolling=e=>{e&&(e.style.overflow="hidden",document.body.style.overflowY="hidden",e.style.overscrollBehavior="none",this.setState({scrollingDisabled:!0}))}}componentDidMount(){window.addEventListener("wheel",(e=>{e.ctrlKey&&e.preventDefault()}),{passive:!1})}componentDidUpdate(e,t,n){if(this.state.isMobile&&this.editor.current){const{moving:e,connecting:t,reconnecting:n}=this.props,o=e.length>0||t||n;o&&!this.state.scrollingDisabled?this.deactivateScrolling(this.editor.current):!o&&this.state.scrollingDisabled&&this.activateScrolling(this.editor.current)}}render(){const{moving:e,connecting:t,reconnecting:n,scale:r=1,...s}=this.props;return this.state.isMobile?o.createElement("div",{ref:this.zoomContainer,style:{width:"100%",overflow:r>1?"auto":"hidden"}},o.createElement(zs,{ref:this.editor,...s,onTouchMove:this.customScrolling,scale:r}),o.createElement(Bs,{value:r,onChange:e=>this.props.setZoomFactor(e),min:.5,max:5,step:.2})):o.createElement("div",{ref:this.zoomContainer,style:{width:"100%",overflow:r>1?"auto":"hidden"}},o.createElement(zs,{ref:this.editor,...s,scale:r}),o.createElement(Bs,{value:r,onChange:e=>this.props.setZoomFactor(e),min:.5,max:5,step:.2}))}}const Rs=$s(Us);var js,Hs;!function(e){e.COPY="@@copy/COPY",e.PASTE="@@copy/PASTE"}(js||(js={}));class Ws{static transformElementsForCopy(e){const t=e.filter((t=>!t.owner||e.every((e=>e.id!==t.owner)))),n={};return{copiedElements:t.reduce(((t,o)=>{o.owner=null,o.bounds.x=o.bounds.x+10*Ws.pasteCounter,o.bounds.y=o.bounds.y+10*Ws.pasteCounter;const r=En(o,e);return n[o.id]=r[0].id,t.concat(...r)}),[]).map((e=>({...e}))),cloneMap:n}}static transformRelationshipsForCopy(e,t){return e.filter((t=>!t.owner||e.every((e=>e.id!==t.owner)))).reduce(((e,n)=>{n.owner=null,n.bounds.x=n.bounds.x+10*Ws.pasteCounter,n.bounds.y=n.bounds.y+10*Ws.pasteCounter,n.source.element=t[n.source.element],n.target.element=t[n.target.element];const o=n.path.map((e=>({x:e.x+10,y:e.y+10})));n.path=[o[0],o[1],...o.slice(2)];const r=[n.cloneRelationship()];return e.concat(...r)}),[]).map((e=>({...e})))}}Ws.pasteCounter=0,Ws.copy=e=>(t,n)=>{Ws.pasteCounter=0;const{elements:o,selected:r}=n(),s=fn(e?Array.isArray(e)?e:[e]:r,n().elements),i=s.map((e=>Jn.get(o[e]))).filter(Qn);return n().editor.enableCopyPasteToClipboard?void navigator.clipboard.writeText(JSON.stringify(i)):t({type:js.COPY,payload:s,undoable:!1})},Ws.paste=()=>(e,t)=>{if(Ws.pasteCounter++,t().editor.enableCopyPasteToClipboard)navigator.clipboard.readText().then((e=>{const n=JSON.parse(e),o=t().diagram.type,r=n.map((e=>Jn.get(e))).filter(Qn).filter((e=>e.type in A[o]));return Ws.transformElementsForCopy(r)})).then((({copiedElements:n})=>{e(Jn.create(n)),e(Jn.deselect()),e(Jn.select(bn(n.map((e=>e.id)),t().elements)))}));else{const{copy:n}=t();e({type:js.PASTE,payload:{},undoable:!1});const{elements:o}=t(),r=n.map((e=>Jn.get(o[e]))).filter(Qn),s=n.map((e=>to.get(o[e]))).filter(Qn).filter((e=>e.source&&e.target&&n.includes(e.source.element)&&n.includes(e.target.element))),{copiedElements:i,cloneMap:l}=Ws.transformElementsForCopy(r);e(Jn.create(i)),e(Jn.deselect());const a=Ws.transformRelationshipsForCopy(s,l);e(Jn.create(a)),e(Jn.select(bn([...i,...a].map((e=>e.id)),t().elements)))}},function(e){e.UNDO="@@undo/UNDO",e.REDO="@@undo/REDO"}(Hs||(Hs={}));class Vs{}Vs.undo=()=>({type:Hs.UNDO,payload:{},undoable:!1}),Vs.redo=()=>({type:Hs.REDO,payload:{},undoable:!1});const Gs=(0,go.Zz)(fo,(0,io.Ng)((e=>({readonly:e.editor.readonly,mode:e.editor.mode})),{undo:Vs.undo,redo:Vs.redo,copy:Ws.copy,paste:Ws.paste,select:Jn.select,deselect:Jn.deselect,startMoving:Jn.startMoving,move:Jn.move,endMoving:Jn.endMoving,delete:Jn.delete}));class Ys extends o.Component{constructor(){super(...arguments),this.pointerDown=e=>{e.target!==e.currentTarget||e.shiftKey||this.props.deselect()},this.keyDown=e=>{switch(e.key){case"ArrowUp":e.preventDefault(),e.repeat||this.props.startMoving(),this.props.move({x:0,y:-10});break;case"ArrowRight":e.preventDefault(),e.repeat||this.props.startMoving(),this.props.move({x:10,y:0});break;case"ArrowDown":e.preventDefault(),e.repeat||this.props.startMoving(),this.props.move({x:0,y:10});break;case"ArrowLeft":e.preventDefault(),e.repeat||this.props.startMoving(),this.props.move({x:-10,y:0});break;case"Backspace":case"Delete":e.preventDefault(),this.props.delete();break;case"Escape":e.preventDefault(),this.props.deselect()}if(e.metaKey||e.ctrlKey)switch(e.key){case"a":e.preventDefault(),this.props.select();break;case"c":e.preventDefault(),this.props.copy();break;case"v":e.preventDefault(),this.props.paste();break;case"z":e.preventDefault(),e.shiftKey?this.props.redo():this.props.undo()}},this.keyUp=e=>{switch(e.key){case"ArrowUp":case"ArrowRight":case"ArrowDown":case"ArrowLeft":this.props.endMoving(void 0,!0)}}}componentDidMount(){const{layer:e}=this.props.canvas;this.props.readonly||this.props.mode===Wn.Assessment||(e.addEventListener("keydown",this.keyDown),e.addEventListener("keyup",this.keyUp)),e.addEventListener("pointerdown",this.pointerDown)}render(){return null}}const Zs=Gs(Ys),_s=It.div.attrs((({position:e})=>({style:{transform:`translate(${e.x}px, ${e.y}px)`}})))`
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  pointer-events: none;
  margin: -5px;
  font-family: ${e=>e.theme.font.family}, sans-serif;
  font-size: ${e=>e.theme.font.size}px;

  svg {
    fill-opacity: 0.7;
  }
  text {
    fill: black;
    fill-opacity: 0.7;
  }
`,{Consumer:Xs,Provider:qs}=(0,o.createContext)(null),Ks=e=>(0,o.forwardRef)(((t,n)=>o.createElement(Xs,null,(r=>o.createElement(e,{ref:n,...t,...r}))))),Js={dragging:!1,offset:new I,position:new I,resolve:null,reject:null},Qs=(0,go.Zz)(fo,Ks,(0,io.Ng)((e=>({zoomFactor:e.editor.zoomFactor}))));class ei extends o.Component{constructor(){super(...arguments),this.state=Js,this.ghost=(0,o.createRef)(),this.onDragStart=e=>{const t=e.currentTarget,n=t.getBoundingClientRect(),o=this.props.root.getBoundingClientRect();let r,s;return e instanceof PointerEvent?(r=new I(e.pageX-(n.left-o.x),e.pageY-(n.top-o.y)),s=new I(10*Math.round((e.pageX-r.x)/10),10*Math.round((e.pageY-r.y)/10))):(r=new I(e.targetTouches[0].pageX-(n.left-o.x),e.targetTouches[0].pageY-(n.top-o.y)),s=new I(10*Math.round((e.targetTouches[0].pageX-r.x)/10),10*Math.round((e.targetTouches[0].pageY-r.y)/10))),ko()({tablet:!0})?(document.addEventListener("touchmove",this.onPointerMove),document.addEventListener("touchend",this.cancel,{once:!0})):(document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.cancel,{once:!0})),new Promise(((e,n)=>this.setState({dragging:!0,offset:r,position:s,resolve:e,reject:n},(()=>{this.ghost.current.append(t.cloneNode(!0))}))))},this.onPointerMove=e=>{let t;t=e instanceof PointerEvent?new I(e.pageX-this.state.offset.x,e.pageY-this.state.offset.y):new I(e.targetTouches[0].pageX-this.state.offset.x,e.targetTouches[0].pageY-this.state.offset.y),t.x=10*Math.round(t.x/10),t.y=10*Math.round(t.y/10),this.setState({position:t})},this.onDragEnd=e=>t=>{const{zoomFactor:n=1}=this.props;if(!this.state.dragging)return;const o={owner:e,position:this.state.position.subtract(this.props.canvas.origin().subtract(this.props.root.getBoundingClientRect().x,this.props.root.getBoundingClientRect().y))};o.position.x=10*Math.round(o.position.x/n/10),o.position.y=10*Math.round(o.position.y/n/10),this.state.resolve&&this.state.resolve(o)},this.cancel=()=>{this.state.reject&&this.state.reject(),ko()({tablet:!0})?document.removeEventListener("touchmove",this.onPointerMove):document.removeEventListener("pointermove",this.onPointerMove),this.setState(Js)}}render(){const e={onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},{dragging:t,position:n}=this.state;return o.createElement(co,{value:e},this.props.children,(0,lo.createPortal)(t&&o.createElement(_s,{ref:this.ghost,position:n}),this.props.root))}}const ti=Qs(ei),ni=JSON.parse('{"views":{"modelling":"Modellierung","exporting":"Interaktiv","highlight":"Zeige interaktive Elemente"},"sidebar":{"classAttribute":"+ attribut: Typ","classMethod":"+ methode()","enumAttribute":"Fall","objectAttribute":"attribut = Wert"},"popup":{"attributes":"Attribute","methods":"Methoden","relationship":"Beziehung","association":"Assoziation","multiplicity":"Multiziplität","role":"Rolle","messages":"Nachrichten","condition":"Bedingungen","tokens":"Tokens","capacity":"Kapazität"},"assessment":{"assessment":"Bewertung für","score":"Punkte","feedback":"Feedback","feedbackPlaceholder":"Du kannst hier Feedback abgeben...","additionalFeedbackPlaceholder":"Du kannst hier zusätzliches Feedback abgeben..."},"packages":{"ClassDiagram":{"Package":"Paket","Class":"Klasse","AbstractClass":"Abstrakt","Interface":"Schnittstelle","Enumeration":"Aufzählung","ClassAttribute":"Attribut","ClassMethod":"Methode","ClassAggregation":"Aggregation","ClassBidirectional":"Assoziation (bidirektional)","ClassComposition":"Komposition","ClassDependency":"Abhängigkeit","ClassInheritance":"Vererbung","ClassRealization":"Realisierung","ClassUnidirectional":"Assoziation (unidirektional)"},"ObjectDiagram":{"ObjectName":"Objekt","ObjectAttribute":"Attribut","ObjectMethod":"Methode","ObjectLink":"Beziehung"},"ActivityDiagram":{"Activity":"Aktivität","ActivityActionNode":"Aktion","ActivityFinalNode":"Endknoten","ActivityForkNode":"Verzweigungsknoten","ActivityInitialNode":"Startknoten","ActivityMergeNode":"Bedingung","ActivityObjectNode":"Objekt","ActivityControlFlow":"Kontrollfluss"},"UseCaseDiagram":{"UseCase":"Anwendungsfall","UseCaseActor":"Akteur","UseCaseSystem":"System","UseCaseAssociation":"Assoziation","UseCaseExtend":"Extend","UseCaseGeneralization":"Generalisierung","UseCaseInclude":"Include"},"CommunicationDiagram":{"ObjectName":"Objekt","ObjectAttribute":"Attribut","ObjectMethod":"Methode","CommunicationLink":"Kommunikation"},"ComponentDiagram":{"Component":"Komponente","Subsystem":"Teilsystem","ComponentDependency":"Abhängigkeit","ComponentInterface":"Schnittstelle","ComponentInterfaceProvided":"Bereitgestellte Schnittstelle","ComponentInterfaceRequired":"Verwendete Schnittstelle"},"DeploymentDiagram":{"DeploymentNode":"Knoten","DeploymentComponent":"Komponente","DeploymentArtifact":"Artefakt","DeploymentInterface":"Schnittstelle","DeploymentInterfaceProvided":"Bereitgestellte Schnittstelle","DeploymentInterfaceRequired":"Verwendete Schnittstelle","DeploymentAssociation":"Deployment Verbindung","DeploymentDependency":"Deployment Abhängigkeit"},"PetriNet":{"PetriNetPlace":"Platz","PetriNetTransition":"Transition"},"ReachabilityGraph":{"ReachabilityGraphIsInitialMarking":"Ist Anfangsmarkierung","ReachabilityGraphMarking":"Markierung"},"SyntaxTree":{"SyntaxTreeTerminal":"Terminal","SyntaxTreeNonterminal":"Nichtterminal","SyntaxTreeLink":"Verbindung"},"Flowchart":{"FlowchartTerminal":"Terminator","FlowchartDecision":"Entscheidung","FlowchartProcess":"Operation","FlowchartFunctionCall":"Unterprogramm ausführen","FlowchartInputOutput":"Ein- und Ausgabe","FlowchartFlowline":"Verbindung"},"ColorLegend":{"ColorLegend":"Farbe Beschreibung"},"BPMN":{"BPMNTask":"Task","BPMNUserTask":"User Task","BPMNSendTask":"Send Task","BPMNReceiveTask":"Receive Task","BPMNManualTask":"Manual Task","BPMNBusinessRuleTask":"Business Rule Task","BPMNScriptTask":"Script Task","BPMNSubprocess":"Sub-Prozess","BPMNTransaction":"Transaktion","BPMNCallActivity":"Aufruf-Aktivität","BPMNAnnotation":"Annotation","BPMNStartEvent":"Start-Ereignis","BPMNMessageStartEvent":"Message Start Event","BPMNTimerStartEvent":"Timer Start Event","BPMNConditionalStartEvent":"Conditional Start Event","BPMNSignalStartEvent":"Signal Start Event","BPMNIntermediateEvent":"Zwischenereignis","BPMNMessageIntermediateCatchEvent":"Message Intermediate Catch Event","BPMNMessageIntermediateThrowEvent":"Message Intermediate Throw Event","BPMNTimerIntermediateCatchEvent":"Timer Intermediate Catch Event","BPMNEscalationIntermediateThrowEvent":"Escalation Intermediate Throw Event","BPMNConditionalIntermediateCatchEvent":"Conditional Intermediate Catch Event","BPMNLinkIntermediateCatchEvent":"Link Intermediate Catch Event","BPMNLinkIntermediateThrowEvent":"Link Intermediate Throw Event","BPMNCompensationIntermediateThrowEvent":"Compensation Intermediate Throw Event","BPMNSignalIntermediateCatchEvent":"Signal Intermediate Catch Event","BPMNSignalIntermediateThrowEvent":"Signal Intermediate Throw Event","BPMNEndEvent":"End-Ereignis","BPMNMessageEndEvent:":"Message End Event","BPMNEscalationEndEvent":"Escalation End Event","BPMNErrorEndEvent":"Error End Event","BPMNCompensationEndEvent":"Compensation End Event","BPMNSignalEndEvent":"Signal End Event","BPMNTerminateEndEvent":"Terminate End Event","BPMNGateway":"Gateway","BPMNComplexGateway":"Komplex","BPMNEventBasedGateway":"Ereignis-basiert","BPMNExclusiveGateway":"Exklusiv","BPMNInclusiveGateway":"Inklusiv","BPMNParallelGateway":"Parallel","BPMNConversation":"Konversation","BPMNCallConversation":"Aufruf-Konversation","BPMNSequenceFlow":"Sequenz","BPMNMessageFlow":"Nachricht","BPMNAssociationFlow":"Assoziation","BPMNDataAssociationFlow":"Daten-Assoziation","BPMNDataObject":"Datenobjekt","BPMNPool":"Pool","BPMNSwimlane":"Bahn","BPMNSwimlanes":"Bahnen","BPMNGroup":"Gruppe"}}}'),oi=JSON.parse('{"views":{"modelling":"Modeling","exporting":"Interactive","highlight":"Show interactive elements"},"sidebar":{"classAttribute":"+ attribute: Type","classMethod":"+ method()","enumAttribute":"Case","objectAttribute":"attribute = value"},"popup":{"attributes":"Attributes","methods":"Methods","relationship":"Relationship","association":"Association","multiplicity":"Multiplicity","role":"Role","messages":"Messages","condition":"Conditions","tokens":"Tokens","capacity":"Capacity"},"assessment":{"assessment":"Assessment for","score":"Points","feedback":"Feedback","feedbackPlaceholder":"You can enter feedback here...","additionalFeedbackPlaceholder":"You can enter additional feedback here..."},"packages":{"ClassDiagram":{"Package":"Package","Class":"Class","AbstractClass":"Abstract","Interface":"Interface","Enumeration":"Enumeration","ClassAttribute":"Attribute","ClassMethod":"Method","ClassAggregation":"Aggregation","ClassBidirectional":"Association (bidirectional)","ClassComposition":"Composition","ClassDependency":"Dependency","ClassInheritance":"Inheritance","ClassRealization":"Realization","ClassUnidirectional":"Association (unidirectional)"},"ObjectDiagram":{"ObjectName":"Object","ObjectAttribute":"Attribute","ObjectMethod":"Method","ObjectLink":"Relationship"},"ActivityDiagram":{"Activity":"Activity","ActivityActionNode":"Action","ActivityFinalNode":"Final Node","ActivityForkNode":"Fork Node","ActivityInitialNode":"Initial Node","ActivityMergeNode":"Condition","ActivityObjectNode":"Object","ActivityControlFlow":"Control Flow"},"UseCaseDiagram":{"UseCase":"UseCase","UseCaseActor":"Actor","UseCaseSystem":"System","UseCaseAssociation":"Association","UseCaseExtend":"Extend","UseCaseGeneralization":"Generalization","UseCaseInclude":"Include"},"CommunicationDiagram":{"ObjectName":"Object","ObjectAttribute":"Attribute","ObjectMethod":"Method","CommunicationLink":"Communication Link"},"ComponentDiagram":{"Component":"Component","Subsystem":"Subsystem","ComponentDependency":"Dependency","ComponentInterface":"Interface","ComponentInterfaceProvided":"Provided Interface","ComponentInterfaceRequired":"Required Interface"},"DeploymentDiagram":{"DeploymentNode":"Node","DeploymentComponent":"Component","DeploymentArtifact":"Artifact","DeploymentInterface":"Interface","DeploymentInterfaceProvided":"Provided Interface","DeploymentInterfaceRequired":"Required Interface","DeploymentAssociation":"Deployment Association","DeploymentDependency":"Deployment Dependency"},"PetriNet":{"PetriNetPlace":"Place","PetriNetTransition":"Transition"},"ReachabilityGraph":{"ReachabilityGraphIsInitialMarking":"Is initial marking","ReachabilityGraphMarking":"Marking"},"SyntaxTree":{"SyntaxTreeTerminal":"Terminal","SyntaxTreeNonterminal":"Nonterminal","SyntaxTreeLink":"Link"},"Flowchart":{"FlowchartTerminal":"Terminal","FlowchartDecision":"Decision","FlowchartProcess":"Process","FlowchartFunctionCall":"Function Call","FlowchartInputOutput":"Input Output","FlowchartFlowline":"Flowline"},"ColorLegend":{"ColorLegend":"Color Description"},"BPMN":{"BPMNTask":"Task","BPMNUserTask":"User Task","BPMNSendTask":"Send Task","BPMNReceiveTask":"Receive Task","BPMNManualTask":"Manual Task","BPMNBusinessRuleTask":"Business Rule Task","BPMNScriptTask":"Script Task","BPMNSubprocess":"Subprocess","BPMNTransaction":"Transaction","BPMNCallActivity":"Call Activity","BPMNAnnotation":"Annotation","BPMNStartEvent":"Start Event","BPMNMessageStartEvent":"Message Start Event","BPMNTimerStartEvent":"Timer Start Event","BPMNConditionalStartEvent":"Conditional Start Event","BPMNSignalStartEvent":"Signal Start Event","BPMNIntermediateEvent":"Intermediate Event","BPMNMessageIntermediateCatchEvent":"Message Intermediate Catch Event","BPMNMessageIntermediateThrowEvent":"Message Intermediate Throw Event","BPMNTimerIntermediateCatchEvent":"Timer Intermediate Catch Event","BPMNEscalationIntermediateThrowEvent":"Escalation Intermediate Throw Event","BPMNConditionalIntermediateCatchEvent":"Conditional Intermediate Catch Event","BPMNLinkIntermediateCatchEvent":"Link Intermediate Catch Event","BPMNLinkIntermediateThrowEvent":"Link Intermediate Throw Event","BPMNCompensationIntermediateThrowEvent":"Compensation Intermediate Throw Event","BPMNSignalIntermediateCatchEvent":"Signal Intermediate Catch Event","BPMNSignalIntermediateThrowEvent":"Signal Intermediate Throw Event","BPMNEndEvent":"End Event","BPMNMessageEndEvent":"Message End Event","BPMNEscalationEndEvent":"Escalation End Event","BPMNErrorEndEvent":"Error End Event","BPMNCompensationEndEvent":"Compensation End Event","BPMNSignalEndEvent":"Signal End Event","BPMNTerminateEndEvent":"Terminate End Event","BPMNGateway":"Gateway","BPMNComplexGateway":"Complex","BPMNEventBasedGateway":"Event-based","BPMNInclusiveGateway":"Inclusive","BPMNExclusiveGateway":"Exclusive","BPMNParallelGateway":"Parallel","BPMNConversation":"Conversation","BPMNCallConversation":"Call Conversation","BPMNSequenceFlow":"Sequence","BPMNMessageFlow":"Message","BPMNAssociationFlow":"Association","BPMNDataAssociationFlow":"Data Association","BPMNDataObject":"Data Object","BPMNPool":"Pool","BPMNSwimlane":"Lane","BPMNSwimlanes":"Lanes","BPMNGroup":"Group"}}}'),{Provider:ri,Consumer:si}=(0,o.createContext)(null),ii=Hn.en,li={[Hn.de]:ni,[Hn.en]:oi};class ai extends o.Component{constructor(){super(...arguments),this.translate=e=>{try{let t=li[this.props.locale],n=e.split(".").reduce(((e,t)=>e[t]),t);return n||(t=li[ii],n=e.split(".").reduce(((e,t)=>e[t]),t)),n}catch(e){return console.error(e),""}}}render(){const e={translate:this.translate};return o.createElement(ri,{value:e},this.props.children)}}function ci(e){return function(t){return o.createElement(si,null,(n=>o.createElement(e,{...t,...n})))}}ai.defaultProps={locale:ii};var di,hi=n(7701),pi=n(1265);!function(e){e.LAYOUT="@@layouter/LAYOUT"}(di||(di={}));const ui={},mi={readonly:!1,colorEnabled:!1,enablePopups:!0,enableCopyPasteToClipboard:!1,mode:Wn.Exporting,view:Vn.Modelling,zoomFactor:1,selectionBoxActive:!1,features:{hoverable:!0,selectable:!0,movable:!0,resizable:!0,connectable:!0,updatable:!0,droppable:!0,alternativePortVisualization:!1}},gi=(e,t)=>e&&t&&e.name===t.name&&e.color===t.color,yi={editor:(e=mi,t)=>{switch(t.type){case Gn.CHANGE_VIEW:{const{payload:n}=t;return{...e,view:n.view}}case Gn.SET_ZOOM_FACTOR:{const{payload:n}=t;return{...e,zoomFactor:n.zoomFactor}}case Gn.SET_SELECTION_BOX:{const{payload:n}=t;return{...e,selectionBoxActive:n.selectionBoxActive}}}return e},diagram:(e=new Lt,t)=>{switch(t.type){case Cn.APPEND:{const{payload:n}=t;return{...e,ownedRelationships:[...new Set([...n.ids,...e.ownedRelationships])].reverse()}}case wn.APPEND:{const{payload:n}=t;return e.id!==n.owner?{...e,ownedElements:e.ownedElements.filter((e=>!n.ids.includes(e)))}:{...e,ownedElements:[...new Set([...e.ownedElements,...n.ids])]}}case Cn.BRING_TO_FRONT:{const{ids:n}=t.payload;return{...e,ownedElements:[...e.ownedElements].filter((e=>!n.includes(e))).concat(n)}}case wn.REMOVE:{const{payload:n}=t;return{...e,ownedElements:e.ownedElements.filter((e=>!n.ids.includes(e))),ownedRelationships:e.ownedRelationships.filter((e=>!n.ids.includes(e)))}}case Un.RESIZE:{const{payload:n}=t;if(!n.ids.includes(e.id))break;return{...e,bounds:{...e.bounds,width:e.bounds.width+n.delta.width,height:e.bounds.height+n.delta.height},resizeFrom:n.resizeFrom}}}return e},hovered:(e=[],t)=>{switch(t.type){case Ln.HOVER:{const{payload:n}=t;return[...new Set([...n.ids,...e])]}case kn.DELETE:case Ln.LEAVE:{const{payload:n}=t;return e.filter((e=>!n.ids.includes(e)))}}return e},selected:(e=[],t)=>{switch(t.type){case jn.SELECT:{const{payload:n}=t;return[...new Set([...n.ids,...n.overwrite?[]:e])]}case kn.DELETE:case jn.DESELECT:{const{payload:n}=t;return e.filter((e=>!n.ids.includes(e)))}}return e},moving:(e=[],t)=>{switch(t.type){case Bn.START:{const{payload:n}=t;return[...new Set([...n.ids,...e])]}case kn.DELETE:case Bn.END:{const{payload:n}=t;return e.filter((e=>!n.ids.includes(e)))}}return e},resizing:(e=[],t)=>{switch(t.type){case Fn.START:{const{payload:n}=t;return[...new Set([...n.ids,...e])]}case kn.DELETE:case Fn.END:{const{payload:n}=t;return e.filter((e=>!n.ids.includes(e)))}}return e},connecting:(e=[],t)=>{switch(t.type){case Tn.START:{const{payload:n}=t;return[...new Set([...n.ports,...e])]}case Tn.END:{const{payload:n}=t;return e.filter((e=>!n.ports.includes(e)))}case kn.DELETE:{const{payload:n}=t;return e.reduce(((e,t)=>({...e,...!n.ids.includes(t.element)&&t})),[])}}return e},reconnecting:(e={},t)=>{switch(t.type){case Pn.START:{const{payload:n}=t;return n.ids.reduce(((e,t)=>({...e,[t]:n.endpoint})),e)}case kn.DELETE:case Pn.END:{const{payload:n}=t;return Object.keys(e).reduce(((t,o)=>({...t,...!n.ids.includes(o)&&{[o]:e[o]}})),{})}}return e},interactive:(e=[],t)=>{switch(t.type){case On.SELECT:{const{payload:n}=t;return[...new Set([...n.ids,...e])]}case kn.DELETE:case On.DESELECT:{const{payload:n}=t;return e.filter((e=>!n.ids.includes(e)))}}return e},updating:(e=[],t)=>{switch(t.type){case qn.START:{const{payload:n}=t;return[...new Set([...n.ids,...e])]}case kn.DELETE:case qn.END:{const{payload:n}=t;return e.filter((e=>!n.ids.includes(e)))}case qn.ENDALL:return[]}return e},copy:(e=[],t)=>{switch(t.type){case js.COPY:{const{payload:e}=t;return e}case js.PASTE:return e}return e},lastAction:(e="",t)=>t.type,remoteSelection:(e={},t)=>{switch(t.type){case Zn.SELECTION_CHANGE:const{payload:n}=t,{selector:o,changes:r}=n;return r.reduce(((e,t)=>{const{id:n}=t,r=[...e[n]??[]];if(t.type!==_n.SELECT||r.some((e=>gi(e,o)))){if(t.type===_n.DESELECT){const e=r.findIndex((e=>gi(e,o)));e>=0&&r.splice(e,1)}}else r.push(o);return{...e,[n]:r}}),e);case Zn.PRUNE_SELECTORS:const{allowedSelectors:s}=t.payload;return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,t.filter((e=>s.some((t=>gi(e,t)))))])))}return e},elements:((e,...t)=>(n=e,o)=>t.reduce(((e,t)=>t(e,o)),n))({},((e={},t)=>{switch(t.type){case wn.APPEND:{const{payload:n}=t,o=e[n.owner],r={...e,...o&&J.isUMLContainer(o)&&{[o.id]:{...o,ownedElements:[...new Set((new Qe[o.type]).reorderChildren([...o.ownedElements,...n.ids].map((t=>e[t]))))]}}},s=(e,t)=>{const n=e[t];let r=new I(n.bounds.x,n.bounds.y),s=n.owner&&e[n.owner];for(;s;)r=r.add(s.bounds.x,s.bounds.y),s=s.owner?e[s.owner]:null;for(s=o;s;)r=r.subtract(s.bounds.x,s.bounds.y),s=s.owner?e[s.owner]:null;return{...e,[t]:{...e[t],owner:o?o.id:null,bounds:{...n.bounds,...r}}}};return n.ids.filter((t=>e[t])).reduce(s,r)}case wn.REMOVE:{const{payload:n}=t;return[...new Set(n.ids.filter((t=>e[t]&&e[t].owner)).map((t=>e[t].owner)).filter(Qn))].reduce(((t,o)=>({...t,[o]:{...e[o],ownedElements:e[o].ownedElements.filter((e=>!n.ids.includes(e)))}})),e)}}return e}),((e={},t)=>{switch(t.type){case Pn.RECONNECT:{const{payload:n}=t;return n.connections.reduce(((t,n)=>({...t,[n.id]:{...e[n.id],source:{...e[n.id].source,...n.source},target:{...e[n.id].target,...n.target}}})),e)}case Sn.LAYOUT:{const{payload:n}=t;return{...e,[n.id]:{...e[n.id],path:n.path,bounds:{...e[n.id].bounds,...n.bounds},isManuallyLayouted:!1}}}case Sn.WAYPOINTLAYOUT:{const{payload:n}=t;return{...e,[n.id]:{...e[n.id],path:n.path,bounds:{...e[n.id].bounds,...n.bounds}}}}case Sn.STARTWAYPOINTSLAYOUT:{const{payload:n}=t;return{...e,[n.id]:{...e[n.id],path:n.path,bounds:{...e[n.id].bounds,...n.bounds}}}}case Sn.ENDWAYPOINTSLAYOUT:{const{payload:n}=t;return{...e,[n.id]:{...e[n.id],isManuallyLayouted:!0}}}}return e}),((e={},t)=>{switch(t.type){case kn.CREATE:{const{payload:n}=t;return n.values.reduce(((e,t)=>({...e,[t.id]:t})),e)}case kn.UPDATE:{const{payload:n}=t;return n.values.reduce(((e,t)=>({...e,[t.id]:{...e[t.id],...t}})),e)}case kn.DELETE:{const{payload:n}=t;return Object.keys(e).reduce(((t,o)=>({...t,...!n.ids.includes(o)&&{[o]:e[o]}})),{})}}return e}),((e={},t)=>{const n={x:0,y:0},o=(e,t,o)=>{switch(o){case $.TOPLEFT:n.x=Math.min(e.x-t.delta.width,e.x+e.width),n.y=Math.min(e.y-t.delta.height,e.y+e.height);break;case $.TOPRIGHT:n.x=e.x,n.y=Math.min(e.y-t.delta.height,e.y+e.height);break;case $.BOTTOMLEFT:n.x=Math.min(e.x-t.delta.width,e.x+e.width),n.y=e.y;break;case $.BOTTOMRIGHT:default:n.x=e.x,n.y=e.y}return n};if(t.type===Un.RESIZE){const{payload:n}=t;return n.ids.reduce(((e,t)=>({...e,...t in e&&{[t]:{...e[t],bounds:{...e[t].bounds,x:o(e[t].bounds,n,n.resizeFrom).x,y:o(e[t].bounds,n,n.resizeFrom).y,width:Math.max(e[t].bounds.width+n.delta.width,0),height:Math.max(e[t].bounds.height+n.delta.height,0)},resizeFrom:n.resizeFrom}}})),e)}return e}),((e={},t)=>{if(t.type===zn.MOVE){const{payload:n}=t;return n.ids.reduce(((e,t)=>({...e,...t in e&&{[t]:{...e[t],bounds:{...e[t].bounds,x:e[t].bounds.x+n.delta.x,y:e[t].bounds.y+n.delta.y}}}})),e)}return e})),assessments:(e=ui,t)=>{switch(t.type){case Ro.ASSESS:{const{payload:n}=t;return{...e,[n.element]:n.assessment}}case Ro.DELETE:{const{payload:n}=t,o={...e};return delete o[n.element],o}case kn.DELETE:{const{payload:n}=t;return Object.keys(e).reduce(((t,o)=>({...t,...!n.ids.includes(o)&&{[o]:e[o]}})),{})}}return e}};var bi=n(3821),fi=n(3786);const Ei=e=>bi.q8 in e;function Ci(e){return(0,fi.Q7)(e.map((e=>vi(wi(e)))))}const vi=e=>(0,fi.cH)((function*(){for(;;)yield(0,fi.T1)(e)})),wi=e=>function*(){try{yield(0,fi.T1)(e)}catch(e){console.error(e)}},xi=(e,t)=>{const n=Object.keys(e).reduce(((e,n)=>t.hasOwnProperty(n)?e:{...e,[n]:void 0}),{});return Object.keys(t).reduce(((n,o)=>{if(!e.hasOwnProperty(o))return{...n,[o]:t[o]};if(e[o]===t[o])return n;if(Array.isArray(e[o]))return{...n,[o]:t[o]};if("object"==typeof e[o]){const r=xi(e[o],t[o]);return Object.keys(r).length?{...n,[o]:xi(e[o],t[o])}:n}return{...n,[o]:t[o]}}),n)};function*ki(){yield Ci([Mi,Ti,Si,Ni,Pi,Di])}function*Mi(){const e=yield(0,fi.s)(kn.CREATE);for(const t of e.payload.values)yield(0,fi.T1)(Li,t.id)}function*Ti(){const e=yield(0,fi.s)(Pn.RECONNECT);for(const t of e.payload.connections)yield(0,fi.T1)(Li,t.id)}function*Pi(){yield(0,fi.s)(Sn.ENDWAYPOINTSLAYOUT);const e=yield(0,fi.SD)("layer"),{elements:t,diagram:n}=yield(0,fi.Lt)(),o=[...n.ownedElements.map((e=>Jn.get(t[e]))),...n.ownedRelationships.map((e=>to.get(t[e])))].filter(Qn),r=vn.get(n);if(!r)return;const[s]=r.render(e,o),i={width:s.bounds.width-n.bounds.width,height:s.bounds.height-n.bounds.height};yield(0,fi.yJ)({type:Un.RESIZE,payload:{ids:[n.id],delta:i},undoable:!1})}function*Si(){const e=yield(0,fi.s)(kn.UPDATE),{elements:t}=yield(0,fi.Lt)();for(const n of e.payload.values)Dt.isUMLRelationship(t[n.id])&&(yield(0,fi.T1)(Li,n.id))}function*Ni(){const e=yield(0,fi.s)([zn.MOVE,Un.RESIZE]),{elements:t}=yield(0,fi.Lt)(),n=Object.values(t).filter((e=>Dt.isUMLRelationship(e))),o=[];e:for(const r of n){let n=r.source.element;for(;n;){if(e.payload.ids.includes(n)){o.push(r.id);continue e}n=t[n].owner}let s=r.target.element;for(;s;){if(e.payload.ids.includes(s)){o.push(r.id);continue e}s=t[s].owner}}for(const e of[...new Set([...o])])yield(0,fi.T1)(Li,e)}function*Di(){const e=yield(0,fi.s)(kn.DELETE),{elements:t}=yield(0,fi.Lt)(),n=Object.values(t).filter((e=>Dt.isUMLRelationship(e))).filter((t=>e.payload.ids.includes(t.source.element)||e.payload.ids.includes(t.target.element))).map((e=>e.id));yield(0,fi.Q7)([(0,fi.yJ)({type:wn.REMOVE,payload:{ids:n},undoable:!1}),(0,fi.yJ)({type:kn.DELETE,payload:{ids:n},undoable:!1})])}function*Li(e){const{elements:t,selected:n,editor:o}=yield(0,fi.Lt)(),r=yield(0,fi.SD)("layer"),s=to.get(t[e]);if(!s)return;const i=Jn.get(t[s.source.element]),l=Jn.get(t[s.target.element]);if(!i||!l)return;const a=yield(0,fi.yJ)(Jn.getAbsolutePosition(s.source.element));i.bounds={...i.bounds,...a};const c=yield(0,fi.yJ)(Jn.getAbsolutePosition(s.target.element));l.bounds={...l.bounds,...c};const d=t[e],[h]=s.render(r,i,l),{path:p,bounds:u}=xi(d,h);p&&(s.isManuallyLayouted&&Ai(i.id,l.id,n,o.readonly)?yield(0,fi.yJ)(to.layoutWaypoints(h.id,d.path,{...d.bounds,...u})):yield(0,fi.yJ)(to.layout(h.id,p,{...d.bounds,...u}))),h.type===et.CommunicationLink&&(yield(0,fi.yJ)(Jn.update(h.id,h)))}const Ai=(e,t,n,o)=>!!(n.includes(e)&&n.includes(t)||o);function*Oi(){yield Ci([Ii])}function*Ii(){yield(0,fi.s)(di.LAYOUT),yield(0,fi.SD)("layer");const{elements:e,diagram:t}=yield(0,fi.Lt)(),n=Object.values(e).filter((e=>!e.owner)).map((e=>e.id));if(n.length){yield(0,fi.yJ)(xn.append(n));for(const t of Object.keys(e))yield(0,fi.cb)(0),R.isUMLElement(e[t])&&(yield(0,fi.T1)(Fi,t)),Dt.isUMLRelationship(e[t])&&!e[t].isManuallyLayouted&&(yield(0,fi.T1)(Li,t))}}function*Bi(){const{elements:e,diagram:t}=yield(0,fi.Lt)(),n=yield(0,fi.SD)("layer"),o=vn.get(t),r=[...o.ownedElements.map((t=>Jn.get(e[t]))),...o.ownedRelationships.map((t=>to.get(e[t])))].filter(Qn);return o.render(n,r)}function*zi(e){const{elements:t}=yield(0,fi.Lt)(),n=yield(0,fi.SD)("layer"),o=xn.get(t[e]),r=o.ownedElements.map((e=>Jn.get(t[e]))).filter(Qn);return o.render(n,r)}function*$i(e){const{elements:t}=yield(0,fi.Lt)(),n=yield(0,fi.SD)("layer");return Jn.get(t[e]).render(n)}function*Fi(e){const{elements:t,diagram:n}=yield(0,fi.Lt)(),o={...t,[n.id]:n};let r=[];if(vn.isUMLDiagram(o[e])?r=yield(0,fi.T1)(Bi):J.isUMLContainer(o[e])?r=yield(0,fi.T1)(zi,e):R.isUMLElement(o[e])&&(r=yield(0,fi.T1)($i,e)),r.length)for(const[e,t]of r.entries()){const r=o[t.id],s={width:t.bounds.width-r.bounds.width,height:t.bounds.height-r.bounds.height};if(Object.values(s).some((e=>0!==e))&&(yield(0,fi.yJ)({type:Un.RESIZE,payload:{ids:[t.id],resizeFrom:t.resizeFrom,delta:s},undoable:!1})),vn.isUMLDiagram(t))continue;const i={x:t.bounds.x-r.bounds.x,y:t.bounds.y-r.bounds.y};if(Object.values(i).some((e=>0!==e))&&(yield(0,fi.yJ)({type:zn.MOVE,payload:{ids:[t.id],delta:i},undoable:!1})),0===e){const{id:e,name:o,owner:s,type:i,bounds:l,ownedElements:a,...c}=xi(r,t);Object.keys(c).length&&(yield(0,fi.yJ)(Jn.update(t.id,{...c}))),yield(0,fi.T1)(Fi,t.owner||n.id)}}}function*Ui(){yield Ci([Ri,ji,Hi,Wi])}function*Ri(){const e=yield(0,fi.s)(wn.APPEND),{elements:t,diagram:n}=yield(0,fi.Lt)(),o={...t,[n.id]:n},r=xn.get(o[e.payload.owner]);r&&(yield(0,fi.T1)(Fi,r.id))}function*ji(){const e=yield(0,fi.s)(wn.REMOVE),{elements:t,diagram:n}=(yield(0,fi.SD)("layer"),yield(0,fi.Lt)()),o={...t,[n.id]:n},r=[...new Set(e.payload.ids.filter((e=>e in o)).map((e=>o[e].owner||n.id)))];for(const e of r)yield(0,fi.T1)(Fi,e)}function*Hi(){const e=yield(0,fi.s)(Bn.END),{elements:t,hovered:n}=yield(0,fi.Lt)();let o=null;if(n.length){const e=t[n[0]];if(!e||!J.isUMLContainer(e)||!Qe[e.type].features.droppable)return;o=e.id}const r=e.payload.ids.filter((e=>t[e].owner!==o&&e!==o));r.length&&!e.payload.keyboard&&(yield(0,fi.yJ)(xn.remove(r)),yield(0,fi.yJ)(xn.append(r,o||void 0)))}function*Wi(){const e=yield(0,fi.s)(Bn.END),{elements:t,diagram:n}=yield(0,fi.Lt)(),o={...t,[n.id]:n};yield(0,fi.O4)({append:(0,fi.s)(wn.APPEND),resize:(0,fi.T1)((function*(){yield(0,fi.cb)(0);const t=[...new Set(e.payload.ids.map((e=>o[e].owner||n.id)))];for(const e of t)yield(0,fi.T1)(Fi,e)}))})}function*Vi(){yield Ci([Gi,Yi])}function*Gi(){const e=yield(0,fi.s)(jn.SELECT),{diagram:t,editor:n}=yield(0,fi.Lt)();if(n.readonly||n.mode===Wn.Assessment)return;const o=e.payload.ids.filter((e=>t.ownedRelationships.includes(e)));o.length&&(yield(0,fi.yJ)({type:Cn.APPEND,payload:{ids:o},undoable:!1}))}function*Yi(){yield(0,fi.p8)([Tn.END,Pn.END,qn.END],Zi)}function*Zi(){const e=yield(0,fi.SD)("layer"),{elements:t,diagram:n}=yield(0,fi.Lt)(),o=[...n.ownedElements.map((e=>Jn.get(t[e]))),...n.ownedRelationships.map((e=>to.get(t[e])))].filter(Qn),r=vn.get(n);if(!r)return;const[s]=r.render(e,o),i={width:s.bounds.width-n.bounds.width,height:s.bounds.height-n.bounds.height};yield(0,fi.yJ)({type:Un.RESIZE,payload:{ids:[n.id],delta:i},undoable:!1})}function*_i(){yield Ci([Xi,qi,Ki])}function*Xi(){yield(0,fi.s)(On.SELECT);const{interactive:e,elements:t}=yield(0,fi.Lt)(),n=bn(e,t),o=e.filter((e=>!n.includes(e)));yield(0,fi.yJ)({type:On.DESELECT,payload:{ids:o},undoable:!1})}function*qi(){const e=yield(0,fi.s)(kn.UPDATE);if(!Ei(e))for(const t of e.payload.values)yield(0,fi.T1)(Fi,t.id)}function*Ki(){const e=yield(0,fi.s)(Un.RESIZE);if(!Ei(e))for(const t of e.payload.ids)yield(0,fi.T1)(Fi,t)}var Ji;function*Qi(){yield Ci([el])}function*el(){yield(0,fi.sg)(100,Ji.PATCH,tl)}function*tl(){const{elements:e}=yield(0,fi.Lt)(),t=Object.values(e).filter((e=>!e.owner)).map((e=>e.id));if(t.length){yield(0,fi.yJ)(xn.append(t));for(const t of Object.keys(e))yield(0,fi.cb)(0),R.isUMLElement(e[t])&&(yield(0,fi.T1)(Fi,t)),Dt.isUMLRelationship(e[t])&&!e[t].isManuallyLayouted&&(yield(0,fi.T1)(Li,t))}}function*nl(){var e;yield(e=[Oi,_i,Ui,ki,Vi,Qi],(0,fi.Q7)(e.map(fi.cH)))}!function(e){e.PATCH="@@patcher/PATCH"}(Ji||(Ji={}));class ol{constructor(e){this.maxSize=e,this.items=[]}get latest(){return this.items.length?this.items[this.items.length-1]:null}push(e){this.items.push(e)>this.maxSize&&this.items.shift()}pop(){return this.items.pop()}clear(){this.items.length=0}}const rl={transform:e=>e,transformInverse:e=>e,merge:(e,t)=>({...e,...t})},sl={transform:e=>e,selectDiscrete:()=>!0,selectContinuous:()=>!1};function il(e,t=sl){const n=t.transform||sl.transform,o=t.selectDiscrete||sl.selectDiscrete,r=t.selectContinuous||sl.selectContinuous;return t=>(e.initialize(n(t.getState())),s=>i=>{const l=s(i);return o(i)?e.check(n(t.getState())):r(i)&&e.checkContinuous(n(t.getState())),l})}function ll(e,t){return{...e,diagram:{...e.diagram,ownedElements:Object.keys(t.elements).filter((e=>!t.elements[e].owner)),ownedRelationships:e.diagram.ownedRelationships.filter((e=>!!t.elements[e]))},elements:Object.keys(t.elements).reduce(((n,o)=>({...n,[o]:{...e.elements[o],...t.elements[o]}})),{}),interactive:t.interactive,assessments:Object.keys(t.assessments).reduce(((n,o)=>({...n,[o]:{...e.assessments[o],...t.assessments[o]}})),{})}}const al=(e={},t=null,n)=>{const o=(e=>{const t=new ol(25),n=new ol(25);return(o={},r)=>{switch(r.type){case Hs.UNDO:{const e=t.pop();return e?(n.push([o,r]),e[0]):o}case Hs.REDO:{const e=n.pop();return e?(t.push([o,r]),e[0]):o}default:return Ei(r)||!r.undoable||(n.clear(),t.push([o,r])),e(o,r)}}})((0,go.HY)(yi)),r=n&&function(e,t=rl){const n=t.transform||rl.transform,o=t.transformInverse||rl.transformInverse,r=t.merge||rl.merge;return(t,s)=>{const{type:i,payload:l}=s;if(i===Ji.PATCH){const s=e.patch(l,o(t));if(s.patched)return r(t??{},n(s.result))}return t}}(n,{transform:e=>so.fromModel(e),transformInverse:e=>so.toModel(e),merge:ll}),s=(0,hi.Ay)({context:{layer:t}}),i=(0,go.Tw)(pi.A,s,...n?[il(n,{selectDiscrete:e=>(e=>e.type.endsWith("END")||e.type.endsWith("DELETE")||e.type.endsWith("UNDO")||e.type.endsWith("REDO"))(e)||(e=>e.type===jn.SELECT||e.type===jn.DESELECT)(e),selectContinuous:e=>(e=>e.type===zn.MOVE||e.type===Un.RESIZE)(e),transform:e=>so.toModel(e)})]:[]),l=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||go.Zz)(i),a=(0,go.y$)(((e,t)=>{const n=o(e,t);return r?r(n,t):n}),e,l);return t&&(s.run(nl),a.dispatch({type:di.LAYOUT,payload:{},undoable:!1})),a},cl=(e={},t=null,n)=>({store:al(e,t,n)});class dl extends o.Component{constructor(){super(...arguments),this.state=cl(this.props.initialState,this.props.canvas,this.props.patcher)}componentDidUpdate(e){if(e.canvas!==this.props.canvas){const e=cl(this.props.initialState,this.props.canvas,this.props.patcher);this.setState(e)}}render(){return o.createElement(io.Kq,{store:this.state.store},this.props.children)}}const hl=fo(dl),pl=ho;class ul extends o.Component{constructor(){super(...arguments),this.onDragStart=async e=>{try{const t=await this.props.onDragStart(e);this.props.onDrop&&this.props.onDrop(t)}catch(e){}}}componentDidMount(){const e=(0,lo.findDOMNode)(this);ko()({tablet:!0})?(e.addEventListener("touchstart",this.onDragStart),e.addEventListener("touchend",Ur)):e.addEventListener("pointerdown",this.onDragStart)}componentWillUnmount(){const e=(0,lo.findDOMNode)(this);ko()({tablet:!0})?e.removeEventListener("touchstart",this.onDragStart):e.removeEventListener("pointerdown",this.onDragStart)}render(){return this.props.children}}const ml=pl(ul),gl=It(qr(Fr)).attrs((e=>({child:Fr,scale:e.scale})))`
  overflow: visible;
  fill: white;
  scale: ${e=>e.scale??.8};
  transform-origin: center;
`;class yl extends o.Component{constructor(){super(...arguments),this.onDrop=e=>{const t=this.props.element.clone({bounds:{...this.props.element.bounds,...e.position}});this.props.create(t,e.owner)}}render(){const{element:e}=this.props;return o.createElement(ml,{onDrop:this.onDrop},o.createElement(gl,{id:e.id}))}}const bl=It.div`
  width: 100%;
  text-align: center;
  margin: 1rem 0;
  height: 2px;
  background-color: ${e=>e.theme.color.primaryContrast};
`,fl=(0,go.Zz)(ci,fo,(0,io.Ng)((e=>({type:e.diagram.type,colorEnabled:e.editor.colorEnabled})),{create:Jn.create}));class El extends o.Component{constructor(){super(...arguments),this.state=(({type:e,canvas:t,translate:n,colorEnabled:o})=>{const r=[],s=[];switch(e){case v.ClassDiagram:r.push(...((e,t)=>{const n=[];re.stereotypeHeaderHeight=H(1,50),re.nonStereotypeHeaderHeight=H(1,40);const o=new ae({name:t("packages.ClassDiagram.Package")});o.bounds={...o.bounds,width:o.bounds.width,height:o.bounds.height},n.push(o);const r=new ce({name:t("packages.ClassDiagram.Class")});r.bounds={...r.bounds,width:r.bounds.width,height:r.bounds.height};const s=new ie({name:t("sidebar.classAttribute"),owner:r.id,bounds:{x:0,y:0,width:H(1,200),height:H(1,30)}}),i=new le({name:t("sidebar.classMethod"),owner:r.id,bounds:{x:0,y:0,width:H(1,200),height:H(1,30)}});r.ownedElements=[s.id,i.id],n.push(...r.render(e,[s,i]));const l=new se({name:t("packages.ClassDiagram.AbstractClass")});l.bounds={...l.bounds,width:l.bounds.width,height:l.bounds.height};const a=new ie({name:t("sidebar.classAttribute"),owner:l.id,bounds:{x:0,y:40,width:H(1,200),height:H(1,30)}}),c=new le({name:t("sidebar.classMethod"),owner:l.id,bounds:{x:0,y:70,width:H(1,200),height:H(1,30)}});l.ownedElements=[a.id,c.id],n.push(...l.render(e,[a,c]));const d=new he({name:t("packages.ClassDiagram.Interface"),bounds:{height:110}});d.bounds={...d.bounds,width:d.bounds.width,height:d.bounds.height};const h=new ie({name:t("sidebar.classAttribute"),owner:d.id,bounds:{x:0,y:50,width:H(1,200),height:H(1,30)}}),p=new le({name:t("sidebar.classMethod"),owner:d.id,bounds:{x:0,y:80,width:H(1,200),height:H(1,30)}});d.ownedElements=[h.id,p.id],n.push(...d.render(e,[h,p]));const u=new de({name:t("packages.ClassDiagram.Enumeration"),bounds:{height:140}});u.bounds={...u.bounds,width:u.bounds.width,height:u.bounds.height};const m=new ie({name:t("sidebar.enumAttribute")+" 1",owner:u.id,bounds:{x:0,y:50,width:H(1,200),height:H(1,30)}}),g=new ie({name:t("sidebar.enumAttribute")+" 2",owner:u.id,bounds:{x:0,y:80,width:H(1,200),height:H(1,30)}}),y=new ie({name:t("sidebar.enumAttribute")+" 3",owner:u.id,bounds:{x:0,y:110,width:H(1,200),height:H(1,30)}});return u.ownedElements=[m.id,g.id,y.id],n.push(...u.render(e,[m,g,y])),n})(t,n));break;case v.ObjectDiagram:r.push(...((e,t)=>{const n=[],o=new fe({name:t("packages.ObjectDiagram.ObjectName")});o.bounds={...o.bounds,width:o.bounds.width,height:o.bounds.height};const r=new ye({name:t("sidebar.objectAttribute"),owner:o.id,bounds:{x:0,y:0,width:H(1,200),height:H(1,25)}});return o.ownedElements=[r.id],n.push(...o.render(e,[r])),n})(t,n));break;case v.ActivityDiagram:r.push(...((e,t)=>{const n=[];Z.defaultWidth=10*Math.round(2),Z.defaultHeight=10*Math.round(6),_.defaultWidth=10*Math.round(6),_.defaultHeight=10*Math.round(2);const o=new ee({name:t("packages.ActivityDiagram.Activity")});o.bounds={...o.bounds,width:o.bounds.width,height:o.bounds.height},n.push(o);const r=new X({bounds:{x:0,y:0,width:45,height:45}});n.push(r);const s=new Y({bounds:{x:0,y:0,width:45,height:45}});n.push(s);const i=new G({name:t("packages.ActivityDiagram.ActivityActionNode")});i.bounds={...i.bounds,width:i.bounds.width,height:i.bounds.height},n.push(i);const l=new K({name:t("packages.ActivityDiagram.ActivityObjectNode")});l.bounds={...l.bounds,width:l.bounds.width,height:l.bounds.height},n.push(l);const a=new q({name:t("packages.ActivityDiagram.ActivityMergeNode")});a.bounds={...a.bounds,width:a.bounds.width,height:a.bounds.height},n.push(a);const c=new Z;n.push(c);const d=new _;return n.push(d),n})(0,n));break;case v.UseCaseDiagram:r.push(...((e,t)=>{const n=[],o=new ve({name:t("packages.UseCaseDiagram.UseCase")});o.bounds={...o.bounds,width:o.bounds.width,height:o.bounds.height},n.push(o);const r=new Ee({name:t("packages.UseCaseDiagram.UseCaseActor"),bounds:{x:0,y:0,width:H(1,80),height:H(1,140)}});n.push(r);const s=new Ce({name:t("packages.UseCaseDiagram.UseCaseSystem")});return s.bounds={...s.bounds,width:s.bounds.width,height:s.bounds.height},n.push(s),n})(0,n));break;case v.CommunicationDiagram:r.push(...((e,t)=>{const n=[],o=new fe({name:t("packages.CommunicationDiagram.ObjectName")});o.bounds={...o.bounds,width:o.bounds.width,height:o.bounds.height};const r=new ye({name:t("sidebar.classAttribute"),owner:o.id,bounds:{x:0,y:0,width:H(1,200),height:H(1,25)}});return o.ownedElements=[r.id],n.push(...o.render(e,[r])),n})(t,n));break;case v.ComponentDiagram:r.push(...((e,t)=>{const n=[],o=new Ne({name:t("packages.ComponentDiagram.Component")});o.bounds={...o.bounds,width:o.bounds.width,height:o.bounds.height},n.push(o);const r=new De({name:t("packages.ComponentDiagram.Subsystem")});r.bounds={...r.bounds,width:r.bounds.width,height:r.bounds.height},n.push(r);const s=new ue({name:t("packages.ComponentDiagram.ComponentInterface")});s.bounds={...s.bounds,width:s.bounds.width,height:s.bounds.height};const[i]=s.render(e);return i.styles={paddingTop:8},n.push(i),n})(t,n));break;case v.DeploymentDiagram:r.push(...((e,t)=>{const n=[],o=new ge({name:t("packages.DeploymentDiagram.DeploymentNode")});o.bounds={...o.bounds,width:o.bounds.width,height:o.bounds.height},n.push(o);const r=new Se({name:t("packages.DeploymentDiagram.DeploymentComponent")});r.bounds={...r.bounds,width:r.bounds.width,height:r.bounds.height},n.push(r);const s=new me({name:t("packages.DeploymentDiagram.DeploymentArtifact")});s.bounds={...s.bounds,width:s.bounds.width},n.push(s);const i=new we({name:t("packages.DeploymentDiagram.DeploymentInterface")});return i.bounds={...i.bounds,width:i.bounds.width,height:i.bounds.height},n.push(i),n})(0,n));break;case v.PetriNet:r.push(...((e,t)=>{const n=[];xe.defaultHeight=H(1,60),xe.defaultWidth=H(1,25);const o=new xe({name:t("packages.PetriNet.PetriNetTransition")});n.push(Object.assign(o,{styles:{marginTop:"25px"}}));const r=new ke({name:t("packages.PetriNet.PetriNetPlace"),bounds:{x:0,y:0,width:H(1,60),height:H(1,60)}});return n.push(r),n})(0,n));break;case v.ReachabilityGraph:r.push(...((e,t)=>{const n=[],o=new Me({name:t("packages.ReachabilityGraph.ReachabilityGraphMarking"),bounds:{x:0,y:0,width:160,height:100}});return n.push(o),n})(0,n));break;case v.SyntaxTree:r.push(...((e,t)=>{const n=[],o={x:0,y:0,width:100,height:50};return n.push(new Ae({name:"",bounds:o})),n.push(new Le({name:"",bounds:o})),n})());break;case v.Flowchart:r.push(...((e,t)=>{const n=[],o={x:0,y:0,width:160,height:H(1,70)};return n.push(new Oe({name:t("packages.Flowchart.FlowchartTerminal"),bounds:o})),n.push(new ze({name:t("packages.Flowchart.FlowchartProcess"),bounds:o})),n.push(new Be({name:t("packages.Flowchart.FlowchartDecision"),bounds:o})),n.push(new $e({name:t("packages.Flowchart.FlowchartInputOutput"),bounds:{...o,width:140}})),n.push(new Ie({name:t("packages.Flowchart.FlowchartFunctionCall"),bounds:o})),n})(0,n));break;case v.BPMN:r.push(...((e,t)=>{const n=[],o={x:0,y:0,width:160,height:60};return n.push(new Ue({name:t("packages.BPMN.BPMNTask"),bounds:o})),n.push(new Re({name:t("packages.BPMN.BPMNSubprocess"),bounds:o})),n.push(new Ge({name:t("packages.BPMN.BPMNTransaction"),bounds:o})),n.push(new Ye({name:t("packages.BPMN.BPMNCallActivity"),bounds:o})),n.push(new Ke({bounds:o})),n.push(new Ze({name:t("packages.BPMN.BPMNAnnotation"),bounds:o})),n.push(new je({bounds:{x:0,y:0,width:40,height:40}})),n.push(new He({bounds:{x:0,y:0,width:40,height:40}})),n.push(new We({bounds:{x:0,y:0,width:40,height:40}})),n.push(new Ve({bounds:{x:0,y:0,width:40,height:40}})),n.push(new _e({bounds:{x:0,y:0,width:40,height:60}})),n.push(new Je({bounds:{x:0,y:0,width:60,height:60}})),n.push(new Xe({name:t("packages.BPMN.BPMNPool"),bounds:{x:0,y:0,width:160,height:80}})),n})(0,n))}return o&&s.push(new Fe({name:n("packages.ColorLegend.ColorLegend")})),{previews:r,utils:s}})(this.props),this.getElementArray=e=>Object.values(e).filter((e=>!e.owner)).map(((e,t)=>{const{styles:n}=e;return o.createElement("div",{style:{...n,height:e.bounds.height*(this.props?.previewScaleFactor??.8)+8},key:t},o.createElement(yl,{element:e,create:this.create}))})),this.create=(e,t)=>{const n=En(e,this.state.previews);this.props.create(n,t)}}render(){const{previews:e,utils:t}=this.state,n=[...e,...t].reduce(((e,t)=>({...e,[t.id]:{...t}})),{});return o.createElement(hl,{initialState:{elements:n,editor:{features:{hoverable:!1,selectable:!1,movable:!1,resizable:!1,connectable:!1,updatable:!1,droppable:!1,alternativePortVisualization:!1}}}},o.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:8}},this.getElementArray(e)),t&&t.length>0?o.createElement(o.Fragment,null,o.createElement(bl,null),this.getElementArray(t)):null)}}const Cl=fl(El),vl=Ot.Ay.aside.attrs({})`
  flex: 0 0 148px;
  padding: 0 10px;
  height: 100%;
  min-height: inherit;
  max-height: inherit;
  overflow-x: hidden;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  align-items: center;

  svg {
    display: block;
    margin-left: auto;
    margin-right: auto;
  }
`,wl=(0,go.Zz)(ci,(0,io.Ng)((e=>({readonly:e.editor.readonly,mode:e.editor.mode,view:e.editor.view,selected:e.selected})),{changeView:As.changeView}));class xl extends o.Component{constructor(){super(...arguments),this.toggleInteractiveElementsMode=e=>{const{checked:t}=e.currentTarget,n=t?Vn.Exporting:Vn.Highlight;this.props.changeView(n)}}render(){return this.props.readonly||this.props.mode===Wn.Assessment?null:o.createElement(vl,{id:"modeling-editor-sidebar","data-cy":"modeling-editor-sidebar"},this.props.mode===Wn.Exporting&&o.createElement("div",{className:"dropdown",style:{width:128}},o.createElement("select",{value:this.props.view,onChange:e=>this.props.changeView(e.target.value),color:"primary"},o.createElement("option",{value:Vn.Modelling},this.props.translate("views.modelling")),o.createElement("option",{value:Vn.Exporting},this.props.translate("views.exporting")))),this.props.view===Vn.Modelling?o.createElement(Cl,null):o.createElement("label",{htmlFor:"toggleInteractiveElementsMode"},o.createElement("input",{id:"toggleInteractiveElementsMode",type:"checkbox",checked:this.props.view===Vn.Exporting,onChange:this.toggleInteractiveElementsMode}),this.props.translate("views.highlight")))}}const kl=wl(xl),Ml=(e,t)=>{let n={...e};for(let[e,o]of Object.entries(t))o instanceof Object&&(o=Ml(n[e],o)),n={...n,[e]:o};return n};class Tl extends o.Component{constructor(){super(...arguments),this.theme=Ml($t(),this.props.styles)}render(){return o.createElement(Ot.NP,{theme:this.theme},this.props.children)}}function Pl(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!t)return{h:0,s:0,l:0};const n=parseInt(t[1],16)/255,o=parseInt(t[2],16)/255,r=parseInt(t[3],16)/255,s=Math.max(n,o,r),i=Math.min(n,o,r);let l=0,a=0;const c=(s+i)/2;if(s===i)l=a=0;else{const e=s-i;switch(a=c>.5?e/(2-s-i):e/(s+i),s){case n:l=(o-r)/e+(o<r?6:0);break;case o:l=(r-n)/e+2;break;case r:l=(n-o)/e+4}l/=6}return{h:l,s:a,l:c}}function Sl({h:e,s:t,l:n}){let o=0,r=0,s=0;if(0===t)o=r=s=n;else{const i=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),l=n<.5?n*(1+t):n+t-n*t,a=2*n-l;o=i(a,l,e+1/3),r=i(a,l,e),s=i(a,l,e-1/3)}o=Math.round(255*o),r=Math.round(255*r),s=Math.round(255*s);const i=e=>1===e.length?"0"+e:e;return"#"+i(o.toString(16))+i(r.toString(16))+i(s.toString(16))}Tl.defaultProps={styles:{}};const Nl=(e,t)=>{const n=Pl(e);return Sl({...n,l:n.l-t/100})},Dl=It(It.button`
  appearance: button;
  background-color: transparent;
  border: 1px solid transparent;
  border-radius: 0.25em;
  font-family: inherit;
  font-size: 1em;
  font-weight: 400;
  line-height: 1.5;
  margin: 0;
  overflow: visible;
  padding: 0.375em 0.75em;
  text-transform: none;
  transition:
    color 0.15s ease-in-out,
    background-color 0.15s ease-in-out,
    border-color 0.15s ease-in-out,
    box-shadow 0.15s ease-in-out;
  user-select: none;

  svg {
    pointer-events: none;
  }

  ::-moz-focus-inner {
    border-style: none;
    padding: 0;
  }

  :focus {
    outline: 0;
  }

  :not(:disabled) {
    cursor: pointer;
  }
`)((e=>{const t="link"!==e.color?e.theme.color[e.color]:e.theme.color.primary;return Bt`
    ${e.block&&Bt`
      display: block;
      width: 100%;
    `}

    ${e.disabled&&Bt`
      opacity: 0.65;
    `}

    ${"sm"===e.size&&Bt`
      border-radius: 0.2em;
      font-size: 0.875em;
      padding: 0.25em 0.5em;
    `}

    ${"lg"===e.size&&Bt`
      border-radius: 0.3em;
      font-size: 1.25em;
      padding: 0.5em 1em;
    `}

    ${"link"===e.color&&Bt`
      color: ${e.theme.color.primary};
      text-decoration: none;
      fill: ${e.theme.color.primaryContrast};
    `}

    ${"link"!==e.color&&Bt`
      :focus {
        box-shadow: 0 0 0 0.2em ${t}80;
      }
    `}

    ${"link"!==e.color&&!e.outline&&Bt`
      background-color: ${t};
      border-color: ${t};
      color: ${e.theme.color.background};

      :hover {
        background-color: ${Nl(t,7.5)};
        border-color: ${Nl(t,10)};
      }

      :active {
        background-color: ${Nl(t,10)};
        border-color: ${Nl(t,12.5)};
      }
    `}

    ${"link"!==e.color&&e.outline&&Bt`
      border-color: ${t};
      color: ${t};

      :hover {
        background-color: ${t};
        color: ${e.theme.color.background};
      }
    `}
  `})),Ll=Object.freeze({block:!1,color:"secondary",disabled:!1,outline:!1,size:"sm"}),Al=(0,o.forwardRef)(((e,t)=>(0,o.createElement)(Dl,{...e,ref:t})));Al.defaultProps=Ll;const Ol=e=>o.createElement(Lo,{viewBox:"0 0 107.01 122.88",...e},o.createElement("path",{d:"M107.01,20.54h-3.62v3.08c0,2.93-1.19,5.58-3.12,7.51c-1.93,1.92-4.58,3.12-7.51,3.12H22.71c-2.93,0-5.58-1.19-7.51-3.12 c-1.93-1.93-3.12-4.58-3.12-7.51V20.1h-1.45c-1.54,0-2.94,0.63-3.96,1.65c-1.02,1.02-1.65,2.42-1.65,3.96v16.24 c0,1.54,0.63,2.94,1.65,3.96c1.02,1.02,2.42,1.65,3.96,1.65h28.31c1.23,0,1.66-0.01,2.08-0.01c4.87-0.08,10.31-0.17,14.56,2.91 c1.46,1.05,2.62,2.39,3.46,4.04c0.81,1.58,1.3,3.44,1.46,5.59c0,0.06,0.01,0.12,0.01,0.18h0v8.21h4.29c1.88,0,3.59,0.77,4.82,2 c1.24,1.24,2,2.94,2,4.82v40.76c0,1.88-0.77,3.59-2,4.82c-1.24,1.24-2.94,2-4.82,2H51.46c-1.88,0-3.59-0.77-4.82-2 c-1.24-1.24-2-2.94-2-4.82V75.3c0-1.88,0.77-3.59,2-4.82c1.24-1.24,2.94-2,4.82-2h4.03v-8.16c-0.11-1.4-0.43-2.57-0.92-3.54 c-0.47-0.93-1.12-1.67-1.93-2.26c-2.91-2.11-7.47-2.04-11.54-1.97c-1.02,0.02-2.02,0.03-2.16,0.03H10.63 c-2.93,0-5.58-1.19-7.51-3.12C1.19,47.53,0,44.87,0,41.95V25.71c0-2.93,1.2-5.58,3.12-7.51c1.93-1.92,4.58-3.12,7.51-3.12h1.45 v-4.45c0-2.93,1.19-5.58,3.12-7.51C17.13,1.19,19.78,0,22.71,0h70.05c2.93,0,5.58,1.19,7.51,3.12c1.93,1.92,3.12,4.58,3.12,7.51 v4.89h3.62V20.54L107.01,20.54z M92.76,5.01H22.71c-1.54,0-2.94,0.63-3.96,1.65c-1.02,1.02-1.65,2.42-1.65,3.96v12.99 c0,1.54,0.63,2.94,1.65,3.96c1.02,1.02,2.42,1.65,3.96,1.65h70.05c1.54,0,2.94-0.63,3.96-1.65c1.02-1.02,1.65-2.42,1.65-3.96V10.63 c0-1.54-0.63-2.94-1.65-3.96C95.7,5.65,94.3,5.01,92.76,5.01L92.76,5.01z M64.79,73.49H51.46c-0.49,0-0.95,0.2-1.28,0.53 c-0.33,0.33-0.53,0.78-0.53,1.28v40.76c0,0.49,0.2,0.95,0.53,1.28c0.33,0.33,0.78,0.53,1.28,0.53h13.33c0.49,0,0.95-0.2,1.28-0.53 c0.33-0.33,0.53-0.78,0.53-1.28V75.3c0-0.49-0.2-0.95-0.53-1.28C65.74,73.69,65.28,73.49,64.79,73.49L64.79,73.49z"})),Il=(0,io.Ng)((e=>({colorEnabled:e.editor.colorEnabled})))((function({onClick:e,colorEnabled:t}){return t?o.createElement(Al,{color:"link",tabIndex:-1,onClick:e},o.createElement(Ol,null)):null})),Bl=e=>o.createElement(Lo,{viewBox:"0 0 448 512",...e},o.createElement("path",{d:"M440 64H336l-33.6-44.8A48 48 0 0 0 264 0h-80a48 48 0 0 0-38.4 19.2L112 64H8a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h18.9l33.2 372.3a48 48 0 0 0 47.8 43.7h232.2a48 48 0 0 0 47.8-43.7L421.1 96H440a8 8 0 0 0 8-8V72a8 8 0 0 0-8-8zM171.2 38.4A16.1 16.1 0 0 1 184 32h80a16.1 16.1 0 0 1 12.8 6.4L296 64H152zm184.8 427a15.91 15.91 0 0 1-15.9 14.6H107.9A15.91 15.91 0 0 1 92 465.4L59 96h330z"})),zl=It(It.textarea`
  background-clip: padding-box;
  background-color: ${e=>e.theme.color.background};
  border: 1px solid ${e=>e.theme.color.grayAccent};
  border-radius: 0.25em;
  color: ${e=>e.theme.color.grayAccent};
  font-family: ${e=>e.theme.font.family}, sans-serif;
  font-size: 1em;
  font-weight: 400;
  line-height: 1.5;
  margin: 0;
  overflow: visible;
  padding: 0.375em 0.75em;
  transition:
    border-color 0.15s ease-in-out,
    box-shadow 0.15s ease-in-out;

  :focus {
    border-color: ${e=>((e,t)=>{const n=Pl(e);return Sl({...n,l:n.l+.25})})(e.theme.color.primary)};
    outline: 0;
    box-shadow: 0 0 0 0.2em ${e=>e.theme.color.primary}40;
  }

  ::placeholder {
    color: ${e=>e.theme.color.grayAccent};
    opacity: 1;
  }
`)((e=>Bt`
    ${e.gutter&&Bt`
      margin-bottom: 0.5em;
    `}

    ${e.multiline&&Bt`
      resize: vertical;
    `}

    ${e.outline&&Bt`
      &:not(:focus) {
        border-style: dashed;
      }

      &:not(:focus):not(:hover) {
        background: ${e.theme.color.background};
        opacity: 0.5;
      }
    `}

    ${e.block&&Bt`
      display: block;
      width: 100%;
    `}

    ${e.readonly&&Bt`
      background-color: ${e.theme.color.gray};
      opacity: 1;
    `}

    ${e.size&&"sm"===e.size&&Bt`
      border-radius: 0.2em;
      font-size: 0.875em;
      padding: 0.25em 0.5em;
    `}

    ${e.size&&"lg"===e.size&&Bt`
      border-radius: 0.3em;
      font-size: 1.25em;
      padding: 0.5em 1em;
    `}
  `)),$l=Object.freeze({block:!0,gutter:!1,multiline:!1,outline:!1,readonly:!1,size:"sm",enterToSubmit:!0}),Fl=()=>({key:Date.now(),currentValue:void 0});class Ul extends o.Component{constructor(){super(...arguments),this.state=Fl(),this.ref=o.createRef(),this.onBlur=({currentTarget:e})=>{const t="number"==typeof this.props.value?+e.value:e.value;t&&this.props.onSubmit&&(this.props.onSubmit(t),this.setState(Fl()))},this.onChange=({currentTarget:e})=>{const t="number"==typeof this.props.value?+e.value:e.value;this.setState({currentValue:t}),this.props.onChange&&this.props.onChange(t)},this.onKeyUp=({key:e,currentTarget:t})=>{const n="number"==typeof this.props.value?+t.value:t.value;switch(e){case"Enter":this.props.enterToSubmit&&(t.blur(),this.onSubmitKeyUp(e,n));break;case"Escape":t.blur(),this.onSubmitKeyUp(e,n)}},this.onSubmitKeyUp=(e,t)=>{this.props.onSubmitKeyUp&&("Enter"!==e||this.props.enterToSubmit)&&this.props.onSubmitKeyUp(e,t)}}componentDidUpdate(e,t,n){Number.isFinite(e.value)&&!Number.isFinite(this.props.value)&&this.setState({key:Date.now()})}componentWillUnmount(){this.state.currentValue&&this.props.onSubmit&&this.props.onSubmit(this.state.currentValue)}render(){const{onChange:e,onSubmit:t,onSubmitKeyUp:n,size:r,value:s,...i}=this.props;return o.createElement(zl,{as:i.multiline?"textarea":"input",maxLength:i.multiline?void 0:100,key:this.state.key,...i,size:r,defaultValue:s,onChange:this.onChange,onKeyUp:this.onKeyUp,onBlur:this.onBlur,ref:this.ref})}focus(){this.ref.current&&this.ref.current.focus()}}Ul.defaultProps=$l;const Rl=Ot.Ay.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 10px 0;
  background-color: white;
  border: 1px solid ${e=>e.theme.color.gray};
`,jl=Ot.Ay.button.attrs({})`
  height: 28px;
  width: 28px;
  background-color: ${({color:e,selected:t})=>t?"transparent":e||"black"};
  border-radius: 14px;
  cursor: pointer;
  border: none;
  position: relative;
  &:after,
  &:before {
    content: '';
    width: 2px;
    height: 100%;
    background: ${e=>e.theme.color.primaryContrast};
    position: absolute;
    top: 0;
    left: 50%;
    transform: translate(-50%) rotate(45deg);
    display: ${({selected:e})=>e?"block":"none"};
  }
  &:before {
    transform: translate(-50%) rotate(-45deg);
  }
`,Hl=Ot.Ay.div`
  display: flex;
  width: 100%;
  justify-content: space-between;
  padding: 16px;
  /* border-bottom: 1px solid #353d47; */
  font-weight: bold;
  background-color: ${e=>e.theme.color.background};
  color: ${e=>e.theme.color.primaryContrast};
  &:last-of-type {
    border-bottom: none;
  }
`,Wl=Ot.Ay.div`
  width: 100%;
  background: ${e=>e.theme.color.backgroundVariant};
  height: 1px;
`,Vl=Ot.Ay.button`
  background: white;
  color: #212529;
  border: 1px solid rgba(0, 0, 0, 0.15);
  padding: 0.375rem 0.75rem;
  margin: 0;
  margin-top: 0.75rem;
  line-height: 1.5;
  outline: none;
  align-self: center;
  cursor: pointer;
`,Gl=["#fc5c65","#fd9644","#fed330","#26de81","#2bcbba","#45aaf2","#4b7bec","#6a89cc","#a55eea","#d1d8e0","#778ca3","black"],Yl=Ot.Ay.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: ${e=>e.theme.color.background};
  width: 100%;
  padding-bottom: 10px;
`,Zl=Ot.Ay.div`
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
`,_l=Ot.Ay.button.attrs({})`
  height: 28px;
  width: 28px;
  background-color: ${({color:e})=>e||"black"};
  border-radius: 14px;
  cursor: pointer;
  border: none;
  position: relative;
  margin: 10px;
  box-shadow: ${({color:e,selected:t})=>t?`0px 0px 10px ${e}`:"none"};
`;function Xl({onColorChange:e,color:t,open:n,key:r}){return n?o.createElement(o.Fragment,null,n?o.createElement(Yl,null,o.createElement(Zl,null,Gl.map((n=>o.createElement(_l,{key:r,color:n,onClick:()=>{e(n)},selected:n===t})))),o.createElement(Vl,{onClick:()=>{e(void 0)}},"Reset")):null):null}const ql=(0,go.Zz)(ci,fo,(0,io.Ng)((e=>({type:e.diagram.type,selected:e.selected,elements:e.elements})),{updateStart:Jn.updateStart,update:Jn.update,updateEnd:Jn.updateEnd}));class Kl extends o.Component{constructor(){super(...arguments),this.state={fillSelectOpen:!1,strokeSelectOpen:!1,textSelectOpen:!1},this.handleFillColorChange=e=>{const{element:t,onColorChange:n}=this.props;n(t.id,{fillColor:e})},this.handleLineColorChange=e=>{const{element:t,onColorChange:n}=this.props;n(t.id,{strokeColor:e})},this.handleTextColorChange=e=>{const{element:t,onColorChange:n}=this.props;n(t.id,{textColor:e})},this.toggleFillSelect=()=>{this.setState((e=>({fillSelectOpen:!e.fillSelectOpen,strokeSelectOpen:!1,textSelectOpen:!1})))},this.toggleLineSelect=()=>{this.setState((e=>({strokeSelectOpen:!e.strokeSelectOpen,fillSelectOpen:!1,textSelectOpen:!1})))},this.toggleTextSelect=()=>{this.setState((e=>({textSelectOpen:!e.textSelectOpen,strokeSelectOpen:!1,fillSelectOpen:!1})))}}render(){const{fillSelectOpen:e,strokeSelectOpen:t,textSelectOpen:n}=this.state,{open:r,element:s,fillColor:i,lineColor:l,textColor:a}=this.props,c=!e&&!t&&!n;return r?o.createElement(Rl,null,o.createElement(Jl,{title:"Fill Color",condition:i&&(e||c),color:s?.fillColor,open:e,onToggle:this.toggleFillSelect,onColorChange:this.handleFillColorChange,noDivider:!a&&!l}),o.createElement(Jl,{title:"Line Color",condition:l&&(t||c),color:s?.strokeColor,open:t,onToggle:this.toggleLineSelect,onColorChange:this.handleLineColorChange,noDivider:!a}),o.createElement(Jl,{title:"Text Color",condition:a&&(n||c),color:s?.textColor,open:n,onToggle:this.toggleTextSelect,onColorChange:this.handleTextColorChange,noDivider:!0})):null}}const Jl=({condition:e,title:t,open:n,onToggle:r,onColorChange:s,color:i,noDivider:l})=>e?o.createElement(o.Fragment,null,o.createElement(Hl,null,o.createElement("span",null,t),o.createElement(jl,{color:i,selected:n,onClick:r})),o.createElement(Xl,{open:n,color:i,onColorChange:s,key:t}),n||l?null:o.createElement(Wl,null)):null,Ql=ql(Kl),ea=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class ta extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.onUpdate=e=>{const{element:t,update:n}=this.props;n(t.id,{name:e})}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(ea,null,o.createElement(Ul,{value:e.name,onChange:this.onUpdate,autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null)))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0}))}}const na=(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete})(ta),oa=It.p`
  margin-top: 0;

  ${e=>"header"===e.variant&&Bt`
      font-size: 1.25em;
      font-weight: 500;
      line-height: 1.2;
      margin-bottom: 0.5em;
    `}

  ${e=>"body"===e.variant&&Bt`
      margin-bottom: 1em;
    `}

  ${e=>!e.gutter&&Bt`
      margin-bottom: 0;
    `}
`,ra=e=>o.createElement(oa,{variant:"header",as:"h1",...e});ra.defaultProps={gutter:!0};const sa=e=>{const{gutter:t,...n}=e;return o.createElement(oa,{variant:"body",as:"span",gutter:!1,...n})};sa.defaultProps={gutter:!1};const ia=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class la extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(ia,null,o.createElement(ra,null,this.props.translate("popup.relationship")),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null)))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0}))}}const aa=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete}))(la),ca=It.hr`
  border: 0;
  border-top: 1px solid ${e=>e.theme.color.primaryContrast};
  box-sizing: content-box;
  height: 0;
  margin-top: 0.75em;
  margin-bottom: 0.75em;
  overflow: visible;
`,da=It.div`
  display: flex;
  min-height: 1.9rem;
`,ha=It(Al).attrs((e=>({outline:!e.selected})))`
  flex: 1 1 auto;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  justify-content: center;

  :not(:first-child) {
    margin-left: -1px;
  }

  :first-child {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }

  :last-child {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }

  :not(:first-child):not(:last-child) {
    border-radius: 0;
  }
`,pa=Object.freeze({color:"primary",size:"sm"});class ua extends o.Component{constructor(){super(...arguments),this.select=e=>()=>{this.props.onChange&&this.props.onChange(e)}}render(){return o.createElement(da,null,o.Children.map(this.props.children,(({props:e})=>this.renderItem(e))))}renderItem(e){const{color:t,size:n,value:r}=this.props;return o.createElement(ha,{color:t,onClick:this.select(e.value),selected:e.value===r,size:n},e.children)}}ua.defaultProps=pa,ua.Item=e=>null;const ma=Ot.Ay.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`,ga=({id:e,onRefChange:t,value:n,onChange:r,onSubmitKeyUp:s,onDelete:i,element:l})=>{const[a,c]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,o.createElement(ma,null,o.createElement(Ul,{ref:t,gutter:!0,value:n,onChange:t=>{r(e,{name:t})},onSubmitKeyUp:s}),o.createElement(Il,{onClick:()=>{c(!a)}}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>{i(e)()}},o.createElement(Bl,null))),o.createElement(Ql,{open:a,element:l,onColorChange:r,fillColor:!0,textColor:!0}))},ya=Ot.Ay.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`,ba=(0,go.Zz)(ci,(0,io.Ng)(null,{create:Jn.create,update:Jn.update,delete:Jn.delete,getById:Jn.getById}));class fa extends o.Component{constructor(){super(...arguments),this.state={fieldToFocus:void 0,colorOpen:!1},this.newMethodField=(0,o.createRef)(),this.newAttributeField=(0,o.createRef)(),this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.create=e=>t=>{const{element:n,create:o}=this.props,r=new e;r.name=t,o(r,n.id)},this.rename=e=>t=>{this.props.update(e,{name:t})},this.toggle=e=>{const{element:t,update:n}=this.props,o=t.type===e?l.Class:e,r=new Qe[o]({id:t.id,name:t.name,type:t.type,owner:t.owner,bounds:t.bounds,ownedElements:t.ownedElements});n(t.id,r)},this.delete=e=>()=>{this.props.delete(e)}}componentDidUpdate(e,t,n){this.state.fieldToFocus&&(this.state.fieldToFocus.focus(),this.setState({fieldToFocus:void 0}))}render(){const{element:e,getById:t}=this.props,n=e.ownedElements.map((e=>t(e))).filter(Qn),r=n.filter((e=>e instanceof ie)),s=n.filter((e=>e instanceof le)),i=[],a=[];return o.createElement("div",null,o.createElement("section",null,o.createElement(ya,null,o.createElement(Ul,{value:e.name,onChange:this.rename(e.id),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.delete(e.id)},o.createElement(Bl,null))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,fillColor:!0,lineColor:!0,textColor:!0}),o.createElement(ca,null)),o.createElement("section",null,o.createElement(ua,{value:e.type,onChange:this.toggle,color:"primary"},o.createElement(ua.Item,{value:l.AbstractClass},this.props.translate("packages.ClassDiagram.AbstractClass")),o.createElement(ua.Item,{value:l.Interface},this.props.translate("packages.ClassDiagram.Interface")),o.createElement(ua.Item,{value:l.Enumeration},this.props.translate("packages.ClassDiagram.Enumeration"))),o.createElement(ca,null)),o.createElement("section",null,o.createElement(ra,null,this.props.translate("popup.attributes")),r.map(((e,t)=>o.createElement(ga,{id:e.id,key:e.id,value:e.name,onChange:this.props.update,onSubmitKeyUp:()=>t===r.length-1?this.newAttributeField.current?.focus():this.setState({fieldToFocus:i[t+1]}),onDelete:this.delete,onRefChange:e=>i[t]=e,element:e}))),o.createElement(Ul,{ref:this.newAttributeField,outline:!0,value:"",onSubmit:this.create(ie),onSubmitKeyUp:(e,t)=>{t?this.setState({fieldToFocus:this.newAttributeField.current}):a&&a.length>0?this.setState({fieldToFocus:a[0]}):this.setState({fieldToFocus:this.newMethodField.current})},onKeyDown:e=>{"Tab"===e.key&&e.currentTarget.value&&(e.preventDefault(),e.currentTarget.blur(),this.setState({fieldToFocus:this.newAttributeField.current}))}})),o.createElement("section",null,o.createElement(ca,null),o.createElement(ra,null,this.props.translate("popup.methods")),s.map(((e,t)=>o.createElement(ga,{id:e.id,key:e.id,value:e.name,onChange:this.props.update,onSubmitKeyUp:()=>t===s.length-1?this.newMethodField.current?.focus():this.setState({fieldToFocus:a[t+1]}),onDelete:this.delete,onRefChange:e=>a[t]=e,element:e}))),o.createElement(Ul,{ref:this.newMethodField,outline:!0,value:"",onSubmit:this.create(le),onSubmitKeyUp:()=>this.setState({fieldToFocus:this.newMethodField.current}),onKeyDown:e=>{"Tab"===e.key&&e.currentTarget.value&&(e.preventDefault(),e.currentTarget.blur(),this.setState({fieldToFocus:this.newMethodField.current}))}})))}}const Ea=ba(fa),Ca=e=>o.createElement(Lo,{viewBox:"0 0 512 512",...e},o.createElement("path",{d:"M508.485 184.485l-92.485 92c-4.687 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.687-4.686-4.687-12.284 0-16.971L452.893 192H12c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h440.905l-60.946-60.444c-4.687-4.686-4.687-12.284 0-16.971l7.07-7.07c4.687-4.686 12.284-4.686 16.971 0l92.485 92c4.687 4.686 4.686 12.284 0 16.97zm-504.97 160l92.485 92c4.687 4.686 12.284 4.686 16.971 0l7.07-7.07c4.687-4.686 4.687-12.284 0-16.971L59.095 352H500c6.627 0 12-5.373 12-12v-8c0-6.627-5.373-12-12-12H59.107l60.934-60.444c4.687-4.686 4.687-12.284 0-16.971l-7.071-7.07c-4.686-4.686-12.284-4.687-16.97 0l-92.485 92c-4.686 4.686-4.687 12.284 0 16.97z"})),va=Ot.Ay.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class wa extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=e=>{this.props.update(this.props.element.id,{name:e})}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(va,null,o.createElement(ra,{gutter:!1,style:{flexGrow:1}},this.props.translate("packages.ActivityDiagram.ActivityControlFlow")),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",onClick:()=>this.props.flip(e.id)},o.createElement(Ca,null)),o.createElement(Al,{color:"link",onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null))),o.createElement(ca,null)),o.createElement("section",null,o.createElement(Ul,{value:e.name,onChange:this.rename,autoFocus:!0})),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0}))}}const xa=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete,flip:to.flip}))(wa),ka=e=>o.createElement(Lo,{viewBox:"0 0 448 512",...e},o.createElement("path",{d:"M311.03 131.515l-7.071 7.07c-4.686 4.686-4.686 12.284 0 16.971L387.887 239H12c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h375.887l-83.928 83.444c-4.686 4.686-4.686 12.284 0 16.971l7.071 7.07c4.686 4.686 12.284 4.686 16.97 0l116.485-116c4.686-4.686 4.686-12.284 0-16.971L328 131.515c-4.686-4.687-12.284-4.687-16.97 0z"})),Ma=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class Ta extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.onUpdate=e=>{const{element:t,update:n}=this.props;n(t.id,{name:e})},this.onUpdateOption=e=>t=>{const{update:n}=this.props;n(e,{name:t})}}render(){const{element:e,decisions:t,targets:n,update:r}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(Ma,null,o.createElement(Ul,{value:e.name,onChange:this.onUpdate}),o.createElement(Il,{onClick:this.toggleColor})),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:r,fillColor:!0,lineColor:!0,textColor:!0})),o.createElement("section",null,t.length>0&&o.createElement(o.Fragment,null,o.createElement(ca,null),o.createElement(ra,null,this.props.translate("popup.condition")),t.map(((e,r)=>o.createElement(Ma,{key:e.id},o.createElement(Ul,{gutter:r<t.length-1,value:e.name,onChange:this.onUpdateOption(e.id)}),o.createElement(Al,{color:"link",disabled:!0},o.createElement(ka,null)),o.createElement(sa,null,n[r].name)))))))}}const Pa=(0,go.Zz)(ci,(0,io.Ng)(((e,t)=>{const n=Object.values(e.elements).filter((e=>Dt.isUMLRelationship(e))).filter((e=>e.source.element===t.element.id));return{decisions:n,targets:n.map((t=>e.elements[t.target.element]))}}),{update:Jn.update,getById:Jn.getById}))(Ta),Sa=e=>o.createElement(Lo,{viewBox:"0 0 128 128",...e},o.createElement("path",{d:"M74.1387 93.5415L92.8052 64.1677H101.049V65.1153L81.9085 93.5415H74.1387ZM74.1387 35.3625H81.9085L101.049 63.7887V64.7363H92.8052L74.1387 35.3625ZM98.7273 93.5415L117.394 64.1677H125.637V65.1153L106.497 93.5415H98.7273ZM98.7273 35.3625H106.497L125.637 63.7887V64.7363H117.394L98.7273 35.3625Z",fill:"black"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M72.068 34.225C72.4831 33.4695 73.2767 33 74.1387 33H81.9085C82.6946 33 83.4292 33.391 83.8682 34.043L103.009 62.4692C103.271 62.8592 103.411 63.3186 103.411 63.7887V65.1153C103.411 65.5854 103.271 66.0448 103.009 66.4348L83.8682 94.861C83.4292 95.513 82.6946 95.904 81.9085 95.904H74.1387C73.2767 95.904 72.4831 95.4345 72.068 94.679C71.653 93.9235 71.6824 93.0019 72.1447 92.2743L89.8254 64.452L72.1447 36.6297C71.6824 35.9021 71.653 34.9805 72.068 34.225ZM93.7418 67.0988L78.4393 91.1789H80.6511L96.8651 67.0988H93.7418ZM96.8651 61.8052H93.7418L78.4393 37.7251H80.6511L96.8651 61.8052ZM96.6567 34.225C97.0717 33.4695 97.8653 33 98.7273 33H106.497C107.283 33 108.018 33.391 108.457 34.043L127.597 62.4692C127.86 62.8592 128 63.3186 128 63.7887V65.1153C128 65.5854 127.86 66.0448 127.597 66.4348L108.457 94.861C108.018 95.513 107.283 95.904 106.497 95.904H98.7273C97.8653 95.904 97.0717 95.4345 96.6567 94.679C96.2416 93.9235 96.271 93.0019 96.7334 92.2743L114.414 64.452L96.7334 36.6297C96.271 35.9021 96.2416 34.9805 96.6567 34.225ZM118.33 67.0988L103.028 91.1789H105.24L121.454 67.0988H118.33ZM121.454 61.8052H118.33L103.028 37.7251H105.24L121.454 61.8052Z",fill:"black"}),o.createElement("path",{d:"M29.2727 93.5415H21.5028L2.36253 65.1153V64.1677H10.5588L29.2727 93.5415ZM29.2727 35.3625L10.5588 64.7363H2.36253V63.7887L21.5028 35.3625H29.2727ZM53.5297 93.5415H45.7599L26.6196 65.1153V64.1677H34.8158L53.5297 93.5415ZM53.5297 35.3625L34.8158 64.7363H26.6196V63.7887L45.7599 35.3625H53.5297Z",fill:"black"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5431 34.043C19.9822 33.391 20.7168 33 21.5028 33H29.2727C30.1352 33 30.9291 33.47 31.344 34.2262C31.7588 34.9824 31.7286 35.9045 31.2652 36.632L13.5411 64.452L31.2652 92.2721C31.7286 92.9995 31.7588 93.9216 31.344 94.6778C30.9291 95.434 30.1352 95.904 29.2727 95.904H21.5028C20.7168 95.904 19.9822 95.513 19.5431 94.861L0.402837 66.4348C0.140261 66.0448 0 65.5854 0 65.1153V63.7887C0 63.3186 0.140261 62.8592 0.402837 62.4692L19.5431 34.043ZM6.54628 67.0988L22.7602 91.1789H24.9662L9.62486 67.0988H6.54628ZM9.62486 61.8052H6.54628L22.7602 37.7251H24.9662L9.62486 61.8052ZM43.8002 34.043C44.2392 33.391 44.9738 33 45.7599 33H53.5297C54.3922 33 55.1861 33.47 55.601 34.2262C56.0158 34.9824 55.9856 35.9045 55.5222 36.632L37.7981 64.452L55.5222 92.2721C55.9856 92.9995 56.0158 93.9216 55.601 94.6778C55.1861 95.434 54.3922 95.904 53.5297 95.904H45.7599C44.9738 95.904 44.2392 95.513 43.8002 94.861L24.6599 66.4348C24.3973 66.0448 24.257 65.5854 24.257 65.1153V63.7887C24.257 63.3186 24.3973 62.8592 24.6599 62.4692L43.8002 34.043ZM30.8033 67.0988L47.0173 91.1789H49.2233L33.8819 67.0988H30.8033ZM33.8819 61.8052H30.8033L47.0173 37.7251H49.2233L33.8819 61.8052Z",fill:"black"})),Na=e=>o.createElement(Lo,{viewBox:"0 0 128 128",...e},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M82.1654 32.6199C82.0806 32.6106 81.9949 32.6059 81.9085 32.6059H74.1387C73.2767 32.6059 72.4831 33.0754 72.068 33.8309C71.653 34.5864 71.6824 35.508 72.1447 36.2356L74.6334 40.1518L82.1654 32.6199ZM42.8297 71.9556L37.7981 64.0579L55.5222 36.2378C55.9856 35.5104 56.0158 34.5883 55.601 33.8321C55.1861 33.0759 54.3922 32.6059 53.5297 32.6059H45.7599C44.9738 32.6059 44.2392 32.9969 43.8002 33.6489L24.6599 62.0751C24.3973 62.465 24.257 62.9245 24.257 63.3946V64.7212C24.257 65.1913 24.3973 65.6507 24.6599 66.0407L34.3513 80.4339L42.8297 71.9556ZM47.3686 95.5099L53.7626 89.116L55.5222 91.8779C55.9856 92.6054 56.0158 93.5275 55.601 94.2837C55.1861 95.0399 54.3922 95.5099 53.5297 95.5099H47.3686ZM28.0126 86.7726L19.9011 94.8841C19.7674 94.7608 19.647 94.6212 19.5431 94.4669L0.402837 66.0407C0.140261 65.6507 0 65.1913 0 64.7212V63.3946C0 62.9245 0.140261 62.465 0.402837 62.0751L19.5431 33.6489C19.9822 32.9969 20.7168 32.6059 21.5028 32.6059H29.2727C30.1352 32.6059 30.9291 33.0759 31.344 33.8321C31.7588 34.5883 31.7286 35.5104 31.2652 36.2378L13.5411 64.0579L28.0126 86.7726ZM85.5494 57.3292L94.0734 48.8051L103.009 62.0751C103.271 62.465 103.411 62.9245 103.411 63.3946V64.7212C103.411 65.1913 103.271 65.6507 103.009 66.0407L83.8682 94.4669C83.4292 95.1189 82.6946 95.5099 81.9085 95.5099H74.1387C73.2767 95.5099 72.4831 95.0404 72.068 94.2849C71.653 93.5294 71.6824 92.6078 72.1447 91.8802L89.8253 64.0579L85.5494 57.3292ZM100.584 42.2947L114.414 64.0579L96.7334 91.8802C96.271 92.6078 96.2416 93.5294 96.6567 94.2849C97.0717 95.0404 97.8653 95.5099 98.7273 95.5099H106.497C107.283 95.5099 108.018 95.1189 108.457 94.4669L127.597 66.0407C127.86 65.6507 128 65.1913 128 64.7212V63.3946C128 62.9245 127.86 62.465 127.597 62.0751L108.768 34.1107L100.584 42.2947Z",fill:"black"}),o.createElement("rect",{x:"110.479",y:"10",width:"11.8127",height:"141.697",rx:"2",transform:"rotate(45 110.479 10)",fill:"black"}));class Da extends o.Component{render(){const{value:e,onChange:t}=this.props;return o.createElement(Al,{color:"link",tabIndex:-1,onClick:t},e?o.createElement(Sa,null):o.createElement(Na,null))}}const La=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class Aa extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.onRename=e=>{const{element:t,update:n}=this.props;n(t.id,{name:e})},this.onStereotypeVisibilityToggle=()=>{const{element:e,update:t}=this.props,n=!e.displayStereotype;t(e.id,{displayStereotype:n})}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(La,null,o.createElement(Ul,{value:e.name,onChange:this.onRename,autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Da,{value:e.displayStereotype,onChange:this.onStereotypeVisibilityToggle}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null)))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0}))}}const Oa=(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete})(Aa),Ia=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class Ba extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.onRename=e=>{const{element:t,update:n}=this.props;n(t.id,{name:e})},this.onStereotypeVisibilityToggle=()=>{const{element:e,update:t}=this.props,n=!e.displayStereotype;t(e.id,{displayStereotype:n})}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(Ia,null,o.createElement(Ul,{value:e.name,onChange:this.onRename,autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Da,{value:e.displayStereotype,onChange:this.onStereotypeVisibilityToggle}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null)))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0}))}}const za=(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete})(Ba),$a=It(Al).attrs({block:!0})`
  ::after {
    border-top: 0.3em solid;
    border-right: 0.3em solid transparent;
    border-bottom: 0;
    border-left: 0.3em solid transparent;
    content: '';
    display: inline-block;
    height: 0;
    margin-left: 0.255em;
    vertical-align: 0.255em;
    width: 0;
  }
`,Fa=It.div`
  background-clip: padding-box;
  background-color: ${e=>e.theme.color.background};
  border: 1px solid rgba(0, 0, 0, 0.15);
  border-radius: 0.25em;
  list-style: none;
  margin: 0.125em 0 0;
  padding: 0.5em 0;
  position: absolute;
  text-align: left;
  z-index: 1000;
`,Ua=It.div``,Ra=It(Al).attrs({block:!0,color:"link"})`
  color: ${e=>e.theme.font.color};
  padding-right: 1.5em;
  padding-left: 1.5em;
  text-align: left;

  :hover {
    text-decoration: none;
    background-color: ${e=>e.theme.color.gray};
  }
`,ja=Object.freeze({color:"primary",outline:!0,placeholder:"",size:"sm"}),Ha=Object.freeze({show:!1,top:0,left:0,width:0});class Wa extends o.Component{constructor(){super(...arguments),this.state=Ha,this.activator=(0,o.createRef)(),this.dismiss=()=>{this.activator.current&&this.getScrollableParent(this.activator.current).removeEventListener("scroll",this.dismiss),document.removeEventListener("click",this.dismiss),this.setState({show:!1})},this.select=e=>()=>{this.props.onChange&&this.props.onChange(e)},this.show=e=>{if(!this.activator.current)return;const t=this.getScrollableParent(this.activator.current),n=t.getBoundingClientRect(),o=this.activator.current.getBoundingClientRect();this.setState({show:!0,top:o.top-n.top+o.height,left:o.left-n.left,width:o.width}),t.addEventListener("scroll",this.dismiss,{once:!0}),document.addEventListener("click",this.dismiss,{once:!0}),e.stopPropagation()},this.getScrollableParent=e=>{const t=getComputedStyle(e);if(/(auto|scroll)/.test([t.overflow,t.overflowY,t.overflowX].join("")))return e;const n=e.parentElement;return n?this.getScrollableParent(n):document.body}}componentWillUnmount(){document.removeEventListener("click",this.dismiss)}render(){const{color:e,outline:t,size:n}=this.props,{show:r,top:s,left:i,width:l}=this.state,a=o.Children.toArray(this.props.children).find((e=>e.props.value===this.props.value));return o.createElement(Ua,null,o.createElement($a,{ref:this.activator,color:e,onClick:e=>this.show(e),outline:t,size:n},a?a.props.children:this.props.placeholder),r&&o.createElement(Fa,{style:{top:s,left:i,minWidth:l}},o.Children.map(this.props.children,(({props:e})=>this.renderItem(e)))))}renderItem(e){const{size:t}=this.props;return o.createElement(Ra,{size:t,onClick:this.select(e.value)},e.children)}}Wa.defaultProps=ja,Wa.Item=e=>null;const Va=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete,flip:to.flip,getById:Jn.getById})),Ga=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class Ya extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.onChange=e=>{const{element:t,update:n}=this.props;n(t.id,{type:e})},this.onUpdate=(e,t)=>n=>{const{element:o,update:r}=this.props;r(o.id,{[t]:{...o[t],[e]:n}})}}render(){const{element:e,getById:t}=this.props,n=e.source&&t(e.source.element),r=e.target&&t(e.target.element);return n&&r?o.createElement("div",null,o.createElement("section",null,o.createElement(Ga,null,o.createElement(ra,{gutter:!1,style:{flexGrow:1}},this.props.translate("popup.association")),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",onClick:()=>this.props.flip(e.id)},o.createElement(Ca,null)),o.createElement(Al,{color:"link",onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0}),o.createElement(ca,null)),o.createElement("section",null,o.createElement(Wa,{value:e.type,onChange:this.onChange},o.createElement(Wa.Item,{value:a.ClassAggregation},this.props.translate("packages.ClassDiagram.ClassAggregation")),o.createElement(Wa.Item,{value:a.ClassUnidirectional},this.props.translate("packages.ClassDiagram.ClassUnidirectional")),o.createElement(Wa.Item,{value:a.ClassBidirectional},this.props.translate("packages.ClassDiagram.ClassBidirectional")),o.createElement(Wa.Item,{value:a.ClassComposition},this.props.translate("packages.ClassDiagram.ClassComposition")),o.createElement(Wa.Item,{value:a.ClassDependency},this.props.translate("packages.ClassDiagram.ClassDependency")),o.createElement(Wa.Item,{value:a.ClassInheritance},this.props.translate("packages.ClassDiagram.ClassInheritance")),o.createElement(Wa.Item,{value:a.ClassRealization},this.props.translate("packages.ClassDiagram.ClassRealization"))),o.createElement(ca,null)),o.createElement("section",null,o.createElement(ra,null,n.name),o.createElement(Ga,null,o.createElement(sa,{style:{marginRight:"0.5em"}},this.props.translate("popup.multiplicity")),o.createElement(Ul,{style:{minWidth:0},gutter:!0,value:e.source.multiplicity,onChange:this.onUpdate("multiplicity","source"),autoFocus:!0})),o.createElement(Ga,null,o.createElement(sa,{style:{marginRight:"0.5em"}},this.props.translate("popup.role")),o.createElement(Ul,{value:e.source.role,onChange:this.onUpdate("role","source")})),o.createElement(ca,null)),o.createElement("section",null,o.createElement(ra,null,r.name),o.createElement(Ga,null,o.createElement(sa,{style:{marginRight:"0.5em"}},this.props.translate("popup.multiplicity")),o.createElement(Ul,{style:{minWidth:0},gutter:!0,value:e.target.multiplicity,onChange:this.onUpdate("multiplicity","target")})),o.createElement(Ga,null,o.createElement(sa,{style:{marginRight:"0.5em"}},this.props.translate("popup.role")),o.createElement(Ul,{value:e.target.role,onChange:this.onUpdate("role","target")})))):null}}const Za=Va(Ya),_a=e=>o.createElement(Lo,{viewBox:"0 0 448 512",...e},o.createElement("path",{d:"M136.97 380.485l7.071-7.07c4.686-4.686 4.686-12.284 0-16.971L60.113 273H436c6.627 0 12-5.373 12-12v-10c0-6.627-5.373-12-12-12H60.113l83.928-83.444c4.686-4.686 4.686-12.284 0-16.971l-7.071-7.07c-4.686-4.686-12.284-4.686-16.97 0l-116.485 116c-4.686 4.686-4.686 12.284 0 16.971l116.485 116c4.686 4.686 12.284 4.686 16.97-.001z"})),Xa=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class qa extends o.Component{constructor(){super(...arguments),this.state={fieldToFocus:void 0,colorOpen:!1},this.newCommunicationLinkField=(0,o.createRef)(),this.messageRefs=[],this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.create=e=>{const{element:t,update:n}=this.props;t.messages.find((t=>t.name===e))||n(t.id,{messages:[...t.messages,new Te({id:B(),name:e,direction:"source"})]})},this.rename=e=>t=>{const{element:n,update:o}=this.props,r=[...n.messages],s=r.findIndex((t=>t.name===e.name));r[s].name=t,o(n.id,{messages:r})},this.flip=e=>()=>{const{element:t,update:n}=this.props,o=[...t.messages],r=o.findIndex((t=>t.name===e.name));o[r].direction="source"===o[r].direction?"target":"source",n(t.id,{messages:o})},this.delete=e=>()=>{const{element:t,update:n}=this.props;n(t.id,{messages:t.messages.filter((t=>t.name!==e.name))})}}componentDidMount(){this.setState({fieldToFocus:this.newCommunicationLinkField.current})}componentDidUpdate(e,t,n){this.state.fieldToFocus&&(this.state.fieldToFocus.focus(),this.setState({fieldToFocus:void 0}))}render(){const{element:e,getById:t}=this.props,n=e.source&&t(e.source.element),r=e.target&&t(e.target.element);return n&&r?o.createElement("div",null,o.createElement("section",null,o.createElement(Xa,null,o.createElement(ra,{gutter:!1},this.props.translate("packages.CommunicationDiagram.CommunicationLink")),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0}),o.createElement(ca,null)),o.createElement("section",null,o.createElement(ra,null,this.props.translate("popup.messages")," (",o.createElement("small",null,n.name," ⟶ ",r.name),")"),e.messages.map(((t,n)=>o.createElement(Xa,{key:t.id},o.createElement(Ul,{ref:e=>this.messageRefs[n]=e,gutter:!0,value:t.name,onChange:this.rename(t),onSubmitKeyUp:()=>n===e.messages.length-1?this.newCommunicationLinkField.current?.focus():this.setState({fieldToFocus:this.messageRefs[n+1]})}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.flip(t)},"source"===t.direction?o.createElement(ka,null):o.createElement(_a,null)),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.delete(t)},o.createElement(Bl,null))))),o.createElement(Ul,{ref:this.newCommunicationLinkField,outline:!0,value:"",onSubmit:this.create,onSubmitKeyUp:()=>this.setState({fieldToFocus:this.newCommunicationLinkField.current}),onKeyDown:e=>{"Tab"===e.key&&e.currentTarget.value&&(e.preventDefault(),e.currentTarget.blur(),this.setState({fieldToFocus:this.newCommunicationLinkField.current}))}}))):null}}const Ka=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete,flip:to.flip,getById:Jn.getById}))(qa),Ja=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class Qa extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.onChange=e=>{const{element:t,update:n}=this.props;n(t.id,{type:e})}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(Ja,null,o.createElement(ra,{gutter:!1,style:{flexGrow:1}},this.props.translate("popup.association")),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",onClick:()=>this.props.flip(e.id)},o.createElement(Ca,null)),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0}),o.createElement(ca,null)),o.createElement("section",null,o.createElement(Wa,{value:e.type,onChange:this.onChange},o.createElement(Wa.Item,{value:d.ComponentDependency},this.props.translate("packages.ComponentDiagram.ComponentDependency")),o.createElement(Wa.Item,{value:d.ComponentInterfaceProvided},this.props.translate("packages.ComponentDiagram.ComponentInterfaceProvided")),o.createElement(Wa.Item,{value:d.ComponentInterfaceRequired},this.props.translate("packages.ComponentDiagram.ComponentInterfaceRequired")))))}}const ec=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete,flip:to.flip}))(Qa),tc=Ot.Ay.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class nc extends o.Component{constructor(e){super(e),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.onChange=e=>{const{element:t,update:n}=this.props;n(t.id,{type:e})},this.rename=e=>{const{element:t,update:n}=this.props;n(t.id,{name:e})},this.onChange=this.onChange.bind(this)}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(tc,null,o.createElement(ra,{gutter:!1,style:{flexGrow:1}},this.props.translate("popup.association")),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",onClick:()=>this.props.flip(e.id)},o.createElement(Ca,null)),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:e.type===p.DeploymentAssociation}),o.createElement(ca,null)),o.createElement("section",null,o.createElement(Wa,{value:e.type,onChange:this.onChange},o.createElement(Wa.Item,{value:p.DeploymentAssociation},this.props.translate("packages.DeploymentDiagram.DeploymentAssociation")),o.createElement(Wa.Item,{value:p.DeploymentDependency},this.props.translate("packages.DeploymentDiagram.DeploymentDependency")),o.createElement(Wa.Item,{value:p.DeploymentInterfaceProvided},this.props.translate("packages.DeploymentDiagram.DeploymentInterfaceProvided")),o.createElement(Wa.Item,{value:p.DeploymentInterfaceRequired},this.props.translate("packages.DeploymentDiagram.DeploymentInterfaceRequired")))),e.type===p.DeploymentAssociation&&o.createElement(o.Fragment,null,o.createElement(ca,null),o.createElement("section",null,o.createElement(tc,null,o.createElement(Ul,{value:e.name,onChange:this.rename,autoFocus:!0}),o.createElement(Al,{color:"link",onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null))))))}}const oc=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete,flip:to.flip}))(nc),rc=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class sc extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.onRename=e=>{const{element:t,update:n}=this.props;n(t.id,{name:e})},this.onStereotypeVisibilityToggle=()=>{const{element:e,update:t}=this.props,n=!e.displayStereotype;t(e.id,{displayStereotype:n})},this.onStereotypeRename=e=>{const{element:t,update:n}=this.props;n(t.id,{stereotype:e})}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(rc,null,o.createElement(Ul,{value:e.name,onChange:this.onRename,autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Da,{value:e.displayStereotype,onChange:this.onStereotypeVisibilityToggle}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0})),o.createElement("section",null,o.createElement(ca,null),o.createElement(rc,null,o.createElement(Ul,{value:e.stereotype,onChange:this.onStereotypeRename}))))}}const ic=(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete})(sc),lc=Ot.Ay.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class ac extends o.Component{constructor(){super(...arguments),this.state={fieldToFocus:void 0,colorOpen:!1},this.newMethodField=(0,o.createRef)(),this.newAttributeField=(0,o.createRef)(),this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.create=e=>t=>{const{element:n,create:o}=this.props,r=new e;r.name=t,o(r,n.id)},this.rename=e=>t=>{this.props.update(e,{name:t})},this.delete=e=>()=>{this.props.delete(e)}}componentDidUpdate(e,t,n){this.state.fieldToFocus&&(this.state.fieldToFocus.focus(),this.setState({fieldToFocus:void 0}))}render(){const{element:e,getById:t}=this.props,n=e.ownedElements.map((e=>t(e))).filter(Qn),r=n.filter((e=>e instanceof ye)),s=n.filter((e=>e instanceof be)),i=[],l=[];return o.createElement("div",null,o.createElement("section",null,o.createElement(lc,null,o.createElement(Ul,{value:e.name,onChange:this.rename(e.id),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.delete(e.id)},o.createElement(Bl,null))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,fillColor:!0,lineColor:!0,textColor:!0}),o.createElement(ca,null)),o.createElement("section",null,o.createElement(ra,null,this.props.translate("popup.attributes")),r.map(((e,t)=>o.createElement(ga,{id:e.id,key:e.id,value:e.name,onChange:this.props.update,onSubmitKeyUp:()=>t===r.length-1?this.newAttributeField.current?.focus():this.setState({fieldToFocus:i[t+1]}),onDelete:this.delete,onRefChange:e=>i[t]=e,element:e}))),o.createElement(Ul,{ref:this.newAttributeField,outline:!0,value:"",onSubmit:this.create(ye),onSubmitKeyUp:(e,t)=>{t?this.setState({fieldToFocus:this.newAttributeField.current}):l&&l.length>0?this.setState({fieldToFocus:l[0]}):this.setState({fieldToFocus:this.newMethodField.current})},onKeyDown:e=>{"Tab"===e.key&&e.currentTarget.value&&(e.preventDefault(),e.currentTarget.blur(),this.setState({fieldToFocus:this.newAttributeField.current}))}})),o.createElement("section",null,o.createElement(ca,null),o.createElement(ra,null,this.props.translate("popup.methods")),s.map(((e,t)=>o.createElement(ga,{id:e.id,key:e.id,value:e.name,onChange:this.props.update,onSubmitKeyUp:()=>t===s.length-1?this.newMethodField.current?.focus():this.setState({fieldToFocus:l[t+1]}),onDelete:this.delete,onRefChange:e=>l[t]=e,element:e}))),o.createElement(Ul,{ref:this.newMethodField,outline:!0,value:"",onSubmit:this.create(be),onSubmitKeyUp:()=>this.setState({fieldToFocus:this.newMethodField.current}),onKeyDown:e=>{"Tab"===e.key&&e.currentTarget.value&&(e.preventDefault(),e.currentTarget.blur(),this.setState({fieldToFocus:this.newMethodField.current}))}})))}}const cc=(0,go.Zz)(ci,(0,io.Ng)(null,{create:Jn.create,update:Jn.update,delete:Jn.delete,getById:Jn.getById}))(ac),dc=Ot.Ay.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class hc extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=e=>t=>{this.props.update(e,{name:t})},this.onChange=e=>{const{element:t,update:n}=this.props;n(t.id,{type:e})}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,e.type===y.UseCaseAssociation?o.createElement(dc,null,o.createElement(Ul,{value:e.name,placeholder:"...",onChange:this.rename(e.id),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null))):o.createElement(dc,null,o.createElement(ra,{gutter:!1,style:{flexGrow:1}},{[y.UseCaseAssociation]:this.props.translate("packages.UseCaseDiagram.UseCaseAssociation"),[y.UseCaseGeneralization]:this.props.translate("packages.UseCaseDiagram.UseCaseGeneralization"),[y.UseCaseInclude]:this.props.translate("packages.UseCaseDiagram.UseCaseInclude"),[y.UseCaseExtend]:this.props.translate("packages.UseCaseDiagram.UseCaseExtend")}[e.type]),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.flip(e.id)},o.createElement(Ca,null)),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null)))),o.createElement("section",null,o.createElement(ca,null),o.createElement(Wa,{value:e.type,onChange:this.onChange},o.createElement(Wa.Item,{value:y.UseCaseAssociation},this.props.translate("packages.UseCaseDiagram.UseCaseAssociation")),o.createElement(Wa.Item,{value:y.UseCaseGeneralization},this.props.translate("packages.UseCaseDiagram.UseCaseGeneralization")),o.createElement(Wa.Item,{value:y.UseCaseInclude},this.props.translate("packages.UseCaseDiagram.UseCaseInclude")),o.createElement(Wa.Item,{value:y.UseCaseExtend},this.props.translate("packages.UseCaseDiagram.UseCaseExtend")))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:e.type!==y.UseCaseGeneralization}))}}const pc=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete,flip:to.flip}))(hc),uc=e=>o.createElement(Lo,{viewBox:"0 0 330 220",...e},o.createElement("g",{transform:"translate(0.912517,-1.244823)"},o.createElement("path",{style:{fill:"#000000",fillOpacity:1,stroke:"none"},d:"M 177.49050,123.22017 C 184.81453,136.25742 193.31063,146.07188 202.97884,152.66359 C 212.79308,159.10900 223.85266,162.33166 236.15762,162.33158 C 250.95230,162.33166 263.03727,157.42443 272.41258,147.60987 C 281.78729,137.64902 286.47480,124.97811 286.47511,109.59709 C 286.47480,94.802293 282.15350,82.497592 273.51121,72.682955 C 264.86833,62.868664 254.02847,57.961432 240.99161,57.961244 C 229.12610,57.961432 218.35949,62.868664 208.69174,72.682955 C 199.17001,82.351107 188.76961,99.196829 177.49050,123.22017 M 150.68381,99.709379 C 143.50589,86.818886 135.00979,77.150906 125.19547,70.705411 C 115.52734,64.260267 104.46776,61.037607 92.016692,61.037422 C 77.221638,61.037607 65.136664,65.944839 55.761733,75.759133 C 46.386643,85.427283 41.699138,97.951711 41.699203,113.33245 C 41.699138,128.12753 46.020432,140.43223 54.663098,150.24659 C 63.305607,160.06115 74.145463,164.96839 87.182697,164.96830 C 99.047834,164.96839 109.74121,160.13440 119.26284,150.46632 C 128.93068,140.79844 139.40432,123.87947 150.68381,99.709379 M 166.28443,139.91942 C 155.88383,159.84143 144.97074,174.41664 133.54510,183.64510 C 122.26563,192.87369 109.66796,197.48795 95.752051,197.48790 C 75.976520,197.48795 59.204040,189.28482 45.434563,172.87848 C 31.811432,156.47228 24.999901,136.18417 24.999949,112.01409 C 24.999901,86.379432 31.079009,65.651870 43.237293,49.831344 C 55.541927,34.011210 71.508741,26.101045 91.137784,26.100825 C 105.05370,26.101045 117.50489,30.642066 128.49138,39.723901 C 139.47757,48.659664 150.46391,63.454602 161.45043,84.108760 C 171.41120,63.894056 182.17781,49.025875 193.75030,39.504174 C 205.32237,29.836401 218.21300,25.002411 232.42226,25.002190 C 251.90445,25.002411 268.53044,33.278788 282.30030,49.831344 C 296.21602,66.384293 303.17404,86.818886 303.17436,111.13518 C 303.17404,136.62363 297.02169,157.27795 284.71729,173.09820 C 272.55877,188.77212 256.66520,196.60905 237.03653,196.60900 C 223.12024,196.60905 210.74229,192.36099 199.90266,183.86483 C 189.20907,175.22230 178.00300,160.57385 166.28443,139.91942"}))),mc=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete})),gc=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class yc extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=e=>t=>{this.props.update(e,{name:t})},this.changeTokenAmount=e=>t=>{this.props.update(e,{amountOfTokens:t})},this.changeCapacity=e=>t=>{this.props.update(e,{capacity:t})},this.delete=e=>()=>{this.props.delete(e)}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(gc,null,o.createElement(Ul,{value:e.name,onChange:this.rename(e.id),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.delete(e.id)},o.createElement(Bl,null))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0}),o.createElement(ca,null)),o.createElement("section",null,o.createElement(gc,null,o.createElement(sa,{style:{marginRight:"0.5em",minWidth:"70px"}},this.props.translate("popup.tokens")),o.createElement(Ul,{style:{minWidth:0},value:e.amountOfTokens,type:"number",onChange:this.changeTokenAmount(e.id)}))),o.createElement("section",null,o.createElement(gc,{style:{marginTop:"0.5em",alignItems:"center"}},o.createElement(sa,{style:{marginRight:"0.5em",minWidth:"70px"}},this.props.translate("popup.capacity")),o.createElement("div",{style:{position:"relative"}},o.createElement(Ul,{value:e.capacity,type:"number",onChange:this.changeCapacity(e.id)}),!isFinite(e.capacity)&&o.createElement(uc,{style:{position:"absolute",top:"25%",left:"5%"},key:e.capacity})),o.createElement(Al,{color:"link",type:"reset",tabIndex:-1,onClick:t=>this.changeCapacity(e.id)(Number.POSITIVE_INFINITY)},o.createElement(uc,null)))))}}const bc=mc(yc),fc=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete,flip:to.flip})),Ec=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class Cc extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=e=>t=>{this.props.update(e,{name:t})},this.delete=e=>()=>{this.props.delete(e)}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(Ec,null,o.createElement(Ul,{value:e.name,onChange:this.rename(e.id),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",onClick:()=>this.props.flip(e.id)},o.createElement(Ca,null)),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.delete(e.id)},o.createElement(Bl,null))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0})))}}const vc=fc(Cc),wc=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete,flip:to.flip})),xc=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class kc extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=e=>t=>{this.props.update(e,{name:t})},this.delete=e=>()=>{this.props.delete(e)}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(xc,null,o.createElement(Ul,{value:e.name,onChange:this.rename(e.id),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",onClick:()=>this.props.flip(e.id)},o.createElement(Ca,null)),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.delete(e.id)},o.createElement(Bl,null)))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0}))}}const Mc=wc(kc),Tc=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete})),Pc=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class Sc extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=e=>t=>{this.props.update(e,{name:t})},this.toggleIsInitialMarking=e=>t=>{this.props.update(e,{isInitialMarking:t.currentTarget.checked})},this.delete=e=>()=>{this.props.delete(e)}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(Pc,null,o.createElement(Ul,{value:e.name,onChange:this.rename(e.id),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.delete(e.id)},o.createElement(Bl,null))),o.createElement(ca,null)),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0}),o.createElement("section",null,o.createElement("label",{htmlFor:"toggleIsInitialMarking"},o.createElement("input",{id:"toggleIsInitialMarking",type:"checkbox",checked:e.isInitialMarking,onChange:this.toggleIsInitialMarking(e.id)}),this.props.translate("packages.ReachabilityGraph.ReachabilityGraphIsInitialMarking"))))}}const Nc=Tc(Sc),Dc=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class Lc extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.onUpdate=e=>{const{element:t,update:n}=this.props;n(t.id,{name:e})}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(Dc,null,o.createElement(Ul,{value:e.name,placeholder:this.props.translate("packages.SyntaxTree.SyntaxTreeTerminal"),onChange:this.onUpdate,autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null)))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0}))}}const Ac=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete}))(Lc),Oc=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class Ic extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.onUpdate=e=>{const{element:t,update:n}=this.props;n(t.id,{name:e})}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(Oc,null,o.createElement(Ul,{value:e.name,placeholder:this.props.translate("packages.SyntaxTree.SyntaxTreeNonterminal"),onChange:this.onUpdate,autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null)))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0}))}}const Bc=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete}))(Ic),zc=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class $c extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.onUpdate=e=>{const{element:t,update:n}=this.props;n(t.id,{name:e})}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(zc,null,o.createElement(Ul,{value:e.name,placeholder:this.props.translate("packages.Flowchart.FlowchartDecision"),onChange:this.onUpdate,autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null)))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0}))}}const Fc=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete})),Uc=Fc((e=>o.createElement($c,{...e}))),Rc=Fc((e=>o.createElement($c,{...e}))),jc=Fc((e=>o.createElement($c,{...e}))),Hc=Fc((e=>o.createElement($c,{...e}))),Wc=Fc((e=>o.createElement($c,{...e}))),Vc=Ot.Ay.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class Gc extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=e=>{this.props.update(this.props.element.id,{name:e})}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(Vc,null,o.createElement(ra,{gutter:!1,style:{flexGrow:1}},this.props.translate("packages.Flowchart.FlowchartFlowline")),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",onClick:()=>this.props.flip(e.id)},o.createElement(Ca,null)),o.createElement(Al,{color:"link",onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0}),o.createElement(ca,null)),o.createElement("section",null,o.createElement(Ul,{value:e.name,onChange:this.rename,autoFocus:!0})))}}const Yc=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete,flip:to.flip}))(Gc),Zc=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class _c extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.onUpdate=e=>{const{element:t,update:n}=this.props;n(t.id,{name:e})}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(Zc,null,o.createElement(Ul,{value:e.name,placeholder:this.props.translate("packages.SyntaxTree.SyntaxTreeNonterminal"),onChange:this.onUpdate,autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.props.delete(e.id)},o.createElement(Bl,null)))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0}))}}const Xc=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete}))(_c),qc=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete,flip:to.flip})),Kc=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class Jc extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=e=>t=>{this.props.update(e,{name:t})},this.changeFlowType=e=>t=>{this.props.update(e,{flowType:t})},this.delete=e=>()=>{this.props.delete(e)}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(Kc,null,o.createElement(Ul,{value:e.name,onChange:this.rename(e.id),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",onClick:()=>this.props.flip(e.id)},o.createElement(Ca,null)),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.delete(e.id)},o.createElement(Bl,null)))),o.createElement(ca,null),o.createElement("section",null,o.createElement(Wa,{value:e.flowType,onChange:this.changeFlowType(e.id)},o.createElement(Wa.Item,{value:"sequence"},this.props.translate("packages.BPMN.BPMNSequenceFlow")),o.createElement(Wa.Item,{value:"message"},this.props.translate("packages.BPMN.BPMNMessageFlow")),o.createElement(Wa.Item,{value:"association"},this.props.translate("packages.BPMN.BPMNAssociationFlow")),o.createElement(Wa.Item,{value:"data association"},this.props.translate("packages.BPMN.BPMNDataAssociationFlow")))),o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0}))}}const Qc=qc(Jc),ed=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete})),td=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class nd extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=e=>t=>{this.props.update(e,{name:t})},this.changeGatewayType=e=>t=>{this.props.update(e,{gatewayType:t})},this.delete=e=>()=>{this.props.delete(e)}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(td,null,o.createElement(Ul,{value:e.name,onChange:this.rename(e.id),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.delete(e.id)},o.createElement(Bl,null))),o.createElement(ca,null)),o.createElement("section",null,o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0})),o.createElement("section",null,o.createElement(Wa,{value:e.gatewayType,onChange:this.changeGatewayType(e.id)},o.createElement(Wa.Item,{value:"exclusive"},this.props.translate("packages.BPMN.BPMNExclusiveGateway")),o.createElement(Wa.Item,{value:"parallel"},this.props.translate("packages.BPMN.BPMNParallelGateway")),o.createElement(Wa.Item,{value:"inclusive"},this.props.translate("packages.BPMN.BPMNInclusiveGateway")),o.createElement(Wa.Item,{value:"event-based"},this.props.translate("packages.BPMN.BPMNEventBasedGateway")),o.createElement(Wa.Item,{value:"complex"},this.props.translate("packages.BPMN.BPMNComplexGateway")))))}}const od=ed(nd),rd=(0,go.Zz)(ci,(0,io.Ng)(null,{create:Jn.create,update:Jn.update,delete:Jn.delete,getById:Jn.getById})),sd=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class id extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.newSwimlaneField=(0,o.createRef)(),this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=(e,t)=>{this.props.update(e,{name:t})},this.delete=e=>{this.props.delete(e)},this.insertSwimlane=(e,t)=>{const n=this.props.element.ownedElements.map((e=>this.props.getById(e))).filter(Qn),o=n.every((e=>e.type!==N.BPMNSwimlane)),r=new qe({id:B(),name:t??this.props.translate("packages.BPMN.BPMNSwimlane"),bounds:{x:Xe.HEADER_WIDTH,width:this.props.element.bounds.width-Xe.HEADER_WIDTH,height:o?this.props.element.bounds.height:qe.DEFAULT_HEIGHT},ownedElements:o?this.props.element.ownedElements:[]});this.props.create(r,e);const s=new Xe({...this.props.element,ownedElements:o?[r.id]:[r.id,...this.props.element.ownedElements]});this.props.update(e,s),o&&n.forEach((e=>this.props.update(e.id,{owner:r.id})))}}render(){const{element:e,getById:t}=this.props,n=[],r=e.ownedElements.map((e=>t(e))).filter(Qn).filter((e=>e.type===N.BPMNSwimlane));return o.createElement("div",null,o.createElement("section",null,o.createElement(sd,null,o.createElement(Ul,{value:e.name,onChange:t=>this.rename(e.id,t),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:()=>this.delete(e.id)},o.createElement(Bl,null)))),o.createElement("section",null,o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0})),o.createElement("section",null,o.createElement(ca,null),o.createElement(ra,null,this.props.translate("packages.BPMN.BPMNSwimlanes")),r.reverse().map(((e,t)=>o.createElement(ga,{id:e.id,key:e.id,value:e.name,onChange:this.props.update,onSubmitKeyUp:()=>t===r.length-1?this.newSwimlaneField.current?.focus():this.setState({fieldToFocus:n[t+1]}),onDelete:e=>()=>this.delete(e),onRefChange:e=>n[t]=e,element:e}))),o.createElement(Ul,{ref:this.newSwimlaneField,outline:!0,value:"",onSubmit:t=>this.insertSwimlane(e.id,t),onSubmitKeyUp:()=>this.setState({fieldToFocus:this.newSwimlaneField.current}),onKeyDown:e=>{"Tab"===e.key&&e.currentTarget.value&&(e.preventDefault(),e.currentTarget.blur(),this.setState({fieldToFocus:this.newSwimlaneField.current}))}})))}}const ld=rd(id),ad=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete})),cd=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class dd extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=e=>t=>{this.props.update(e,{name:t})},this.changeEventType=e=>t=>{this.props.update(e,{eventType:t})},this.delete=e=>()=>{this.props.delete(e)}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(cd,null,o.createElement(Ul,{value:e.name,onChange:this.rename(e.id),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.delete(e.id)},o.createElement(Bl,null)))),o.createElement("section",null,o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0})),o.createElement("section",null,o.createElement(ca,null),o.createElement(Wa,{value:e.eventType,onChange:this.changeEventType(e.id)},o.createElement(Wa.Item,{value:"default"},this.props.translate("packages.BPMN.BPMNIntermediateEvent")),o.createElement(Wa.Item,{value:"message-catch"},this.props.translate("packages.BPMN.BPMNMessageIntermediateCatchEvent")),o.createElement(Wa.Item,{value:"message-throw"},this.props.translate("packages.BPMN.BPMNMessageIntermediateThrowEvent")),o.createElement(Wa.Item,{value:"timer-catch"},this.props.translate("packages.BPMN.BPMNTimerIntermediateCatchEvent")),o.createElement(Wa.Item,{value:"escalation-throw"},this.props.translate("packages.BPMN.BPMNEscalationIntermediateThrowEvent")),o.createElement(Wa.Item,{value:"conditional-catch"},this.props.translate("packages.BPMN.BPMNConditionalIntermediateCatchEvent")),o.createElement(Wa.Item,{value:"link-catch"},this.props.translate("packages.BPMN.BPMNLinkIntermediateCatchEvent")),o.createElement(Wa.Item,{value:"link-throw"},this.props.translate("packages.BPMN.BPMNLinkIntermediateThrowEvent")),o.createElement(Wa.Item,{value:"compensation-throw"},this.props.translate("packages.BPMN.BPMNCompensationIntermediateThrowEvent")),o.createElement(Wa.Item,{value:"signal-catch"},this.props.translate("packages.BPMN.BPMNSignalIntermediateCatchEvent")),o.createElement(Wa.Item,{value:"signal-throw"},this.props.translate("packages.BPMN.BPMNSignalIntermediateThrowEvent")))))}}const hd=ad(dd),pd=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete})),ud=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class md extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=e=>t=>{this.props.update(e,{name:t})},this.changeEventType=e=>t=>{this.props.update(e,{eventType:t})},this.delete=e=>()=>{this.props.delete(e)}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(ud,null,o.createElement(Ul,{value:e.name,onChange:this.rename(e.id),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.delete(e.id)},o.createElement(Bl,null)))),o.createElement("section",null,o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0})),o.createElement("section",null,o.createElement(ca,null),o.createElement(Wa,{value:e.eventType,onChange:this.changeEventType(e.id)},o.createElement(Wa.Item,{value:"default"},this.props.translate("packages.BPMN.BPMNStartEvent")),o.createElement(Wa.Item,{value:"message"},this.props.translate("packages.BPMN.BPMNMessageStartEvent")),o.createElement(Wa.Item,{value:"timer"},this.props.translate("packages.BPMN.BPMNTimerStartEvent")),o.createElement(Wa.Item,{value:"conditional"},this.props.translate("packages.BPMN.BPMNConditionalStartEvent")),o.createElement(Wa.Item,{value:"signal"},this.props.translate("packages.BPMN.BPMNSignalStartEvent")))))}}const gd=pd(md),yd=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete})),bd=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class fd extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=e=>t=>{this.props.update(e,{name:t})},this.changeEventType=e=>t=>{this.props.update(e,{eventType:t})},this.delete=e=>()=>{this.props.delete(e)}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(bd,null,o.createElement(Ul,{value:e.name,onChange:this.rename(e.id),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.delete(e.id)},o.createElement(Bl,null)))),o.createElement("section",null,o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0})),o.createElement("section",null,o.createElement(ca,null),o.createElement(Wa,{value:e.eventType,onChange:this.changeEventType(e.id)},o.createElement(Wa.Item,{value:"default"},this.props.translate("packages.BPMN.BPMNEndEvent")),o.createElement(Wa.Item,{value:"message"},this.props.translate("packages.BPMN.BPMNMessageEndEvent")),o.createElement(Wa.Item,{value:"escalation"},this.props.translate("packages.BPMN.BPMNEscalationEndEvent")),o.createElement(Wa.Item,{value:"error"},this.props.translate("packages.BPMN.BPMNErrorEndEvent")),o.createElement(Wa.Item,{value:"compensation"},this.props.translate("packages.BPMN.BPMNCompensationEndEvent")),o.createElement(Wa.Item,{value:"signal"},this.props.translate("packages.BPMN.BPMNSignalEndEvent")),o.createElement(Wa.Item,{value:"terminate"},this.props.translate("packages.BPMN.BPMNTerminateEndEvent")))))}}const Ed=yd(fd),Cd=(0,go.Zz)(ci,(0,io.Ng)(null,{update:Jn.update,delete:Jn.delete})),vd=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`;class wd extends o.Component{constructor(){super(...arguments),this.state={colorOpen:!1},this.toggleColor=()=>{this.setState((e=>({colorOpen:!e.colorOpen})))},this.rename=e=>t=>{this.props.update(e,{name:t})},this.changeTaskType=e=>t=>{this.props.update(e,{taskType:t})},this.changeMarker=e=>t=>{this.props.element.marker!==t?this.props.update(e,{marker:t}):this.props.update(e,{marker:"none"})},this.delete=e=>()=>{this.props.delete(e)}}render(){const{element:e}=this.props;return o.createElement("div",null,o.createElement("section",null,o.createElement(vd,null,o.createElement(Ul,{value:e.name,onChange:this.rename(e.id),autoFocus:!0}),o.createElement(Il,{onClick:this.toggleColor}),o.createElement(Al,{color:"link",tabIndex:-1,onClick:this.delete(e.id)},o.createElement(Bl,null))),o.createElement("section",null,o.createElement(Ql,{open:this.state.colorOpen,element:e,onColorChange:this.props.update,lineColor:!0,textColor:!0,fillColor:!0}))),o.createElement("section",null,o.createElement(ca,null),o.createElement(Wa,{value:e.taskType,onChange:this.changeTaskType(e.id)},o.createElement(Wa.Item,{value:"default"},this.props.translate("packages.BPMN.BPMNTask")),o.createElement(Wa.Item,{value:"user"},this.props.translate("packages.BPMN.BPMNUserTask")),o.createElement(Wa.Item,{value:"send"},this.props.translate("packages.BPMN.BPMNSendTask")),o.createElement(Wa.Item,{value:"receive"},this.props.translate("packages.BPMN.BPMNReceiveTask")),o.createElement(Wa.Item,{value:"manual"},this.props.translate("packages.BPMN.BPMNManualTask")),o.createElement(Wa.Item,{value:"business-rule"},this.props.translate("packages.BPMN.BPMNBusinessRuleTask")),o.createElement(Wa.Item,{value:"script"},this.props.translate("packages.BPMN.BPMNScriptTask")))),o.createElement("section",null,o.createElement(ca,null),o.createElement(ua,{value:e.marker,onChange:this.changeMarker(e.id),color:"primary"},o.createElement(ua.Item,{value:"parallel multi instance"},o.createElement(br,{stroke:"currentColor"})),o.createElement(ua.Item,{value:"sequential multi instance"},o.createElement(gr,{stroke:"currentColor"})),o.createElement(ua.Item,{value:"loop"},o.createElement(yr,{stroke:"currentColor"})))))}}const xd=Cd(wd),kd={[L.Package]:na,[L.Class]:Ea,[L.AbstractClass]:Ea,[L.Interface]:Ea,[L.Enumeration]:Ea,[L.ClassAttribute]:null,[L.ClassMethod]:null,[L.ObjectName]:cc,[L.ObjectAttribute]:null,[L.ObjectMethod]:null,[L.Activity]:na,[L.ActivityActionNode]:na,[L.ActivityFinalNode]:na,[L.ActivityForkNode]:na,[L.ActivityForkNodeHorizontal]:na,[L.ActivityInitialNode]:na,[L.ActivityMergeNode]:Pa,[L.ActivityObjectNode]:na,[L.UseCase]:na,[L.UseCaseActor]:na,[L.UseCaseSystem]:na,[L.Component]:za,[L.Subsystem]:Oa,[L.ComponentInterface]:na,[L.DeploymentNode]:ic,[L.DeploymentComponent]:za,[L.DeploymentArtifact]:na,[L.DeploymentInterface]:na,[L.PetriNetPlace]:bc,[L.PetriNetTransition]:na,[L.ReachabilityGraphMarking]:Nc,[L.CommunicationLinkMessage]:null,[L.SyntaxTreeTerminal]:Ac,[L.SyntaxTreeNonterminal]:Bc,[L.FlowchartTerminal]:Uc,[L.FlowchartProcess]:Rc,[L.FlowchartDecision]:jc,[L.FlowchartFunctionCall]:Hc,[L.FlowchartInputOutput]:Wc,[L.ColorLegend]:Xc,[L.BPMNTask]:xd,[L.BPMNSubprocess]:na,[L.BPMNTransaction]:na,[L.BPMNCallActivity]:na,[L.BPMNAnnotation]:na,[L.BPMNStartEvent]:gd,[L.BPMNIntermediateEvent]:hd,[L.BPMNEndEvent]:Ed,[L.BPMNGateway]:od,[L.BPMNDataObject]:na,[L.BPMNDataStore]:na,[L.BPMNGroup]:na,[L.BPMNPool]:ld,[L.BPMNSwimlane]:na,[et.ClassAggregation]:Za,[et.ClassBidirectional]:Za,[et.ClassComposition]:Za,[et.ClassDependency]:Za,[et.ClassInheritance]:Za,[et.ClassRealization]:Za,[et.ClassUnidirectional]:Za,[et.ObjectLink]:aa,[et.ActivityControlFlow]:xa,[et.UseCaseAssociation]:pc,[et.UseCaseExtend]:pc,[et.UseCaseGeneralization]:pc,[et.UseCaseInclude]:pc,[et.CommunicationLink]:Ka,[et.ComponentInterfaceProvided]:ec,[et.ComponentInterfaceRequired]:ec,[et.ComponentDependency]:ec,[et.DeploymentAssociation]:oc,[et.DeploymentDependency]:oc,[et.DeploymentInterfaceProvided]:oc,[et.DeploymentInterfaceRequired]:oc,[et.PetriNetArc]:vc,[et.ReachabilityGraphArc]:Mc,[et.SyntaxTreeLink]:aa,[et.FlowchartFlowline]:Yc,[et.BPMNFlow]:Qc},Md=e=>o.createElement(Lo,{viewBox:"0 0 512 512",...e},o.createElement("path",{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"})),Td=e=>o.createElement(Lo,{viewBox:"0 0 512 512",...e},o.createElement("path",{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"}));var Pd=n(6819);const Sd=(0,go.Zz)(ci,(0,io.Ng)(null,{assess:jo.assess})),Nd=Object.freeze({showLinkIcon:!0});class Dd extends o.Component{constructor(){super(...arguments),this.state=Nd,this.toggle=()=>{this.setState({showLinkIcon:!this.state.showLinkIcon})},this.removeLink=()=>{const{element:e,assessment:t}=this.props;this.props.assess(e.id,{...t},"MANUAL")}}render(){const{assessment:e,readonly:t}=this.props,n=e?.dropInfo.tooltipMessage;return o.createElement("div",null,t?o.createElement(Al,{color:"link",tabIndex:-1,"data-tip":!0,"data-for":"tooltip"},o.createElement(Td,null)):this.state.showLinkIcon?o.createElement(Al,{color:"link",tabIndex:-1,"data-tip":!0,"data-for":"tooltip",onClick:this.toggle},o.createElement(Td,null)):o.createElement(Al,{color:"link",tabIndex:-1,"data-tip":!0,"data-for":"tooltip",onClick:this.removeLink,onMouseLeave:this.toggle},o.createElement(Bl,null)),o.createElement(Pd.A,{id:"tooltip",place:"right",effect:"solid"},this.state.showLinkIcon?n:e?.dropInfo.removeMessage))}}const Ld=Sd(Dd),Ad=It.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
`,Od=It.span`
  margin-top: 10px;
  font-size: 12px;
`,Id=It.div`
  color: white;
  background-color: ${e=>e.color||"grey"};
  text-align: center;
  margin: 0.4rem auto 0 auto;
  padding: 0.25em 0.4em;
  border-radius: 0.15rem;
  font-size: 12px;
  font-weight: bold;
`,Bd=(0,go.Zz)(ci,(0,io.Ng)(((e,t)=>({readonly:e.editor.readonly,assessment:jo.getById(e.assessments)(t.element.id),diagramType:e.diagram.type})),{assess:jo.assess,delete:jo.delete,updateEndAll:Jn.updateEndAll}));class zd extends o.Component{constructor(){super(...arguments),this.updateScore=e=>{const{element:t,assessment:n}=this.props,o=parseFloat(e)||0;this.props.assess(t.id,{...n,correctionStatus:{description:void 0,status:"NOT_VALIDATED"},score:o})},this.updateFeedback=e=>{const{element:t,assessment:n}=this.props,o=e.length?e:void 0,r=n?.dropInfo?"DROPPED":"MANUAL";this.props.assess(t.id,{score:0,...n,feedback:o},r)},this.deleteFeedback=()=>{this.props.updateEndAll(),this.props.delete(this.props.element.id)}}render(){const{element:e,assessment:t,readonly:n,diagramType:r}=this.props;return o.createElement(o.Fragment,null,o.createElement("section",null,o.createElement(ra,null,this.props.translate("assessment.assessment")," ",this.props.translate(`packages.${r}.${e.type}`),e.name?o.createElement(o.Fragment,null," ",o.createElement("span",{style:{display:"inline-block"}},`"${e.name}"`)):""),t?.dropInfo?o.createElement(Ld,{assessment:t,element:e,readonly:n}):null),o.createElement("section",null,o.createElement(Ad,null,o.createElement("span",{style:{marginRight:"0.5em"}},this.props.translate("assessment.score"),":"),n?o.createElement("span",null,t&&t.score||"-"):o.createElement(Ul,{gutter:!0,type:"number",step:.5,onChange:this.updateScore,value:t?String(t.score):""}),n?null:o.createElement(Al,{color:"link",onClick:this.deleteFeedback},o.createElement(Bl,null)))),o.createElement("span",{style:{display:"inline"}},this.props.translate("assessment.feedback")),t?.dropInfo&&t?.dropInfo.instruction?o.createElement("div",{style:{display:"inline"}},o.createElement(Al,{color:"link",tabIndex:-1,"data-tip":!0,"data-for":"tooltip-feedback-hint"},o.createElement(Md,null)),o.createElement(Pd.A,{id:"tooltip-feedback-hint",place:"right",effect:"solid"},t.dropInfo.feedbackHint),t.dropInfo.instruction.feedback):null,n?t&&t.feedback&&o.createElement("section",null,t.feedback):o.createElement("section",null,o.createElement(Ul,{multiline:!0,placeholder:t?.dropInfo?this.props.translate("assessment.additionalFeedbackPlaceholder"):this.props.translate("assessment.feedbackPlaceholder"),onChange:this.updateFeedback,enterToSubmit:!1,value:t&&t.feedback?t.feedback:""}),t?.label?o.createElement(Ad,null,o.createElement(Id,{color:t?.labelColor},t?.label)):null,e?.assessmentNote?o.createElement(Ad,null,o.createElement(Od,null,e.assessmentNote)):null,t?.correctionStatus?.description?o.createElement(Ad,null,o.createElement("span",null,t.correctionStatus.description)):null),o.createElement(ca,null))}}const $d=Bd(zd),Fd=({element:e,getChildren:t})=>({elements:t(e.id)}),Ud=(0,io.Ng)(null,{getChildren:Jn.getChildren,assessNext:e=>(t,n)=>{const{elements:o}=n(),r=t(Jn.getChildren(e.id)),s=r.length?r[r.length-1]:e,i=Object.keys(o).indexOf(s.id)+1,l=Object.keys(o)[i%Object.keys(o).length];t(Jn.updateEnd(e.id)),t(Jn.deselect(e.id)),t(Jn.updateStart(l)),t(Jn.select(l))}});class Rd extends o.Component{constructor(){super(...arguments),this.state=Fd(this.props),this.container=(0,o.createRef)(),this.setFocus=()=>{if(!this.container.current)return;const e=this.container.current.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e&&e.focus()},this.onKey=e=>{"Enter"===e.key&&("keydown"===e.type?e.preventDefault():this.next())},this.next=()=>{const{assessNext:e,element:t}=this.props;e(t)}}componentDidMount(){this.setFocus()}componentDidUpdate(e){e.element!==this.props.element&&this.setState(Fd(this.props),this.setFocus)}render(){const{elements:e}=this.state;return o.createElement("div",{ref:this.container,id:"modeling-assessment-container"},e.map((e=>o.createElement($d,{key:e.id,element:e}))),o.createElement("section",null,o.createElement(Al,{block:!0,outline:!0,color:"primary",onClick:this.next,onKeyDown:this.onKey,onKeyUp:this.onKey},"Next Assessment")))}}const jd=Ud(Rd),Hd=It.div`
  background-clip: padding-box;
  background-color: ${e=>e.theme.color.backgroundVariant};
  border: 1px solid ${e=>e.theme.color.primaryContrast}33;
  border-radius: 0.3em;
  box-sizing: border-box;
  display: block;
  filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.2));
  font-family: ${e=>e.theme.font.family}, sans-serif;
  font-size: ${e=>e.theme.font.size}px;
  font-style: normal;
  font-weight: 400;
  left: 0;
  letter-spacing: normal;
  line-break: auto;
  line-height: 1.5;
  max-width: 276px;
  position: absolute;
  text-align: left;
  text-align: start;
  text-decoration: none;
  text-transform: none;
  text-shadow: none;
  top: 0;
  will-change: transform;
  white-space: normal;
  word-break: normal;
  word-spacing: normal;
  word-wrap: break-word;

  *,
  *:before,
  *:after {
    box-sizing: inherit;
  }

  ${e=>{let t=`${e.position.x}px`,n=`${e.position.y}px`;const o="start"===e.alignment?0:"end"===e.alignment?100:50;switch(e.placement){case"top":t+=` - ${o}%`,n+=" - 100% - 0.5em";break;case"right":t+=" + 0.5em",n+=` - ${o}%`;break;case"bottom":t+=` - ${o}%`,n+=" + 0.5em";break;case"left":t+=" - 100% - 0.5em",n+=` - ${o}%`}return Bt`
      transform: translate(calc(${t}), calc(${n}));
    `}}
`,Wd=It.div`
  color: ${e=>e.theme.font.color};
  padding: 0.5em 0.75em;

  ${e=>e.maxHeight&&Bt`
      max-height: ${e.maxHeight}px;
      overflow: auto;
    `}
`,Vd=Bt`
  bottom: calc((0.5em + 1px) * -1);

  &::before {
    border-top-color: ${e=>e.theme.color.primaryContrast}33;
    border-width: 0.5em 0.5em 0;
    bottom: 0;
  }

  &::after {
    border-top-color: ${e=>e.theme.color.gray};
    border-width: 0.5em 0.5em 0;
    bottom: 1px;
  }
`,Gd=Bt`
  height: 1em;
  left: calc((0.5em + 1px) * -1);
  width: 0.5em;

  &::before {
    border-right-color: ${e=>e.theme.color.primaryContrast}33;
    border-width: 0.5em 0.5em 0.5em 0;
    left: 0;
  }

  &::after {
    border-right-color: ${e=>e.theme.color.gray};
    border-width: 0.5em 0.5em 0.5em 0;
    left: 1px;
  }
`,Yd=Bt`
  top: calc((0.5em + 1px) * -1);

  &::before {
    border-bottom-color: ${e=>e.theme.color.primaryContrast}33;
    border-width: 0 0.5em 0.5em 0.5em;
    top: 0;
  }

  &::after {
    border-bottom-color: ${e=>e.theme.color.gray};
    border-width: 0 0.5em 0.5em 0.5em;
    top: 1px;
  }
`,Zd=Bt`
  height: 1em;
  right: calc((0.5em + 1px) * -1);
  width: 0.5em;

  &::before {
    border-left-color: ${e=>e.theme.color.primaryContrast}33;
    border-width: 0.5em 0 0.5em 0.5em;
    right: 0;
  }

  &::after {
    border-left-color: ${e=>e.theme.color.gray};
    border-width: 0.5em 0 0.5em 0.5em;
    right: 1px;
  }
`,_d=It.div`
  display: block;
  height: 0.5em;
  position: absolute;
  width: 1em;

  &::before,
  &::after {
    content: '';
    border-color: transparent;
    border-style: solid;
    display: block;
    position: absolute;
  }

  ${e=>"top"===e.placement&&Vd}
  ${e=>"right"===e.placement&&Gd}
  ${e=>"bottom"===e.placement&&Yd}
  ${e=>"left"===e.placement&&Zd}

  ${e=>"top"===e.placement||"bottom"===e.placement?"start"===e.alignment?"left: 0.3em;":"end"===e.alignment?"right: 0.3em;":"left: 50%; transform: translate(-50%, 0);":"start"===e.alignment?"top: 0.3em;":"end"===e.alignment?"bottom: 0.3em;":"top: 50%; transform: translate(0, -50%);"}
`,Xd=(0,o.forwardRef)((({children:e,placement:t="right",alignment:n="center",maxHeight:r,...s},i)=>o.createElement(Hd,{ref:i,placement:t,alignment:n,...s},o.createElement(_d,{placement:t,alignment:n}),o.createElement(Wd,{maxHeight:r},e)))),qd=(0,go.Zz)(fo,Ks,(0,io.Ng)((e=>({element:e.elements[e.updating[0]],disabled:!e.editor.enablePopups,mode:e.editor.mode})),{updateEnd:Jn.updateEnd,getAbsolutePosition:Jn.getAbsolutePosition})),Kd=Object.freeze({position:null,placement:void 0,alignment:void 0});class Jd extends o.Component{constructor(){super(...arguments),this.state=Kd,this.popover=(0,o.createRef)(),this.show=()=>{this.position(this.props),document.addEventListener("pointerdown",this.onPointerDown);const{parentElement:e}=this.props.canvas.layer;e&&e.addEventListener("scroll",this.onScroll)},this.dismiss=()=>{this.setState(Kd),document.removeEventListener("pointerdown",this.onPointerDown);const{parentElement:e}=this.props.canvas.layer;e&&e.removeEventListener("scroll",this.onScroll),this.props.element&&this.props.updateEnd(this.props.element.id)},this.position=({element:e,canvas:t})=>{const n=t.layer.parentElement;if(e&&n){const o=this.props.getAbsolutePosition(e.id).add(t.origin().subtract(this.props.root.getBoundingClientRect().x,this.props.root.getBoundingClientRect().y)),r=o.add(e.bounds.width/2,e.bounds.height/2),s=o,i=n.getBoundingClientRect(),l=r.x<i.width/2?"right":"left",a=r.y<i.height/2?"start":"end";if(Dt.isUMLRelationship(e)){const t=new No(e.path),n=t.position(t.length/2);s.x+=n.x,s.y+=n.y,"start"===a&&(s.y-=15),"end"===a&&(s.y+=15)}else"right"===l&&(s.x+=e.bounds.width),"end"===a&&(s.y+=e.bounds.height);this.setState({position:s,alignment:a,placement:l})}},this.onPointerDown=e=>{this.popover.current&&e.target instanceof HTMLElement&&this.popover.current.contains(e.target)||this.dismiss()},this.onScroll=e=>{this.dismiss()}}componentDidUpdate(e){!e.element&&this.props.element?setTimeout(this.show,0):e.element&&this.props.element&&e.element!==this.props.element&&this.position(this.props)}render(){const{element:e,disabled:t,mode:n}=this.props,{position:r,alignment:s,placement:i}=this.state;if(!e||t||!r)return null;let l;return l=n===Wn.Assessment?jd:kd[e.type],l?(0,lo.createPortal)(o.createElement(Xd,{ref:this.popover,position:r,placement:i,alignment:s,maxHeight:500},o.createElement(l,{element:e})),this.props.root):null}}const Qd=qd(Jd),eh=Bt((e=>`\n  text {\n    fill: ${e.theme.font.color};\n    font-family: ${e.theme.font.family};\n    font-size: ${e.theme.font.size}px;\n  }\n\n  marker, text {\n    fill-opacity: 1;\n  }\n\n  * {\n    overflow: visible;\n  }\n`)),th=It.div`
  display: flex;
  width: 100%;
  height: 100%;
  min-width: inherit;
  min-height: inherit;
  max-width: inherit;
  max-height: inherit;
  box-sizing: border-box;
  user-select: none;
  position: relative;
  touch-action: none;

  font-family: ${({theme:e})=>e.font.family}, sans-serif;
  font-size: ${({theme:e})=>e.font.size}px;
  color: ${({theme:e})=>e.font.color};
  font-weight: 400;
  line-height: 1.5;
  text-size-adjust: 100%;
  -webkit-tap-highlight-color: transparent;

  *,
  *:before,
  *:after {
    box-sizing: inherit;
  }

  svg {
    ${eh}
  }
`,nh=(0,go.Zz)(fo,(0,io.Ng)((e=>({readonly:e.editor.readonly,mode:e.editor.mode,elements:e.elements,resizingInProgress:e.resizing.length>0,connectingInProgress:e.connecting.length>0,reconnectingInProgress:Object.keys(e.reconnecting).length>0,hoveringInProgress:e.hovered.length>0,zoomFactor:e.editor.zoomFactor})),{select:Jn.select,changeSelectionBox:As.setSelectionBoxActive}));class oh extends o.Component{constructor(e){super(e),this.mouseDown=e=>{this.state.selectionStarted?this.setState((t=>({...t,selectionRectangle:{...t.selectionRectangle,endX:e.clientX,endY:e.clientY}}))):this.props.resizingInProgress||this.props.connectingInProgress||this.props.reconnectingInProgress||this.props.hoveringInProgress||(this.props.changeSelectionBox(!0),this.setState({selectionStarted:!0,selectionRectangle:{x:e.clientX,y:e.clientY,width:void 0,height:void 0}}))},this.mouseUp=()=>{this.state.selectionStarted&&(this.getElementIDsInSelectionBox(),this.setState({selectionStarted:!1,selectionRectangle:{x:void 0,y:void 0,width:void 0,height:void 0}}),this.props.changeSelectionBox(!1))},this.mouseMove=e=>{if(!this.state.selectionStarted)return;const t=this.getElementIDsInSelectionBox();this.props.select(t,!0),this.setState((t=>({selectionStarted:t.selectionStarted,selectionRectangle:{...t.selectionRectangle,width:e.clientX-(t.selectionRectangle.x??0),height:e.clientY-(t.selectionRectangle.y??0)}})))},this.isElementInSelectionBox=e=>{const t=this.props.canvas.origin(),{x:n,y:o,width:r,height:s}=this.state.selectionRectangle;if(!(n&&o&&r&&s))return!1;const i={x:(n-t.x)/this.props.zoomFactor,y:(o-t.y)/this.props.zoomFactor,height:s/this.props.zoomFactor,width:r/this.props.zoomFactor};return((e,t)=>{const n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],o=Math.min(t.x,t.x+t.width),r=Math.max(t.x,t.x+t.width),s=Math.min(t.y,t.y+t.height),i=Math.max(t.y,t.y+t.height);return n.some((e=>o<=e.x&&e.x<=r&&s<=e.y&&e.y<=i))})(e.bounds,i)},this.getElementIDsInSelectionBox=()=>Object.entries(this.props.elements).reduce(((e,[t,n])=>null!==n.owner?e:this.isElementInSelectionBox(n)?[...e,t]:e),[]),this.state={selectionStarted:!1,selectionRectangle:{x:void 0,y:void 0,width:void 0,height:void 0}}}componentDidMount(){const{layer:e}=this.props.canvas;this.props.readonly||this.props.mode!==Wn.Modelling&&this.props.mode!==Wn.Exporting||(e.addEventListener("mousedown",this.mouseDown),e.addEventListener("mousemove",this.mouseMove),e.addEventListener("mouseup",this.mouseUp))}componentWillUnmount(){const{layer:e}=this.props.canvas;e.removeEventListener("mousedown",this.mouseDown),e.removeEventListener("mousemove",this.mouseMove),e.removeEventListener("mouseup",this.mouseUp)}render(){const{x:e=0,y:t=0,width:n=0,height:r=0}=this.state.selectionRectangle,s=$t();return this.state.selectionStarted&&0!=n&&o.createElement("svg",{opacity:.5,pointerEvents:"none",style:{position:"fixed",left:`${Math.min(e,e+n)}px`,width:`${Math.abs(n)}px`,top:`${Math.min(t,t+r)}px`,height:`${Math.abs(r)}px`,backgroundColor:s.color.primary}})}}const rh=nh(oh),sh=Object.freeze({canvas:null,root:null});class ih extends o.Component{constructor(){super(...arguments),this.state=sh,this.resolveInitialized=()=>{},this.initializedPromise=new Promise((e=>{this.resolveInitialized=e})),this.setCanvas=e=>{e&&e.layer.current&&this.setState({canvas:{...e,layer:e.layer.current}})},this.setLayout=e=>{e&&this.setState({root:e})}}render(){const e=this.state.canvas?{canvas:this.state.canvas}:null,t=this.state.root?{root:this.state.root}:null;return o.createElement(bo,{value:e},o.createElement(qs,{value:t},o.createElement(hl,{initialState:this.props.state,patcher:this.props.patcher,ref:e=>{this.store??=e,this.resolveInitialized()}},o.createElement(ai,{locale:this.props.locale},o.createElement(Tl,{styles:this.props.styles},o.createElement(th,{className:"apollon-editor",ref:this.setLayout},t&&o.createElement(ti,null,e&&o.createElement(o.Fragment,null,o.createElement(Qd,null),o.createElement(kl,null),o.createElement(Zs,null)),o.createElement(Rs,null,o.createElement(Ls,{ref:this.setCanvas})),e&&o.createElement(o.Fragment,null,o.createElement(rh,null)))))))))}get initialized(){return this.initializedPromise}}const lh=(e,t,n)=>{const o=new Set;for(const r of t){const t=e[r];if(!t)continue;const s=new Set(J.isUMLContainer(t)?t.ownedElements:[]);n.has(r)&&(o.add(r),n=new Set([...n,...s])),lh(e,s,n).forEach(o.add,o)}return o},ah=(e,t,n)=>{const o=new Set;for(const r of t){const t=e[r];if(!t)continue;const s=new Set(J.isUMLContainer(t)?t.ownedElements:[]);n.has(r)?n=new Set([...n,...s]):o.add(r),ah(e,s,n).forEach(o.add,o)}return o};class ch extends o.Component{constructor(){super(...arguments),this.state=(({model:e,options:t})=>{const n={layer:document.createElementNS("http://www.w3.org/2000/svg","svg"),origin:()=>new I},o=e.elements,r=e.relationships,s=e=>{const t=new Qe[e.type],r=J.isUMLContainer(t)?Object.values(o).filter((t=>t.owner===e.id)):[];t.deserialize(e,r);const i=r.reduce(((e,t)=>[...e,...s(t)]),[]),[l,...a]=t.render(n,i,!0);return a.map((e=>{const t=r.find((t=>t.id===e.id));return t?(e.bounds.x=t.bounds.x,e.bounds.y=t.bounds.y,e):e})),[l,...a]},i=[...Object.values(o).filter((e=>!e.owner)).reduce(((e,t)=>[...e,...s(t)]),[]),...Object.values(r).map((e=>{const t=new yn[e.type];return t.deserialize(e),t}))].reduce(((e,t)=>({...e,[t.id]:t})),{}),l=Object.values(i).filter((e=>!e.owner));let a=new Set(Object.values(i).map((e=>e.id)));t&&t.include&&(a=lh(i,new Set(l.map((e=>e.id))),new Set(t.include))),t&&t.exclude&&(a=ah(i,new Set(l.map((e=>e.id))),new Set(t.exclude)));const c=t&&t.keepOriginalSize||!1,d=j(Object.values(i).filter((e=>c||a.has(e.id)))),h=((e=15)=>"number"==typeof e?{top:e,right:e,bottom:e,left:e}:Object.assign({top:0,right:0,bottom:0,left:0},e))(t?.margin);return d.x-=h.left,d.y-=h.top,d.width+=h.left+h.right,d.height+=h.top+h.bottom,{elements:Object.values(i).filter((e=>a.has(e.id))).map((e=>(e.bounds.x-=d.x,e.bounds.y-=d.y,e))),bounds:d}})(this.props)}render(){const{bounds:e,elements:t}=this.state,n=Ml($t(),this.props.styles||{}),r=so.fromModel(this.props.model),s=(e,t,o)=>({x:t,y:o,width:e.bounds.width,height:e.bounds.height,className:e.name?e.name.replace(/[<>]/g,""):"",fill:e.fillColor||n.color.background}),i=(()=>{let e=0,n=0;for(const o of t)if(Dt.isUMLRelationship(o))for(const t of o.path)t.x<e&&(e=t.x+o.bounds.x-15),t.y<n&&(n=t.y+o.bounds.y-15);return{minX:Math.min(e,0),minY:Math.min(n,0)}})();return o.createElement(hl,{initialState:r},o.createElement(Ot.NP,{theme:n},o.createElement("svg",{width:e.width-i.minX+1,height:e.height-i.minY+1,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:n.color.background},o.createElement("defs",null,o.createElement("style",null,eh[0]({theme:n}))),t.map(((e,n)=>{const r=Br[e.type];switch(r){case Go:const l=t.filter((t=>t.owner===e.id));return o.createElement("svg",{key:e.id,...s(e,e.bounds.x-i.minX,e.bounds.y-i.minY)},o.createElement(r,{key:n,element:e},l.map(((t,n)=>{const r=Br[t.type];return o.createElement("svg",{key:t.id,...s(t,0,t.bounds.y-e.bounds.y)},o.createElement(r,{key:n,element:t}))}))));case Yo:break;default:return o.createElement("svg",{key:e.id,...s(e,e.bounds.x-i.minX,e.bounds.y-i.minY)},o.createElement(r,{key:n,element:e}))}})))))}}var dh=n(4949),hh=n(7291),ph=n(1443),uh=n(5282),mh=n(8354),gh=n(6978),yh=n(1160),bh=n(6126),fh=n(5016),Eh=n(8452),Ch=n(9099);function vh(e){return"replace"===e.op}class wh{constructor(){this.waitlist={},this.cleanup=new hh.B,this.cleanup.pipe((0,fh.$)((e=>e)),(0,Eh.Z)((e=>e.pipe((0,gh.B)(wh.SUPRESSION_WINDOW)))),(0,Ch.M)((e=>delete this.waitlist[e]))).subscribe()}signOperation(e){if(vh(e)){const t=Math.random().toString(36).substring(2,15),n=e.path;return this.waitlist[n]=t,this.cleanup.next(n),{...e,hash:t}}return e}sign(e){return e.map((e=>this.signOperation(e)))}isVerifiedOperation(e){return!(vh(e)&&function(e){return!vh(e)||"hash"in e}(e)&&e.path in this.waitlist&&(this.waitlist[e.path]===e.hash&&delete this.waitlist[e.path],1))}verified(e){return e.filter((e=>this.isVerifiedOperation(e)))}}wh.SUPRESSION_WINDOW=200;const xh={diff:function(e,t){const n=(0,dh.UD)(e,t).filter((e=>!e.path.startsWith("/size"))),o=[];n.forEach((e=>{const t=/\/relationships\/(?<id>[\w-]+)\/path/g.exec(e.path);t?.groups?.id&&!o.includes(t.groups.id)&&o.push(t.groups.id)}));const r=n.filter((e=>{const t=/\/relationships\/(?<id>[\w-]+)\//g.exec(e.path);return!t?.groups?.id||!o.includes(t.groups.id)}));return o.forEach((e=>{const n=t.relationships[e];r.push({op:"replace",path:`/relationships/${e}/isManuallyLayouted`,value:n.isManuallyLayouted}),r.push({op:"replace",path:`/relationships/${e}/path`,value:n.path}),r.push({op:"replace",path:`/relationships/${e}/bounds`,value:n.bounds})})),r},maxFrequency:60};class kh{constructor(e=xh){this.subscribers={},this.discreteRouter=new hh.B,this.continuousRouter=new hh.B,this.verifier=new wh,this.options={diff:e.diff||xh.diff,maxFrequency:e.maxFrequency||xh.maxFrequency},this.continuousPatchObservable=this.continuousRouter.pipe((0,ph.c)(1e3/this.options.maxFrequency));const t=(0,uh.h)(this.discreteRouter,this.continuousPatchObservable);this.observable=t.pipe((0,mh.r)(t.pipe((0,gh.B)(0))),(0,yh.T)((e=>e.flat())),(0,bh.p)((e=>e.length>0)))}get snapshot(){return this._snapshot}check(e){this.checkAndUpdate(e)}checkContinuous(e){this.checkAndUpdate(e,!1)}initialize(e){this._snapshot=e}patch(e,t){this.validate();const n=this.verifier.verified(e);return this._snapshot=t??this._snapshot,n&&n.length>0?(this._snapshot=n.reduce(((e,t,n)=>{try{return(0,dh.HH)(e,t,n)}catch{return e}}),this.snapshot),{patched:!0,result:this.snapshot}):{patched:!1,result:this.snapshot}}subscribe(e){const t=this.nextKey();return this.subscribers[t]=this.observable.subscribe(e),t}subscribeToDiscreteChanges(e){const t=this.nextKey();return this.subscribers[t]=this.discreteRouter.subscribe(e),t}subscribeToContinuousChanges(e){const t=this.nextKey();return this.subscribers[t]=this.continuousPatchObservable.subscribe(e),t}unsubscribe(e){this.subscribers[e].unsubscribe(),delete this.subscribers[e]}checkAndUpdate(e,t=!0){this.validate();const n=!(0===Object.keys(this.subscribers).length)&&this.options.diff(this.snapshot,e);t&&(this._snapshot=e),n&&n.length&&(t?this.discreteRouter:this.continuousRouter).next(this.verifier.sign(n))}nextKey(){return Math.max(...Object.keys(this.subscribers).map((e=>parseInt(e,10))),0)+1}validate(){if(!this.snapshot)throw new Error("Patcher not initialized")}}class Mh extends o.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,t){this.setState({hasError:!0,error:e})}render(){return this.state.hasError&&this.state.error?(this.props.onError(this.state.error),null):this.props.children}}const Th=/var\(--apollon-[\S]+, #[0-9a-fA-F]+\)/g,Ph=/#[0-9a-fA-F]+/,Sh=e=>{const t=e.match(Th),n=t?.map((e=>({match:e,color:e.match(Ph)})));return n?.forEach((t=>{e=e.replace(t.match,t.color?t.color[0]:"")})),e};class Nh{ensureInitialized(){if(!this.store)throw console.error("The application state of Apollon could not be retrieved. The editor may already be destroyed or you might need to `await apollonEditor.nextRender`."),new Error("The application state of Apollon could not be retrieved. The editor may already be destroyed or you might need to `await apollonEditor.nextRender`.")}get model(){return this.ensureInitialized(),so.toModel(this.store.getState())}set model(e){this.ensureInitialized();const t={...so.fromModel(e),editor:{...this.store.getState().editor}};this.recreateEditor(t)}set type(e){this.ensureInitialized();const t={...this.store.getState(),diagram:new Lt({type:e}),elements:void 0};this.recreateEditor(t)}set locale(e){this.ensureInitialized();const t=this.store.getState();this.options.locale=e,this.recreateEditor(t)}static async exportModelAsSvg(e,t,n){const s=document.createElement("div"),i=(0,r.H)(s),l=(0,o.createElement)(ch,{model:e,options:t,styles:n}),a=new ch({model:e,options:t,styles:n});return i.render(l),await(async e=>await new Promise((e=>setTimeout(e,50))))(),{svg:Sh(s.querySelector("svg").outerHTML),clip:a.state.bounds}}constructor(e,t){this.container=e,this.options=t,this.selection={elements:{},relationships:{}},this.assessments=[],this.application=null,this.patcher=new kh,this.selectionSubscribers={},this.assessmentSubscribers={},this.modelSubscribers={},this.discreteModelSubscribers={},this.errorSubscribers={},this.componentDidMount=()=>{this.container.setAttribute("touch-action","none")},this.onDispatch=()=>{if(!this.store)return;const{elements:e,selected:t,assessments:n}=this.store.getState(),o={elements:t.filter((t=>e[t].type in L)).reduce(((e,t)=>({...e,[t]:!0})),{}),relationships:t.filter((t=>e[t].type in et)).reduce(((e,t)=>({...e,[t]:!0})),{})};JSON.stringify(this.selection)!==JSON.stringify(o)&&(Object.values(this.selectionSubscribers).forEach((e=>e(o))),this.selection=o);const r=Object.keys(n).map((t=>({modelElementId:t,elementType:e[t].type,score:n[t].score,feedback:n[t].feedback,dropInfo:n[t].dropInfo})));JSON.stringify(this.assessments)!==JSON.stringify(r)&&(Object.values(this.assessmentSubscribers).forEach((e=>e(r))),this.assessments=r),this.notifyModelSubscribers(),this.notifyDiscreteModelSubscribers()},this.notifyDiscreteModelSubscribers=()=>{try{if(!this.store)return;if(this.model,this.store.getState().lastAction.endsWith("END")||this.store.getState().lastAction.endsWith("DELETE")){const e=so.toModel(this.store.getState());Object.values(this.discreteModelSubscribers).forEach((t=>t(e)))}}catch(e){}},this.notifyModelSubscribers=Qr((()=>{try{if(!this.store)return;const e=this.model,t=this.currentModelState?so.toModel(this.currentModelState):null;!t&&e||t&&JSON.stringify(e)!==JSON.stringify(t)?(Object.values(this.modelSubscribers).forEach((t=>t(e))),this.currentModelState=this.store.getState()):this.currentModelState=this.store.getState()}catch(e){}}),50);let n,s=t.model?so.fromModel(t.model):{};s={...s,diagram:new Lt({...s.diagram,type:t.type}),editor:{...s.editor,view:Vn.Modelling,mode:t.mode||Wn.Exporting,colorEnabled:t.colorEnabled||!1,zoomFactor:t.scale||1,readonly:t.readonly||!1,enablePopups:!0===t.enablePopups||void 0===t.enablePopups,enableCopyPasteToClipboard:!0===t.copyPasteToClipboard,features:{hoverable:!0,selectable:!0,movable:!t.readonly,resizable:!t.readonly,connectable:!t.readonly,updatable:!t.readonly,droppable:!t.readonly,alternativePortVisualization:!1}}},this.nextRenderPromise=new Promise((e=>{n=e}));const i=(0,o.createElement)(ih,{ref:async e=>{null!=e&&(this.application=e,await e.initialized,this.store.subscribe(this.onDispatch),n())},state:s,patcher:this.patcher,styles:t.theme,locale:t.locale}),l=(0,o.createElement)(Mh,{onError:this.onErrorOccurred.bind(this)},i);this.root=(0,r.H)(e),this.root.render(l);try{this.currentModelState=this.store?.getState()}catch(e){this.currentModelState=void 0}this.componentDidMount()}destroy(){this.root?.unmount()}select(e){if(!this.store)return;const t=this.store.dispatch;t(Jn.deselect()),t(Jn.select([...Object.entries(e.elements).filter((([,e])=>e)).map((([e])=>e)),...Object.entries(e.relationships).filter((([,e])=>e)).map((([e])=>e))]))}_getNewSubscriptionId(e){return 0===Object.keys(e).length?0:Math.max(...Object.keys(e).map((e=>parseInt(e))))+1}subscribeToSelectionChange(e){const t=this._getNewSubscriptionId(this.selectionSubscribers);return this.selectionSubscribers[t]=e,t}unsubscribeFromSelectionChange(e){delete this.selectionSubscribers[e]}subscribeToAssessmentChange(e){const t=this._getNewSubscriptionId(this.assessmentSubscribers);return this.assessmentSubscribers[t]=e,t}unsubscribeFromAssessmentChange(e){delete this.assessmentSubscribers[e]}subscribeToModelChange(e){const t=this._getNewSubscriptionId(this.modelSubscribers);return this.modelSubscribers[t]=e,t}unsubscribeFromModelChange(e){delete this.modelSubscribers[e]}subscribeToModelDiscreteChange(e){const t=this._getNewSubscriptionId(this.discreteModelSubscribers);return this.discreteModelSubscribers[t]=e,t}unsubscribeFromDiscreteModelChange(e){delete this.discreteModelSubscribers[e]}subscribeToModelChangePatches(e){return this.patcher.subscribeToDiscreteChanges(e)}subscribeToAllModelChangePatches(e){return this.patcher.subscribe(e)}subscribeToModelContinuousChangePatches(e){return this.patcher.subscribeToContinuousChanges(e)}unsubscribeFromModelChangePatches(e){return this.patcher.unsubscribe(e)}importPatch(e){this.store?.dispatch((e=>({type:Ji.PATCH,payload:e,undoable:!1}))(e))}subscribeToApollonErrors(e){const t=this._getNewSubscriptionId(this.errorSubscribers);return this.errorSubscribers[t]=e,t}remoteSelect(e,t,n,o){this.store?.dispatch(Jn.remoteSelectDeselect({name:e,color:t},n,o||[]))}pruneRemoteSelectors(e){this.store?.dispatch(Jn.pruneRemoteSelectors(e))}unsubscribeToApollonErrors(e){delete this.errorSubscribers[e]}exportAsSVG(e){return Nh.exportModelAsSvg(this.model,e,this.options.theme)}getScaleFactor(){return this.options.scale||1}recreateEditor(e){let t;this.destroy(),this.nextRenderPromise=new Promise((e=>{t=e}));const n=(0,o.createElement)(ih,{ref:async e=>{null!=e&&(this.application=e,await e.initialized,this.store.subscribe(this.onDispatch),t())},state:e,patcher:this.patcher,styles:this.options.theme,locale:this.options.locale}),s=(0,o.createElement)(Mh,{onError:this.onErrorOccurred.bind(this)},n);this.root=(0,r.H)(this.container),this.root.render(s),this.componentDidMount()}onErrorOccurred(e){Object.values(this.errorSubscribers).forEach((t=>t(e))),this.restoreEditor()}restoreEditor(){if(this.currentModelState){const e={...this.currentModelState,hovered:[],selected:[],moving:[],resizing:[],connecting:[],reconnecting:{},updating:[]};this.recreateEditor(e)}}get store(){return this.application?.store?.state.store}get nextRender(){return this.nextRenderPromise}}const Dh=JSON.parse('{"light":{"--apollon-primary":"#2a8fbd","--apollon-primary-contrast":"#212529","--apollon-secondary":"#6c757d","--apollon-warning-yellow":"#ffc800","--apollon-background":"#ffffff","--apollon-background-variant":"#e5e5e5","--apollon-gray":"#e9ecef","--apollon-gray-variant":"#343a40","--apollon-grid":"rgba(36, 39, 36, 0.1)"},"dark":{"--apollon-primary":"#51a2a2","--apollon-primary-contrast":"#eae1e1","--apollon-secondary":"#6f85c2","--apollon-warning-yellow":"#ffc800","--apollon-background":"#1B2121","--apollon-background-variant":"#3e4c4c","--apollon-gray":"#343a40","--apollon-gray-variant":"#6c757d","--apollon-grid":"#3e4c4c"}}');var Lh=n.t(Dh,2);Promise.all([n.e(96),n.e(87)]).then(n.bind(n,4087));const Ah=document.getElementById("apollon");let Oh=null,Ih={model:JSON.parse(window.localStorage.getItem("apollon")),colorEnabled:!0,scale:.8};const Bh=e=>{console.log("onChange");const{name:t,value:n}=e.target;Ih={...Ih,[t]:n},Hh()},zh=e=>{console.log("onSwitch");const{name:t,checked:n}=e.target;Ih={...Ih,[t]:n},Hh()},$h=()=>{if(console.log("save"),!Oh)return;const e=Oh.model;return localStorage.setItem("apollon",JSON.stringify(e)),Ih={...Ih,model:e},Ih},Fh=()=>(console.log("model"),null!==Oh?JSON.stringify(Oh.model):""),Uh=()=>{console.log("clear"),localStorage.removeItem("apollon"),Ih={...Ih,model:void 0}},Rh=e=>{console.log("setTheming:"+e);const t=document.documentElement,n=document.getElementById("light"===e?"theming-light-mode-button":"theming-dark-mode-button"),o=document.getElementById("light"===e?"theming-dark-mode-button":"theming-light-mode-button");n&&o&&(n.classList.add("selected"),o.classList.remove("selected"));for(const n of Object.keys(Lh[e]))t.style.setProperty(n,Lh[e][n])},jh=async e=>{if(console.log("draw"),!Oh)return;const t=[...Object.entries(Oh.model.interactive.elements).filter((([,e])=>e)).map((([e])=>e)),...Object.entries(Oh.model.interactive.relationships).filter((([,e])=>e)).map((([e])=>e))],n=e?{[e]:t,scale:Oh.getScaleFactor()}:{scale:Oh.getScaleFactor()},{svg:o}=await Oh.exportAsSVG(n),r=new Blob([o],{type:"image/svg+xml"}),s=URL.createObjectURL(r);window.open(s)},Hh=()=>{console.log("render"),$h(),Oh&&Oh.destroy(),Oh=new Nh(Ah,Ih)};Hh()}},i={};function l(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,exports:{}};return s[e].call(n.exports,n,n.exports,l),n.exports}l.m=s,e=[],l.O=(t,n,o,r)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){for(var[n,o,r]=e[d],i=!0,a=0;a<n.length;a++)(!1&r||s>=r)&&Object.keys(l.O).every((e=>l.O[e](n[a])))?n.splice(a--,1):(i=!1,r<s&&(s=r));if(i){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,o,r]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var r=Object.create(null);l.r(r);var s={};t=t||[null,n({}),n([]),n(n)];for(var i=2&o&&e;"object"==typeof i&&!~t.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,l.d(r,s),r},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>e+".d0fe58f836804e63e803.js",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},r="apollon:",l.l=(e,t,n,s)=>{if(o[e])o[e].push(t);else{var i,a;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var h=c[d];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==r+n){i=h;break}}i||(a=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,l.nc&&i.setAttribute("nonce",l.nc),i.setAttribute("data-webpack",r+n),i.src=e),o[e]=[t];var p=(t,n)=>{i.onerror=i.onload=null,clearTimeout(u);var r=o[e];if(delete o[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((e=>e(n))),t)return t(n)},u=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),a&&document.head.appendChild(i)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={792:0};l.f.j=(t,n)=>{var o=l.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise(((n,r)=>o=e[t]=[n,r]));n.push(o[2]=r);var s=l.p+l.u(t),i=new Error;l.l(s,(n=>{if(l.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",i.name="ChunkLoadError",i.type=r,i.request=s,o[1](i)}}),"chunk-"+t,t)}},l.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[s,i,a]=n,c=0;if(s.some((t=>0!==e[t]))){for(o in i)l.o(i,o)&&(l.m[o]=i[o]);if(a)var d=a(l)}for(t&&t(n);c<s.length;c++)r=s[c],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(d)},n=self.webpackChunkapollon=self.webpackChunkapollon||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),l.nc=void 0;var a=l.O(void 0,[96],(()=>l(3543)));return l.O(a)})()));